function zhReport(e){if("undefined"==typeof YA)return!1;var e=e||{},t={pro:"huya_web",pas:YA.cookie.get("username")||"",yyuid:YA.cookie.get("yyuid")||"",pageType:"root",rso:"",rso_desc:"",eid:"",eid_desc:""},n=function(e,t,n,i,a){var o=e+"="+t+"; domain="+n+"; path="+i;a>0&&(o=o+"; expires="+a.toGMTString()),document.cookie=o};for(var i in e)t[i]=e[i];"undefined"==typeof ya&&(window.ya=new YA(t.pro,t.pas,{pageType:t.pageType,yyuid:t.yyuid}),ya.reportProductStartUp({pro:t.pro,rso:t.rso,rso_desc:t.rso_desc,ref:YA.cookie.get("ya_eid")}),ya.startProductHeartbeat({pro:t.pro,rso:t.rso,ref:YA.cookie.get("ya_eid"),rso_desc:t.rso_desc}),ya.reportProductEvent({eid:t.eid,eid_desc:t.eid_desc,rso:t.rso,rso_desc:t.rso_desc,ref:YA.cookie.get("ya_eid")}),TT.emit("reportReady"),$("body").on("click",".clickstat",function(){var e="";$(this).attr("href")&&(e=$(this).attr("eid").substring(6),n("ya_eid",e,TT.domainForWriteCookie,"/")),ya.reportProductEvent({eid:$(this).attr("eid"),eid_desc:$(this).attr("eid_desc"),ref:YA.cookie.get("ya_eid")})}),$("body").on("click",".new-clickstat",function(){var e="",t=$(this);try{var i=$.parseJSON(t.attr("report"));$(this).attr("href")&&(e=i.position,n("ya_eid",e,TT.domainForWriteCookie,"/")),i.ref=YA.cookie.get("ya_eid"),ya.reportProductEvent(i)}catch(a){}}),$("body").on("click",".third-clickstat",function(){var e=$(this).data("thirdstat"),t=t||new Image;t.src=e}))}function parseQueryString(e){var t,n={};if(-1!=(t=e.indexOf("?")))for(var i=e.substring(t+1,e.length),a=i.split("&"),o=[],r=0,s=a.length;s>r;r++)o=a[r].split("="),n[o[0]]=o[1];return n}!function(){var e=window.TT_CFG={},t=location.protocol+"//"+location.host+"/";e.login={switchState:window.UDB_SDK_SWTICH,YY:{authUrl:t+"udb_web/authorizeURL.php?do=authorizeEmbedURL",callbackUrl:t+"udb_web/udbport2.php?do=callback",OAuthUrl:t+"udb_web/udbport2.php?do=dummy3AuthorizeURL&loginType={type}",logoutUrl:t+"udb_web/udbport2.php?do=logout",regUrl:t+"udb_web/udbport2.php?do=registerEmbedURL&registerUrl=https://zc.yy.com/reg/udb/reg4udb.do&type={type}"},TT:{loginCallback:t+"udb_web/udbport2.php?m=HuyaHome&do=huyaLCallback",logoutCallback:t+"udb_web/udbport2.php?m=HuyaHome&do=huyaLogout",loginAuthCallback:t+"udb_web/udbport2.php?m=HuyaHome&do=thirdLCallback",regUrl:t+"udb_web/udbport2.php?do=registerEmbedURL&registerUrl=https://zc.yy.com/reg/udb/reg4udb.do&type=Mobile"}},e.req={userInfo:function(){return $.getJSON(t+"udb_web/checkLogin.php")},userNick:function(){return $.getJSON(t+(UDB_SDK_SWTICH?"udb_web/udbport2.php?m=HuyaHome&do=checkUserNick":"udb_web/udbport2.php?do=checkUserNick"))},userAvatar:function(e){return $.ajax({url:"//user.huya.com/user/getUserInfo",data:{uid:e},dataType:"jsonp",cache:!0})}}}(),!function(e){e.HUYA_UTIL={trim:function(e){var t=/^(\s|\u00A0)+|(\s|\u00A0)+$/g;return(e||"").replace(t,"")},xssFilter:function(e){return"string"!=typeof e?e:e=e.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\'/g,"&#39;").replace(/\"/g,"&quot;")},isFunction:function(e){return"[object Function]"===Object.prototype.toString.call(e)},createStyleSheet:function(e){var t;return document.createStyleSheet?(t=document.createStyleSheet(),t.cssText=e):(t=document.createElement("style"),t.appendChild(document.createTextNode(e)),document.getElementsByTagName("head")[0].appendChild(t)),t},deleteCookie:function(e,t,n){if(this.hasCookie(e)){var i=new Date;i.setTime(i.getTime()-864e5),document.cookie=e+"=_; expires="+i.toGMTString()+"; domain="+t+"; path="+n}},writeCookie:function(e,t,n,i,a){var o=e+"="+t+"; domain="+n+"; path="+i;a>0&&(o=o+"; expires="+a.toGMTString()),document.cookie=o},hasCookie:function(e){if(document.cookie.length>0){var t=document.cookie.indexOf(e+"=");if(-1!=t)return!0}return!1},getCookieVal:function(e){for(var t=document.cookie.split("; "),n=0;n<t.length;n+=1){var i=t[n].split("=");if(i[0]==e)return decodeURIComponent(i[1])}return""},getScript:function(e,t){function n(){o.onload=o.onreadystatechange=null,o=null,"function"==typeof t&&t()}var i=document,a=i.head||i.getElementsByTagName("head")[0]||i.documentElement,o=i.createElement("script");"onload"in o?o.onload=n:o.onreadystatechange=function(){/loaded|complete/.test(o.readyState)&&n()},o.charset="utf-8",o.type="text/javascript",o.async=!0,o.src=e,a.appendChild(o)},throttle:function(e,t){function n(){o=arguments,r=this,a||(a=setTimeout(function(){a=null,e.apply(r,o),r=o=null},i?0:t),i&&(i=!1))}var i=!0,a=null,o=null,r=null;return n.cancel=function(){clearTimeout(a),a=r=o=null},n},debounce:function(e,t,n){var i=null,a=function(){i&&clearTimeout(i);var a=this,o=arguments;return n?(i||e.apply(a,o),i=setTimeout(function(){i=null},t)):i=setTimeout(function(){i=null,e.apply(a,o)},t),a};return a.cancel=function(){clearTimeout(i),i=null},a},isMobile:function(){return navigator.userAgent.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|Android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i)?!0:!1}(),extend:function(e,t){for(var n in t)"undefined"!=typeof t[n]&&t.hasOwnProperty(n)&&(e[n]=t[n]);return e}}}(window),!function(){var e={};e.env=e.type=0,location.search.replace(/TT_ENV=(.)/,function(t,n){var i=parseInt(n,10);return isNaN(i)||(e.env=i),t}),e.isProd=0==e.env,e.debug=!e.isProd,e.log=function(){var t=!1;try{t=!!localStorage.getItem("TT_DEBUG")}catch(n){}return e.debug||t?console.log.apply(console,arguments):void 0},e.domain={main:"www.huya.com",i:"i.huya.com",hd:"hd.huya.com"},e.app={main:location.protocol+"//"+e.domain.main+"/",act:location.protocol+"//"+e.domain.main+"/act/",i:"http://"+e.domain.i+"/",hd:"http://"+e.domain.hd+"/"},e.domainForWriteCookie="huya.duowan.com"==location.host?"duowan.com":"huya.com",e.trimUrl=function(e){return $.trim(e).replace(/^http\:/,"")},window.TT=e}(),TT.Event=function(){function e(){return{fired:!1,data:[],callbacks:new $.Callbacks}}function t(){function t(t,n,i){if(!o(t)||!a(n))return this;var r=c[t]||(c[t]=new e);return r.callbacks.add(n),i&&r.fired&&n.apply(this,r.data),this}function n(t){if(!o(t))return this;var a=c[t]||(c[t]=new e);return a.fired=!0,a.data=i.call(arguments,1),a.callbacks.fireWith(this,a.data),"ALL"!==t&&n.apply(this,["ALL"].concat(i.call(arguments))),this}function r(e,t){var n=arguments.length;if(0===n)for(var i in c)c.hasOwnProperty(i)&&c[i].callbacks.empty();else if(o(e)){var r=c[e];r&&(1===n?r.callbacks.empty():a(t)&&r.callbacks.remove(t))}return this}function s(e,n,i){if(!o(e)||!a(n))return this;var s=function(){n.apply(this,arguments),r(e,s)};t(e,s,i)}var c={};return{on:t,one:s,off:r,emit:n}}var n=[],i=n.slice,a=function(e){return"function"==typeof e},o=function(e){return"string"==typeof e};return t}(),TT.event=new TT.Event,function(){var e={},t={},n=-1;e.publish=function(e){var n=arguments;t[e]||(t[e]={published:!1,data:null,subscribers:[]});var i=t[e];i.published=!0,i.data=Array.prototype.slice.call(n);for(var a=i.subscribers.length,o=null;a--;)o=i.subscribers[a],o.func.apply(o,n);return!0},e.subscribe=function(e,i,a){if("function"!=typeof i)return-1;t[e]||(t[e]={published:!1,data:null,subscribers:[]});var o=(++n).toString(),r={token:o,func:i};return t[e].subscribers.push(r),a&&t[e].published&&i.apply(r,t[e].data),o},e.unsubscribe=function(e){for(var n in t)if(t.hasOwnProperty(n))for(var i=t[n].subscribers,a=0,o=i.length;o>a;a++){var r=i[a];if(r.token===e)return i.splice(a,1),e}return!1},TT.on=function(){e.subscribe.apply(e,arguments)},TT.off=function(){e.unsubscribe.apply(e,arguments)},TT.emit=function(){e.publish.apply(e,arguments)},window.DUYA_SUB=e}(),!function(e,t,n){function i(t){if(!(this instanceof i))return new i(t);udb=this;var a=n.lazyPromise(function(e){r().done(function(){e.call(udb,new HyLogin(t))})}),o=function(e){return function(){var t=arguments;a(function(n){"function"==typeof n[e]&&n[e].apply(n,t)})}},s=["login","logout","register","on","off","once"];e.each(s,function(e,t){udb[t]=o(t)})}var a=n.lazyLoadScript("https://udbres.huya.com/js/HyUDBWebSDK-1.3.js?_="+Math.floor(1e10*Math.random())),o=n.lazyLoadScript("https://udbres.huya.com/js/HyLoginSDK.js?_="+Math.floor(1e10*Math.random())),r=function(){return e.when(a(),o())};i.loadAssets=r,t.TT_HUYA_SDK=i}(jQuery,window,function(){var e={},t=e.once=function(e){var t,n;return function(){return n||(n=!0,t=e.apply(this,arguments)),t}},n=e.lazyPromise=function(e){var n=t(function(){var t=new $.Deferred;return e(function(){t.resolveWith(this,arguments)}),function(e){return t.done(e).promise()}});return function(e){return n()(e)}},i=e.getScript=function(e,t){function n(){o.onload=o.onreadystatechange=null,o=null,"function"==typeof t&&t()}var i=document,a=i.head||i.getElementsByTagName("head")[0]||i.documentElement,o=i.createElement("script");"onload"in o?o.onload=n:o.onreadystatechange=function(){/loaded|complete/.test(o.readyState)&&n()},o.charset="utf-8",o.type="text/javascript",o.async=!0,o.src=e,a.appendChild(o)};return e.lazyLoadScript=function(e){return n(function(t){i(e,t)})},e}()),!function(e,t,n,i){function a(e){function r(t){var n=e.OAuthUrl.replace("{type}",t);d=window.open(n,"_blank"),d.focus()}if(!(this instanceof a))return new a(e);var s=t.extend(this,new i),c=s.ready=n.lazyPromise(function(e){o(function(){var t=document.getElementById("udbsdk_login_content");t||(t=document.createElement("div"),t.id="udbsdk_login_content",document.body.appendChild(t)),t.style.display="none";try{UDB.sdk.PCWeb.initialize()}catch(n){}s.loginView=t,e.call(s)})}),l=window.NAV_UTIL?window.NAV_UTIL:window.NAV_UTIL={},u=-1==e.authUrl.indexOf(location.host);s.login=function(){var n=t.ajax({type:u?"GET":"POST",url:e.authUrl,data:{callbackURL:e.callbackUrl},dataType:u?"jsonp":"json"});t.when(n,c()).done(function(t){var n=t[0];n&&(s.loginView.style.display="block",UDB.sdk.PCWeb.embedOpenLgn(n,e.callbackUrl),s.emit("loginOpen"))})},l.UDBLoginCallback=function(){s.emit("verifySuccess")},TT.on("UDB_LOGIN_SUCCESS",function(e,t){s.emit("loginSuccess",t)});var d=null;s.loginByWX=function(){r("weixin")},s.loginByQQ=function(){r("qq")},s.loginByWB=function(){r("weibo")},l.reloadPage=function(){d&&d.close(),s.emit("loginOAuthCallback")},l.loginFail=function(e){d&&d.close(),s.emit("loginOAuthFail",e)},s.logout=function(n){var i=t.ajax({type:"GET",url:e.logoutUrl,dataType:u?"jsonp":"text"});t.when(i,c()).done(function(e){var t=e[0];t&&UDB.sdk.PCWeb.deleteCrossmainCookieWithCallBack(t,function(){!n&&s.emit("logoutSuccess")})})},s.registerPhone=function(n,i){t.ajax({url:e.regUrl.replace("{type}","Mobile"),type:u?"GET":"POST",dataType:u?"jsonp":"json"}).done(function(e){"1"==e.success?n&&n(e):i&&i(e)})},s.registerMail=function(n,i){t.ajax({url:e.regUrl.replace("{type}","Email"),type:u?"GET":"POST",dataType:u?"jsonp":"json"}).done(function(e){"1"==e.success?n&&n(e):i&&i(e)})}}var o=n.lazyLoadScript("//res.udb.duowan.com/lgn/js/oauth/udbsdk/pcweb/udb.sdk.pcweb.embed.min.js?_=2333");a.loadAssets=o,e.TT_YYUDB=a}(window,jQuery,function(){var e={},t=e.once=function(e){var t,n;return function(){return n||(n=!0,t=e.apply(this,arguments)),t}},n=e.lazyPromise=function(e){var n=t(function(){var t=new $.Deferred;return e(function(){t.resolveWith(this,arguments)}),function(e){return t.done(e).promise()}});return function(e){return n()(e)}},i=e.getScript=function(e,t){function n(){o.onload=o.onreadystatechange=null,o=null,"function"==typeof t&&t()}var i=document,a=i.head||i.getElementsByTagName("head")[0]||i.documentElement,o=i.createElement("script");"onload"in o?o.onload=n:o.onreadystatechange=function(){/loaded|complete/.test(o.readyState)&&n()},o.charset="utf-8",o.type="text/javascript",o.async=!0,o.src=e,a.appendChild(o)};return e.lazyLoadScript=function(e){return n(function(t){i(e,t)})},e}(),TT.Event),window.TT_YYLOGIN=function(udb){var html=function(obj){var __p="";with(Array.prototype.join,obj||{})__p+='<div class="huya-login-box" id="J_huyaLoginBox">\r\n    <div class="login-box">\r\n        <div class="login">\r\n            <div class="login-main">\r\n                <div class="login-hd">\r\n                    <a class="tab-btn">\u767b\u5f55</a>\r\n                    <a class="tab-btn">\u6ce8\u518c</a>\r\n                    <i class="line J_line"></i>\r\n                </div>\r\n                <div class="login-bd">\r\n                    <div class="login-content">\r\n                        <div class="tab-unit">\r\n                            <div id="login-tab">\r\n                                <h2 class="login-title">\u5e10\u53f7\u767b\u5f55</h2>\r\n                                <div class="login-view" id="J_loginView"></div>\r\n                            </div>\r\n                        </div>\r\n                        <div class="tab-unit">\r\n                            <div class="register-tab">               \r\n                                <iframe frameborder="0" scrolling="no" allowtransparency="true" height="370"></iframe>\r\n                                <!-- <div><a class="reg-by-mail" href="#">\u4f7f\u7528\u90ae\u7bb1\u6ce8\u518c&gt;</a></div> -->\r\n                            </div>\r\n                            <div class="register-tab">\r\n                                <iframe frameborder="0" scrolling="no" allowtransparency="true" height="370"></iframe>\r\n                                <div><a class="reg-by-phone" href="#">\u4f7f\u7528\u624b\u673a\u6ce8\u518c&gt;</a></div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <i class="login-loading J_loading"></i>\r\n                </div>\r\n            </div>\r\n            <div class="login-sidebar">\r\n                <h2 class="title">\u5408\u4f5c\u8d26\u53f7\u767b\u5f55</h2>\r\n                <div class="other-login">\r\n                    <a class="login-btn login-btn-wechat clickstat" eid="click/nav/weixinlogin" eid_desc="\u70b9\u51fb/\u5bfc\u822a/\u5fae\u4fe1\u8d26\u53f7\u767b\u5f55"><i class="icon"></i>\u5fae\u4fe1\u5e10\u53f7\u767b\u5f55</a>\r\n                    <a class="login-btn login-btn-qq clickstat" eid="click/nav/qqlogin" eid_desc="\u70b9\u51fb/\u5bfc\u822a/QQ\u8d26\u53f7\u767b\u5f55" login-type="qq"><i class="icon"></i>QQ\u5e10\u53f7\u767b\u5f55</a>\r\n                    <a class="login-btn login-btn-weibo clickstat" eid="click/nav/weibologin" eid_desc="\u70b9\u51fb/\u5bfc\u822a/\u65b0\u6d6a\u5fae\u535a\u767b\u5f55" login-type="weibo"><i class="icon"></i>\u5fae\u535a\u5e10\u53f7\u767b\u5f55</a>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <a class="login-close" id="js-login-close" title="\u5173\u95ed"></a>\r\n        <p class="login-wran-tip">\u4f7f\u7528\u5373\u4e3a\u540c\u610f\u300a<a class="warn-link" href="http://blog.huya.com/product/90" target="_blank" title="\u864e\u7259\u8f6f\u4ef6\u7528\u6237\u534f\u8bae">\u864e\u7259\u8f6f\u4ef6\u7528\u6237\u534f\u8bae</a>\u300b</p>\r\n    </div>\r\n    <div class="account-login-mask"></div>\r\n</div>\r\n';return __p}(),box={init:function(){$("body").append(html),udb.ready(function(){$("#J_loginView").append(udb.loginView)}),this.view=$("#J_huyaLoginBox"),this.bind()},bind:function(){var e=this;this.view.on("click",".login-btn-qq",function(e){e.preventDefault(),udb.loginByQQ()}).on("click",".login-btn-weibo",function(e){e.preventDefault(),udb.loginByWB()}).on("click",".login-btn-wechat",function(e){e.preventDefault(),udb.loginByWX()}),this.view.on("click","#js-login-close",function(t){t.preventDefault(),e.close()})},open:function(){this.view.show()},close:function(){this.view.hide()}},tab={init:function(){var e=this,t=$("#J_huyaLoginBox");this.index=-1,this.navItem=t.find(".tab-btn"),this.unit=t.find(".tab-unit"),this.line=t.find(".J_line"),this.navItem.on("click",function(t){t.preventDefault(),e.go($(this).index())})},changeCallbacks:[],go:function(e){if(this.index!==e){this.index=e,this.navItem.removeClass("active").eq(e).addClass("active"),this.unit.hide().eq(e).show(),this.line.css("left",80*e);for(var t=0,n=this.changeCallbacks.length;n>t;t++)this.changeCallbacks[t](e)}},change:function(e){"function"==typeof e&&this.changeCallbacks.push(e)}},regTab={init:function(){var e=this;this.index=-1,this.unit=$(".register-tab"),$(".reg-by-phone").on("click",function(t){t.preventDefault(),e.go(0)}),$(".reg-by-mail").on("click",function(t){t.preventDefault(),e.go(1)})},go:function(e){if(this.index!==e){this.index=e,this.unit.hide().eq(e).show();var t=$("#J_huyaLoginBox").find(".J_loading");this.unit.find("iframe").each(function(n){var i=this;n===e?(t.show(),0===e?udb.registerPhone(function(e){i.src=e.url,t.hide()}):udb.registerMail(function(e){i.src=e.url,t.hide()})):i.src="about:blank"})}}};tab.change(function(e){var t=$("#J_huyaLoginBox").find(".J_loading");0===e?(t.show(),udb.on("loginOpen",function(){t.hide()}),udb.on("verifySuccess",function(){box.close()}),udb.login()):$("#udbsdk_frm_normal").attr("src","about:blank")}),tab.change(function(e){1===e&&-1===regTab.index&&regTab.go(0)});var ready=function(){function e(){n||(n=!0,$(function(){for(box.init(),tab.init(),regTab.init(),t=!0;i.length;)i.shift()()}))}var t,n,i=[];return function(n){"function"==typeof n&&(e(),t?n():i.push(n))}}();return{login:function(){ready(function(){box.open(),tab.go(0)})},register:function(e){ready(function(){switch(box.open(),tab.go(1),e){case"EMAIL":regTab.go(1);break;default:regTab.go(0)}})},close:function(){ready(function(){box.close()})}}},window.TT_YY_SDK=function(e){var t=new TT_YYUDB(e),n=new TT_YYLOGIN(t);return $.extend({},t,n)},function(){function e(e){var a,o=this,r=function(){var t=$.Deferred();if(e.switchState){var n=HUYA_UTIL.getCookieVal("udb_passdata");n?t.resolve(1==n?"YY":"TT"):($.ajax({type:"get",url:(TT.isProd?"https://udbapi":"//udbapi-test")+'.huya.com/web/hy/bypass/getBypass?request={"uri":"50001","version":"1.3","context":"WB---","appId":"5002","lcid":"2052","byPass":"1","requestId":"41290051","data":{}}',dataType:"JSONP"}).done(function(e){e&&e.data&&"bypass"in e.data?(HUYA_UTIL.writeCookie("udb_passdata",e.data.bypass,TT.domainForWriteCookie,"/"),t.resolve(1==e.data.bypass?"YY":"TT")):t.resolve("YY")}).fail(function(){t.resolve("YY")}),setTimeout(function(){t.resolve("YY")},3500))}else t.resolve("YY");return function(e){t.done(e)}}(),s={TT:t(n),YY:t(i)},c=function(t){a=s[t](e[t])};r(function(e){c(e)}),o.use=c,$.each(["login","logout","register"],function(e,t){o[t]=function(){var e=arguments;r(function(){"function"==typeof a[t]&&a[t].apply(a,e)})}})}var t=function(e){var t,n;return function(){return n||(n=!0,t=e.apply(this,arguments)),t}},n=function(e){var t=new TT_HUYA_SDK(e);return t.on("loginSuccess",function(){window.location.reload()}),t.on("loginFail",function(){window.location.reload()}),t.on("loginAuthSuccess",function(){window.location.reload()}),t.on("loginAuthFail",function(){window.location.reload()}),t.on("logoutSuccess",function(){window.location.reload()}),t.on("logoutFail",function(){window.location.reload()}),{login:function(){t.login()},logout:function(e){t.logout(e)},register:function(){t.register()}}},i=function(e){var t=new TT_YY_SDK(e);return t.on("loginOAuthCallback",function(){window.location.reload()}),t.on("loginOAuthFail",function(e){if(e&&"MUTE"===e.code){var t=$("body"),n='<div id="login-closure"><div class="login-closure-tit">'+e.data.title+'<span id="login-closure-close"></span></div><div class="login-closure-cnt">'+e.data.msg+'</div><span id="login-closure-sure">\u786e\u5b9a</span></div>';t.append(n),t.append('<div id="login-closure-mask"></div>'),$("#login-closure-sure,#login-closure-close").one("click",function(){$("#login-closure-mask").remove(),$("#login-closure").remove()})}}),t.on("logoutSuccess",function(){-1!=TT.app.i.indexOf(location.hostname)?location.href=TT.app.main:window.location.reload()}),{login:function(){t.login()},logout:function(e){t.logout(e)},register:function(){t.register()}}};TT.login=new e(TT_CFG.login),TT.login.check=function(){var e=t(function(){var e=new $.Deferred;return TT_CFG.req.userInfo().done(function(t){e.resolve(t.isLogined,t)}),e.promise()});return function(t){var n=e();return n.done(t),n}}()}(),!function(e){e.webpReg=/\/yysnapshot\//,e.webpSuffix="/format/webp",e.isSupportWebp=function(){var e=document.createElement("canvas");return e.getContext&&e.getContext("2d")?0===e.toDataURL("image/webp").indexOf("data:image/webp"):!1}()}(window),!function(e,t){e.huya_crossStorage=TT.store=t()}(this,function(){function e(e,t,n){var i={sign:l,type:e,data:t};"get"===e&&(i.token="f_"+(new Date).getTime()+Math.floor(1e9*Math.random()),u[i.token]=n);var a="";try{a=JSON.stringify(i)}catch(o){}a&&d(function(e){e.postMessage(a,"*")})}function t(e){if(/\.huya\.com$/.test(e.origin)){var t=null;try{t=JSON.parse(e.data)}catch(n){}if(t&&t.sign===l&&t.token)if("STORE_CHANGE"===t.token)for(var i=0,a=c.length;a>i;i++)c[i](t.data);else u[t.token](t.data),u[t.token]=null}}var n={setItem:function(){},getItem:function(){},removeItem:function(){},clear:function(){},change:function(){}},i=function(e){return"function"==typeof e},a=function(e){return"string"==typeof e},o=function(e){return"undefined"==typeof e},r="postMessage"in window,s="localStorage"in window;if(!r)return s&&(n=localStorage,n.change=function(e){i(e)&&window.addEventListener&&window.addEventListener("storage",e)}),n;n.setItem=function(t,n){if(t&&a(t)&&!o(n)){var i={};i[t]=n,e("set",i)}},n.getItem=function(t,n){t&&a(t)&&i(n)&&e("get",t,n)},n.removeItem=function(t){t&&a(t)&&e("del",t)},n.clear=function(){e("del")};var c=[];n.change=function(e){i(e)&&(c.push(e),d())};var l="CROSS_STORAGE",u={};"addEventListener"in document?window.addEventListener("message",t,!1):"attachEvent"in document&&window.attachEvent("onmessage",t);var d=function(){var e=null,t=null,n=!1,a=[],o=function(){n=!0,t=e.contentWindow;for(var i=0,o=a.length;o>i;i++)a[i](t)};return function(r){e||(e=document.createElement("iframe"),e.style.display="none",document.body.insertBefore(e,document.body.firstChild),e.attachEvent?e.attachEvent("onload",o):e.onload=o,e.src="//www.huya.com/act/proxy/storage.html"),i(r)&&(n?r(t):a.push(r))}}();return n}),function(){function e(e){var t,n;return function(){return n||(n=!0,t=e.apply(this,arguments)),t}}TT.getUserInfo=function(){var t=e(function(){var e=new $.Deferred;return TT.login.check(function(t,n){if(t){var i={},a={},o=n.userNick?(new $.Deferred).resolve([{}]):TT_CFG.req.userNick();$.when(TT_CFG.req.userAvatar(n.uid),o).done(function(e,t){i=e[0]&&200==e[0].code&&e[0].data?e[0].data:{},a=t[0]||{}}).fail(function(){try{console.log("\u516c\u5171\u5934\uff1a\u83b7\u53d6\u7528\u6237\u4fe1\u606f\u5931\u8d25\uff01")}catch(e){}}).always(function(){var t=$.extend(!0,{},n);t.userNick=a.userNick||n.userNick||n.userName,t.userLogo=i.avatar||a.userLogo||n.userLogo||"//a.msstatic.com/huya/main/img/10001.jpg",e.resolve(t)})}else e.resolve(n)}),e.done(function(e){window.a_userIsLogin=e.isLogined,window.a_userName=e.userName}),e.promise()});return function(e){var n=t();return n.done(e),n}}(),TT.sudo=function(e,t){TT.login.check(function(n){n?TT.getUserInfo(e):t!==!1&&TT.login.login()})}}(),!function(){var e=window.HUYA_UTIL;window.NAV_UTIL=window.NAV_UTIL?window.NAV_UTIL:window.NAV_UTIL={},NAV_UTIL.login=function(){TT.login.login()},NAV_UTIL.logout=function(){TT.login.logout()},NAV_UTIL.getStatus=function(e){TT.getUserInfo(function(){"function"==typeof e&&e()})},NAV_UTIL.isLogin=function(){return e.hasCookie("username")},NAV_UTIL.getUserInfo=function(){return NAV_UTIL.isLogin()?{uName:e.getCookieVal("username"),yyID:e.getCookieVal("yyuid")}:null},NAV_UTIL.checkLogin=function(e){TT.sudo(function(t){"function"==typeof e&&e(t.uid,t.userName)})},NAV_UTIL.check=TT.getUserInfo}(),!function(){var e=function(){var e=$.Deferred(),t=0,n=function(){++t>=2&&e.resolve()},i=!1,a=setTimeout(function(){i=!0,n()},3500);return $(window).on("load",function(){i||(clearTimeout(a),n())}),TT.on("reportReady",function(){n()},!0),function(t){e.done(t)}}(),t=function(t){var n=[];$.each(t,function(e,t){if(t){var i="pos="+t.pos+",resid="+(t.rsc||0)+(t.ren?",uid="+t.ren:"");n.push("{"+i+"}")}}),e(function(){try{ya.reportProductEvent({eid:"pageview/position",extra_ext:"["+n.join(",")+"]"})}catch(e){}})},n=function(){var e=[],n=null;return function(i){i&&(clearTimeout(n),e.push(i),e.length>=10?(t(e),e=[]):n=setTimeout(function(){t(e),e=[]},2e3))}}();e(function(){$(".J_g_resource").each(function(){n($(this).data())}),$("body").on("click",".J_g_resource",function(){var e=$(this).data();if(e)try{ya.reportProductEvent({eid:"click/position",position:e.pos,resourceid:e.rsc,ayyuid:e.ren})}catch(t){}})}),window.TT_RSC_EXPS=n}(),$(function(){DUYA_SUB.publish("huyaHeaderDomReady")}),$(function(){function showDialog(e){function t(e){huya_crossStorage.getItem(e,function(t){t||huya_crossStorage.setItem(e,1)})}function n(){setTimeout(function(){l.remove()}),a&&clearInterval(a),huya_crossStorage.removeItem(key+c)}var i=60,a=null,o=e.data,r=e.afterRender||$.noop,s="object"==typeof o?o:$.parseJSON(o),c=s.eventId,l=$(liveNoticeTmpl({data:s}));l.appendTo("body").animate({bottom:5}).on("click",".notice-close,.notice-btn",function(){n()}),r(l),a=setInterval(function(){if(i--,i>=1){var e=" "+i;l.find(".js-notice-time").text(e)}else n()},1e3),t(key+c)}var liveNoticeTmpl=function(obj){var __t,__p="";with(Array.prototype.join,obj||{})__p+='<div class="huya-head-notice">\r\n    <div class="notice-hd">\r\n        <i class="notice-icon"></i>\r\n        <span class="notice-title">\u76f4\u64ad\u901a\u77e5</span>\r\n        <span class="notice-tip"><span class="js-notice-time">10</span>s\u540e\u81ea\u52a8\u5173\u95ed</span>\r\n        <a class="notice-close" title="\u5173\u95ed\u5f39\u7a97"></a>\r\n    </div>\r\n    <div class="notice-bd">\r\n        ',data.image&&(__p+='\r\n            <a class="notice-pic" href="'+(null==(__t=data.action)?"":__t)+'" target="_blank">\r\n                ',data.gameFullName&&(__p+='<div class="notice-gameFullName">'+(null==(__t=data.gameFullName)?"":__t)+"</div>"),__p+='\r\n                <img src="'+(null==(__t=TT.trimUrl(data.image))?"":__t)+'"> \r\n            </a>\r\n        '),__p+='\r\n        <div class="notice-text">\r\n            <h2 class="anchor-name">'+(null==(__t=data.title)?"":__t)+"</h2>\r\n            ",data.nick&&(__p+='<h3 class="anchor-nick" title="'+(null==(__t=data.nick)?"":__t)+'">'+(null==(__t=data.nick)?"":__t)+"</h3>"),__p+='\r\n            <p class="notice-content" title="'+(null==(__t=data.content)?"":__t)+'">\r\n                '+(null==(__t=data.content)?"":__t)+'\r\n            </p>\r\n        </div>\r\n    </div>\r\n    <a class="notice-btn" href="'+(null==(__t=data.action)?"":__t)+'" target="_blank">\u9a6c\u4e0a\u89c2\u770b</a>\r\n</div>';return __p},key="huya_liveNotice";huya_crossStorage.change(function(e){new RegExp(key).test(e.key)&&null==e.newValue&&$("#"+e.key).remove()}),window.HUYA_HEAD_liveNotice=function(e){showDialog({data:e,afterRender:function(){DUYA_SUB.publish("INDEX_LIVE_NOTICE",e.eventId)}})},window.HUYA_SUBSCRIBE_PUSH=function(e){if(!$.isEmptyObject(e))for(var t in e){var n=e[t],i={title:"\u4f60\u8ba2\u9605\u7684\u4e3b\u64ad: ",content:(n.introduction?'\u5728\u64ad"'+n.introduction+'"':"\u6b63\u5728\u5f00\u64ad\u5566,")+"\u5feb\u62a2\u4e2a\u677f\u51f3\u5750\u597d",image:n.avatar180,action:TT.app.main+n.privateHost,eventId:n.aid,nick:n.nick,gameFullName:n.gameFullName};showDialog({data:i,afterRender:function(e){e.addClass("subscribe-notice"),e.find(".notice-close").addClass("clickstat").attr({eid:"click/dytc/close",eid_desc:"\u70b9\u51fb/\u8ba2\u9605\u5f39\u7a97/\u5173\u95ed"}),e.find(".notice-btn").addClass("clickstat").attr({eid:"click/dytc/in",eid_desc:"\u70b9\u51fb/\u8ba2\u9605\u5f39\u7a97/\u8fdb\u5165\u76f4\u64ad\u95f4"})}})}},window.HUYA_NOTICE_PUSH=function(e){showDialog({data:e,afterRender:function(e){e.addClass("normal-notice")}})}}),$(function(){var e=window.HUYA_UTIL,t=TT.isProd?"//fw.huya.com/":"//test.fw.huya.com/",n={isHuyaLiveRoom:/^\/([A-Za-z0-9]{2,})(|\/)$/.test(location.pathname),isHuyaIndex:location.href==TT.app.main},i={userSubscribeList:[],cacheObj:{},isShowRefreshTips:!1,getSubSt:null,getAllLiveSt:null,tips_left:0,refreshPush:function(e){window.HUYA_SUBSCRIBE_PUSH&&window.HUYA_SUBSCRIBE_PUSH(e)},getUserSubscribe:function(){var e=this;$.ajax({url:t+"dispatch?do=userSubscribeAid&uid="+DUYA_INS.userId,type:"GET",dataType:"jsonp",success:function(t){if(1e3==t.status&&(e.userSubscribeList=t.result.list||[],window.localStorage)){var n=JSON.stringify(e.userSubscribeList);localStorage.setItem("huya_header_subscribe",n)}}})},getNewestLive:function(){var e=this;$.ajax({url:t+"dispatch?do=newestLive&time=120",type:"GET",dataType:"jsonp",success:function(t){if(1e3==t.status){var n=e.mapSubscribeList(t.result,e.userSubscribeList);e.refreshPush(n)}}})},mapSubscribeList:function(e,t){var n=this,i={};for(var a in e)for(var o=0,r=t.length;r>o;o++)a.toString()==t[o].toString()&&(i[a]=e[a]);if(!$.isEmptyObject(n.cacheObj))for(var s in i)"undefined"!=typeof n.cacheObj[s]&&delete i[s];return n.cacheObj=i,i},init:function(t){var n=this,i=$(".duya-header-tips");if(i.on("click",".refresh-current",function(){$(this).parent("p").remove(),0==$(".refresh-tips p").length&&i.removeClass("appear-tips")}).on("change","#checkTips",function(){if($(this).attr("checked")){var t=new Date;t.setTime(t.getTime()+864e5),e.writeCookie("stopPushSub","1",TT.domainForWriteCookie,"/",t),$("#refresh-wrap").remove(),n.isShowRefreshTips||(i.removeClass("appear-tips"),n.isShowRefreshTips=!0)}}).on("click",".close-tips",function(){i.removeClass("appear-tips")}),"1"==e.hasCookie("stopPushSub")&&i.find("#refresh-wrap").remove(),"1"!=e.hasCookie("stopPushSub")&&DUYA_INS.islogin&&!location.host.match("admin.huya.com")&&(n.getSubSt=setTimeout(function(){n.getUserSubscribe(),clearTimeout(n.getSubSt),n.getSubSt=setInterval(function(){n.getUserSubscribe()},6e5)},59e3),t||(n.getAllLiveSt=setInterval(function(){n.getNewestLive()},61e3))),$(window).on("scroll",function(){$(".duya-header-tips").length>0&&$(".duya-header-tips").hasClass("appear-tips")&&($(window).scrollTop()>$("#duya-header").height()?i.css({position:"fixed",top:"45px",left:n.tips_left}):i.attr("style",""))}),window.localStorage){var a=localStorage.getItem("huya_header_subscribe");this.userSubscribeList=JSON.parse(a)||[]}this.initRefreshTips()},initRefreshTips:function(){var e=this,t=$(".duya-header-tips");t.on("click",".tips-top .refresh-current",function(){location.reload()}).on("click",".close-tips",function(){t.removeClass("appear-tips")}),n.isHuyaLiveRoom||n.isHuyaIndex||setTimeout(function(){t.addClass("appear-tips").find(".tips-top").show(),e.tips_left=t.offset().left,e.isShowRefreshTips=!0},18e5)}};window.DUYA_PUSH=i}),function(){function e(){var e=this;TT.on("huyaHeaderDomReady",function(){e.init()})}e.prototype.init=function(){var t=this;TT.getUserInfo(function(t){function n(){TT.login.logout(!0);var e=$("body"),t='<div id="offline-notice"><div class="login-closure-tit">\u6e29\u99a8\u63d0\u793a<span id="offline-notice-close"></span></div><div class="login-closure-cnt"><h2 style="text-align: center;font-size: 18px;font-weight: 800;margin-bottom: 5px;">\u4e0b\u7ebf\u901a\u77e5</h2><p style="text-align: center;">\u60a8\u7684\u8d26\u53f7'+HUYA_UTIL.getCookieVal("username")+'\uff0c\u4fee\u6539\u4e86\u767b\u5f55\u5bc6\u7801\uff0c\u8bf7\u91cd\u65b0\u767b\u5f55</p></div><span id="offline-notice-sure">\u91cd\u65b0\u767b\u5f55</span></div><div id="offline-notice-mask"></div>';e.append(t),$("#offline-notice-sure,#offline-notice-close").one("click",function(){$("#offline-notice-mask").remove(),$("#offline-notice").remove()}),$("#offline-notice-sure").one("click",function(){TT.login.login()})}var i=e.prototype;if(1==t.isChanged&&n(),i.islogin=t.isLogined,i.userName=t.userName,i.userNick=t.userNick,i.userLogo=t.userLogo,i.userId=t.uid,t.isLogined){$("#duya-header .success-login").show(),$("#login-username").attr("title",i.userNick).text(i.userNick),$("#login-userAvatar").attr("src",TT.trimUrl(i.userLogo)),DUYA_SUB.publish("getUserInfoComplete",{name:i.userName,nick:i.userNick,avatar:i.userLogo});
var a=-1!=location.host.indexOf(TT.domain.main)||-1!=location.host.indexOf(TT.domain.i);DUYA_PUSH.init(a)}else $("#duya-header .un-login").show();"function"==typeof window.checkLoginCallback&&window.checkLoginCallback()}),t.headEven()},e.prototype.headEven=function(){var e=$("#duya-header");$(".J_gNavLogin").on("click",function(e){HUYA_UTIL.getCookieVal("yyuid")||(e.preventDefault(),TT.login.login())}),e.find("#nav-login").click(function(e){e.preventDefault(),TT.login.login()}),e.find("#nav-regiest").click(function(e){e.preventDefault(),TT.login.register()}),e.find("#nav-loggout").click(function(e){e.preventDefault(),TT.login.logout()})},e.prototype.myMessageShow=function(){var e=$("#J_huyaNavUserMsgDot");e.show(),$("#J_huyaNavUserMsg").off("click").on("click",function(){e.hide()})},e.prototype.myMessageHide=function(){$("#J_huyaNavUserMsgDot").hide()},window.DUYA_INS=new e}(),$(function(){function e(e){var n=document.body.className.replace(/(^[\s\t\xa0\u3000]+|[\s\t\xa0\u3000]+$)/g,""),i=n?document.body.className.split(/\s+/):[],a=t(i,"w-1000");1===e?-1!=a&&(i.splice(a,1),document.body.className=i.join(" ")):-1==a&&(i.push("w-1000"),document.body.className=i.join(" "))}var t=function(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},n=document.documentElement?document.documentElement:document.body,i=function(){var e=n.clientWidth;return e>=1480?1:0},a=i();e(a);var o=null,r=function(){clearTimeout(o),o=setTimeout(function(){var t=i();t!==a&&e(a=t)},60)};$(window).on("resize",function(){r(),DUYA_SUB.publish("resizeWide",n.clientWidth)})}),$(function(){function e(){this.initialize.apply(this,arguments)}e.prototype={initialize:function(){var e=null,t=this;if(t.input=$("#searchForm_id input"),e=window.localStorage.getItem("header/placeholder"))try{t.setVal(e)}catch(n){}$(window).on("load",function(){setTimeout(function(){t.ajaxGetPlaceholder()},500)})},setVal:function(e){this.val=e,this.input.val(this.val),this.bind()},ajaxGetPlaceholder:function(){var e=TT.app.main+"/cache10min.php?m=Search&do=getHotword&v=2";HUYA_UTIL.isMobile&&(e=TT.app.main+"/cacheapp.php?m=Search&do=getHotword&v=2"),$.ajax({type:"get",url:e,dataType:"jsonp",jsonpCallback:"huyaNavPlaceholder",cache:!0}).done(function(e){e&&e[0]?window.localStorage.setItem("header/placeholder",e[0]):window.localStorage.removeItem("header/placeholder")})},bind:function(){var e=this;e.input.on("focus",function(){e.input.val()===e.val&&e.input.val("")}).on("blur",function(){""===e.input.val()&&e.input.val(e.val)})}},DUYA_SUB.subscribe("huyaHeaderDomReady",function(){new e},!0)}),$(function(){var e={init:function(){var e=this,t=TT.app.main+"/cache10min.php?m=Game&do=ajaxNavGame";HUYA_UTIL.isMobile&&(t=TT.app.main+"/cacheapp.php?m=Game&do=ajaxNavGame"),$.ajax({type:"get",url:t,dataType:"jsonp",jsonpCallback:"huyaNavCategory",cache:!0}).done(function(t){var n="";n=t&&1e3==t.status&&t.result?e.tpl(t.result):'<a href="'+TT.app.main+'g" class="nav-expand-game-more" target="_blank">\u66f4\u591a <span>&gt;</span></a>',$(".nav-expand-game").append(n),t&&t.result&&t.result.ad&&window.TT_RSC_EXPS&&TT_RSC_EXPS({pos:"nav/category/ad",rsc:t.result.ad.id})})},tpl:function(e){var t="",n=e.hot,i=e.user,a=e.ad,o=0;if(n&&n.length>0){t+='<dl class="clearfix"><dt>\u70ed\u95e8\u5206\u7c7b</dt>';for(var r=0,s=n.length;s>r;r++)o++,t+='<dd><a class="clickstat" eid="click/navi/game/game'+o+'" eid_desc="\u70b9\u51fb/\u5bfc\u822a/\u6e38\u620f/\u6e38\u620f'+o+'" title="'+n[r].name+'" href="'+TT.app.main+"g/"+n[r].host+'" target="_blank">'+n[r].name+"</a></dd>";t+="</dl>"}if(i&&i.length>0){t+='<dl class="clearfix"><dt>\u73a9\u5bb6\u63a8\u8350</dt>';for(var r=0,s=i.length;s>r;r++)o++,t+='<dd><a class="clickstat" eid="click/navi/game/game'+o+'" eid_desc="\u70b9\u51fb/\u5bfc\u822a/\u6e38\u620f/\u6e38\u620f'+o+'" title="'+i[r].name+'" href="'+TT.app.main+"g/"+i[r].host+'" target="_blank">'+i[r].name+"</a></dd>";t+="</dl>"}return t+='<a href="'+TT.app.main+'g" class="nav-expand-game-more" target="_blank">\u66f4\u591a <span>&gt;</span></a>',a&&(t+='<a href="'+a.link+'" id="J_adCategory" class="clickstat third-clickstat" data-thirdstat="'+a.clickCheckCode+'" data-thirdview="'+a.viewCheckCode+'" eid="click/push/navigame" eid_desc="\u70b9\u51fb/\u63a8\u8350/\u5bfc\u822a\u6e38\u620f\u4e0b\u62c9\u56fe" target="_blank"><img src="'+TT.trimUrl(a.picUrl)+'" width="250" height="60" alt="'+a.title+'"/></a>'),t}};DUYA_SUB.subscribe("huyaHeaderDomReady",function(){function t(e){!function(){var t=$(e).data("thirdview");if(t){var n=n||new Image;n.src=t}}(),function(){function e(){return"undefined"==typeof ya?void(t=setTimeout(function(){e()},1e3)):(clearTimeout(t),void ya.reportProductEvent({eid:"pageview/push/navigame",eid_desc:"\u66dd\u5149/\u63a8\u8350/\u5bfc\u822a\u680f\u4e0b\u62c9\u5e7f\u544a\u4f4d",ref:YA.cookie.get("ya_eid")}))}var t;e()}()}var n=!1,i=null;$(window).on("load",function(){n||(i=setTimeout(function(){e.init(),n=!0},500))}),$("#nav-main").one("mouseover",function(){var a=document.getElementById("J_adCategory");a&&t(a),n||(i&&clearTimeout(i),e.init(),n=!0)})},!0)}),$(function(){var e=HUYA_UTIL.getCookieVal,t=!!e("yyuid"),n={init:function(){var n=this,i=$(".load-history");if(t)$.ajax({type:"get",url:"//fw.huya.com/dispatch",data:{"do":"userHistory",uid:e("yyuid"),guid:e("guid"),token:e("udb_n"),page:1,pageSize:5},dataType:"jsonp",cache:!0}).done(function(e){var t=n.tpl(e&&1e3==e.status?e.result:null);i.html(t)});else{var a="huya_watchHistory";huya_crossStorage.getItem(a,function(e){e&&(e.nowTime=Math.floor(new Date/1e3)),i.html(n.tpl(e))}),huya_crossStorage.change(function(e){(e.key===a||null===e.key)&&huya_crossStorage.getItem(a,function(e){e&&(e.nowTime=Math.floor(new Date/1e3)),i.html(n.tpl(e))})})}},tpl:function(e){var t="";if(e&&e.historyList.length>0){for(var n=e.historyList,i=new Date(1e3*+e.nowTime),a=i.setHours(0,0,0,0),o={today:[],yesterday:[],earlier:[]},r=0;r<n.length;r++)n[r].historyTime=1e3*n[r].historyTime,n[r].historyTime>a?o.today.push(n[r]):a-n[r].historyTime<864e5?o.yesterday.push(n[r]):o.earlier.push(n[r]);var s={today:"\u4eca\u5929",yesterday:"\u6628\u5929",earlier:"\u66f4\u65e9"};for(var c in o){var l=o[c];if(l.length>0){t+='<div class="history-hd"><em></em>'+s[c]+"</div>",t+='<ul class="history-bd">';for(var r=0;r<l.length;r++)t+="<li>",t+=1==l[r].isLive?'<a href="'+TT.app.main+l[r].privateHost+'" title="'+l[r].nick+'" class="new-clickstat" report=\'{"eid":"click/position","position":"click/navi/ls/kb"}\'><em class="live"></em><span class="history-nick">'+l[r].nick+'</span><span class="history-type" title="'+l[r].gameName+'">'+l[r].gameName+"</span></a>":'<a href="'+TT.app.main+l[r].privateHost+'" title="'+l[r].nick+'" class="new-clickstat" report=\'{"eid":"click/position","position":"click/navi/lishi"}\'><em class="notlive"></em><span class="history-nick">'+l[r].nick+'</span><span class="history-type" title="'+l[r].gameName+'">'+l[r].gameName+"</span></a>",t+="</li>";t+="</ul>"}}n.length>=5&&$(".nav-expand-history-more").css("display","block")}else t='<p class="nav-expand-history-null"><i></i><span>\u6700\u8fd1\u60a8\u6ca1\u6709\u89c2\u770b\u8bb0\u5f55</span></p>';return t}};DUYA_SUB.subscribe("huyaHeaderDomReady",function(){$("#nav-history").one("mouseover",function(){n.init()}).on("click",function(e){t||e.preventDefault()})},!0)}),$(function(){var host=TT.app.main,subscribeURL=TT.isProd?"//fw.huya.com/":"//test.fw.huya.com:18081/",follow={init:function(){var e=this,t=HUYA_UTIL.getCookieVal("yyuid");t&&$.ajax({url:subscribeURL+"dispatch?do=subscribeList&uid="+t+"&page=1&pageSize=7",type:"GET",dataType:"jsonp"}).done(function(t){1e3==t.status&&e.tpl(t.result&&t.result.list&&t.result.list.length?t.result.list:[])})},tpl:function(list1){for(var tpl=function(obj){function formatNumber(e){var t=Number(e);return t&&t>1e4&&(e=(t/1e4).toFixed(1)+"\u4e07"),e}var __t,__p="";with(Array.prototype.join,obj||{})__p+="",__p+='\r\n\r\n<li>\r\n\r\n	<a class="video-link new-clickstat" href="'+(null==(__t=link)?"":__t)+'" title="'+(null==(__t=nick)?"":__t)+'" report=\'{"eid":"click/position","position":"click/navi/dy/',__p+=1==isLive?"kb":"wkb",__p+='"}\'>\r\n        <span class="avatar"><img src="'+(null==(__t=TT.trimUrl(avatar180))?"":__t)+'" alt="'+(null==(__t=nick)?"":__t)+'" />',1==isLive&&(__p+="<span>\u5728\u64ad</span>"),__p+='</span>\r\n        <div class="info">\r\n            <p class="name">'+(null==(__t=nick)?"":__t)+'</p>\r\n            <div class="other">\r\n                ',1==isLive&&(__p+='<span class="count"><i></i>'+(null==(__t=formatNumber(totalCount))?"":__t)+"</span>"),__p+='\r\n                <span class="game">'+(null==(__t=gameName)?"":__t)+"</span>\r\n            </div>\r\n        </div>\r\n	</a>\r\n</li>\r\n\r\n";return __p},_tpl="",_navSubDom=$(".nav-subscribe"),_subCount=list1.length,maxLegth=6,onliveNum=0,list1=list1.slice(0,maxLegth),i=0;i<list1.length;i++)_tpl+=tpl({link:host+(list1[i].privateHost||list1[i].yyid),screenshot:list1[i].screenshot,avatar180:list1[i].avatar180,gameName:list1[i].gameName,nick:list1[i].nick,totalCount:list1[i].totalCount,isLive:list1[i].isLive}),1==list1[i].isLive&&onliveNum++;_subCount>0?(_navSubDom.find(".subscribe-hd").show(),_navSubDom.find(".subscribe-bd").show(),_navSubDom.find(".subscribe-list").append(_tpl),_navSubDom.find(".subscribe-key").text(onliveNum),_navSubDom.find(".mod-list-more").hide(),_subCount>maxLegth?_navSubDom.find(".subscribe-all").show():_navSubDom.find(".subscribe-all").hide()):(_navSubDom.find(".subscribe-bd").show(),_navSubDom.find(".more-loading").hide(),_navSubDom.find(".more-empty").show(),_navSubDom.find(".subscribe-all").hide())}};DUYA_SUB.subscribe("huyaHeaderDomReady",function(){$("#duya-header .nav-subscribe").one("mouseenter",function(){follow.init()})},!0)}),TT.on("huyaHeaderDomReady",function(){function signInfo(e){$("#J_huyaNavUserCardSign").html(""==e?'<a href="'+TT.app.i+'?m=UserInfo" target="_blank" class="edit_sign">\u70b9\u51fb\u7f16\u8f91\u4e2a\u6027\u7b7e\u540d</a>':'<span title="'+e+'">'+e+"</span>")}function nobleInfo(e){!e||2!=e.nobleStatus&&3!=e.nobleStatus||$("#J_huyaNavUserCardAvatar").append('<i class="noble-icon noble-level-'+e.nobleLevel+'""></i>')}function LvExper(e){function t(e){a.add(e)}function n(e){e="number"==typeof e?e:parseInt(e,10);var t=$.extend({},i);i.userExp+=e,i.userExp>=i.nextLevelExp&&(i.currLevelExp=i.nextLevelExp,i.nextLevelExp=i.next2LevelExp,i.userLevel+=1),i.levelProgress=(i.userExp-i.currLevelExp)/(i.nextLevelExp-i.currLevelExp)*100,a.fire($.extend({},i),t)}var i=$.extend({},e),a=$.Callbacks();for(var o in i)i.hasOwnProperty(o)&&"number"!=typeof i[o]&&$.isNumeric(i[o])&&(i[o]=parseInt(i[o],10));return{get:function(){return $.extend({},i)},change:t,add:n}}function lvInfo(e){function t(e){$("#J_huyaNavUserCardExpFrom").text("LV"+e.userLevel),$("#J_huyaNavUserCardExpTo").text("LV"+(parseInt(e.userLevel,10)+1)),$("#J_huyaNavUserCardExpBar").css("width",e.userExp/e.nextLevelExp*100+"%"),$(".J_huyaNavUserCardExpText").text(e.userExp+"/"+e.nextLevelExp);var t=$("#J_huyaNavUserCardNick");t.find(".level-icon").remove(),t.find(".gender").remove(),t.append('<i class="gender gender'+e.gender+'"></i>'),t.append('<i class="level-icon level-icon'+e.userLevel+'"></i>');var n=200==e.dailyIncExp?"\u4eca\u65e5\u5df2\u83b7\u5f97<em>200</em>\u70b9\u4e0a\u9650":"\u4eca\u65e5\u83b7\u5f97<em>"+e.dailyIncExp+"</em>\u70b9\u7ecf\u9a8c\u503c";$("#J_huyaNavUserCardBarInfo").html(n+"\uff0c\u5347\u7ea7\u8fd8\u9700<em>"+(e.nextLevelExp-e.userExp)+"</em>\u70b9")}t(e.get()),e.change(t)}function assets(e){function t(e){if(e=""+e,-1==e.indexOf("."))return e;var t=e.split(".");return t[0]+"."+t[1].charAt(0)}var n=parseInt(e[9],10)||0,i=parseInt(e[32],10)||0,a=parseInt(e[8],10)||0,o=function(e){return 1e4>e?e:1e8>e?t(e/1e4)+"\u4e07":t(e/1e8)+"\u4ebf"};$("#J_huyaNavUserCardAssetsGb").text(o(n)),$("#J_huyaNavUserCardAssetsTk").text(o(i)),$("#J_huyaNavUserCardAssetsSb").text(o(a))}function Task(e){var t=function(e,t){return $.ajax({url:TT.app.main+"member/task.php?m=User&do=doGetTaskPrize",data:{taskId:e},dataType:"jsonp"}).done(function(i){200==i.status&&i.data?i.data&&0==i.data.code?t(n(e)):alert({910:"\u4e0d\u53ef\u91cd\u590d\u9886\u53d6",913:"\u4efb\u52a1\u5df2\u4e0b\u7ebf",914:"\u4efb\u52a1\u672a\u5b8c\u6210"}[i.data.code]||"\u7cfb\u7edf\u7e41\u5fd9\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5\uff01("+i.data.code+")"):alert(i.msg)})},n=function(e){var t=a(e);return t&&(t.awardPrize=1,i.fire(t)),t},i=new $.Callbacks,a=function(t){var n=null;return $.each(e,function(e,i){return i.id==t?(n=i,!1):void 0}),n},o=function(){return e},r=function(){var t=[];return $.each(e,function(e,n){n.progress<n.targetLevel&&t.push(n)}),t},s=function(){var t=[];return $.each(e,function(e,n){n.progress>=n.targetLevel&&(n.awardPrize||t.push(n))}),t},c=function(){var t=[];return $.each(e,function(e,n){n.progress>=n.targetLevel&&n.awardPrize&&t.push(n)}),t};return{getPrize:t,award:n,find:a,tasksAll:o,tasksUnripe:r,tasksRipe:s,tasksFinished:c,onFinish:function(e){i.add(e)}}}function TaskNovice(tasks){var task=new Task(tasks),tpl=function(obj){var __t,__p="";with(Array.prototype.join,obj||{}){if(__p+='<div class="task-mod task-novice">\r\n    <div class="mod-hd">\r\n        <p class="mod-tit">\u65b0\u624b\u4efb\u52a1</p>\r\n    </div>\r\n    <div class="mod-bd">\r\n    ',tasks.length){__p+='\r\n        <ul class="tasks">\r\n        ';for(var i=0,l=tasks.length;l>i;i++){var task=tasks[i];__p+="\r\n            <li>\r\n                ",task.progress>=task.targetLevel&&0==task.awardPrize&&(__p+='\r\n                <i class="m-reddot"></i>\r\n                '),__p+='\r\n                <span class="task-icon" title="'+(null==(__t=task.desc)?"":__t)+'"><img src="'+(null==(__t=TT.trimUrl(task.icon))?"":__t)+'" alt="icon" /></span>\r\n                <p class="task-name" title="'+(null==(__t=task.desc)?"":__t)+'">'+(null==(__t=task.name)?"":__t)+"</p>\r\n                ",__p+=task.progress>=task.targetLevel?task.awardPrize?'\r\n                        <a class="task-btn done" href="#">\u5b8c\u6210</a>\r\n                    ':'\r\n                        <a class="task-btn get J_get" data-id="'+(null==(__t=task.id)?"":__t)+'" href="#">\u9886\u53d6</a>\r\n                    ':'\r\n                        <a class="task-btn ing" href="#">'+(null==(__t=task.progress)?"":__t)+"/"+(null==(__t=task.targetLevel)?"":__t)+"</a>\r\n                ",__p+="\r\n            </li>\r\n        "}__p+="\r\n        </ul>\r\n    "}else __p+="\r\n        <p>-- \u6682\u65e0\u4efb\u52a1 --</p>\r\n    ";__p+="\r\n    </div>\r\n</div>\r\n"}return __p};return task.view=$(tpl({tasks:tasks})),task.view.on("click",".J_get",function(){var e=$(this),t=e.data("id");t&&!e.hasClass("disable")&&(e.addClass("disable"),task.getPrize(t,function(t){e.removeClass("disable get J_get"),e.closest("li").find(".m-reddot").remove(),t.exper?(e.addClass("active").text("EXP+"+t.exper),setTimeout(function(){e.removeClass("active").addClass("done").text("\u5b8c\u6210")},1750)):e.addClass("done").text("\u5b8c\u6210")}).always(function(){e.removeClass("disable")}))}),task.onFinish(function(){task.tasksFinished().length>=task.tasksAll().length&&(task.view.find(".mod-bd").html('<div class="task-alldone"></div><div class="open-task-days">\u5f00\u542f\u6bcf\u65e5\u4efb\u52a1\uff0c\u52a0\u901f\u63d0\u5347\u7b49\u7ea7 &gt;</div>'),$(".open-task-days").one("click",function(){TT.emit("taskNoviceSwitchToDays")}))}),task}function TaskDays(tasks){var task=new Task(tasks),tpl=function(obj){var __t,__p="";with(Array.prototype.join,obj||{}){__p+="";var iconMap={189:"c",210:"m",211:"n",212:"o",213:"e",214:"f",215:"h",216:"i",217:"l",218:"j",219:"k",220:"g",221:"b",222:"d",223:"a"};if(__p+='\r\n<div class="task-mod task-days">\r\n    <div class="mod-hd">\r\n        <p class="mod-tit">\u6bcf\u65e5\u4efb\u52a1</p>\r\n        <a class="mod-more" target="_blank" href="'+(null==(__t=TT.app.i+"index.php?m=UserLevel")?"":__t)+'">\u66f4\u591a<i>&gt;</i></a>\r\n    </div>\r\n    <div class="mod-bd">\r\n    ',tasks.length){__p+='\r\n        <ul class="tasks">\r\n            ';for(var i=0,l=tasks.length;l>i;i++){var task=tasks[i];__p+='\r\n                <li>\r\n                    <i class="icon icon-'+(null==(__t=iconMap[task.id])?"":__t)+'"></i>\r\n                    ',task.progress>=task.targetLevel&&0==task.awardPrize&&(__p+='\r\n                    <i class="m-reddot"></i>\r\n                    '),__p+='\r\n                    <span class="tit">'+(null==(__t=task.desc)?"":__t)+'</span> \r\n                    <em class="exp-num">(+'+(null==(__t=task.exper)?"":__t)+'EXP)</em>\r\n                    <span class="status">\r\n                    ',task.progress>=task.targetLevel?(__p+="\r\n                        ",__p+=task.awardPrize?'\r\n                            <span class="status-done">\u5b8c\u6210</span>\r\n                        ':'\r\n                            <a class="status-get J_get" data-id="'+(null==(__t=task.id)?"":__t)+'" href="#">\u9886\u53d6</a>\r\n                        '):__p+='\r\n                            <span class="status-ing">'+(null==(__t=task.progress)?"":__t)+"/"+(null==(__t=task.targetLevel)?"":__t)+"</span>\r\n                    ",__p+="\r\n                    </span>\r\n                </li>\r\n            "}__p+="\r\n        </ul>\r\n    "}else __p+="\r\n        <p>-- \u6682\u65e0\u4efb\u52a1 --</p>\r\n    ";__p+="\r\n    </div>\r\n</div>\r\n"}return __p};return task.view=$(tpl({tasks:tasks})),task.view.on("click",".J_get",function(){var e=$(this),t=e.data("id");t&&!e.hasClass("disable")&&(e.addClass("disable"),task.getPrize(t,function(t){e.removeClass("disable J_get");var n=e.closest("li");n.find(".m-reddot").remove(),t.exper?(e.addClass("active").text("EXP+"+t.exper),setTimeout(function(){e.replaceWith('<span class="status-done">\u5b8c\u6210</span>'),setTimeout(function(){n.hide(500)},1e3)},1750)):(e.replaceWith('<span class="status-done">\u5b8c\u6210</span>'),setTimeout(function(){n.hide(500)},1e3))}).always(function(){e.removeClass("disable")}))}),task}function createTask(e){var t=null;switch(e[0].type){case 3:t=new TaskNovice(e);break;case 2:t=new TaskDays(e)}return t&&$("#J_huyaNavUserCardTask").empty().removeClass("loading").append(t.view),t}function UserCard(e){var t=new LvExper(e.level);lvInfo(t),nobleInfo(e.noble),signInfo(e.level.sign),assets(e.package);var n=createTask(e.tasks||[]);return n&&n.onFinish(function(e){e&&e.exper&&t.add(e.exper)}),{task:n}}function createUserCard(){var e=function(){var e=!1,t=null;return{get:function(){return e},set:function(){e=!0,clearTimeout(t),t=setTimeout(function(){e=!1},1e4)}}}(),t=!1;e.get()||t||(t=!0,$("#J_huyaNavUserCardTask").empty().addClass("loading"),getUserCardData(function(e){TT.emit("userCardCreate",new UserCard(e))}).always(function(){t=!1}))}function getUserCardData(e){return $.ajax({url:TT.app.main+"member/task.php?m=User&do=listTotal",dataType:"jsonp",jsonpCallback:"huyaNavUserCard",cache:!0}).done(function(t){200==t.status?t.data&&e(t.data):TT.log("\u83b7\u53d6\u7528\u6237\u5361\u7247\u6570\u636e\u5931\u8d25: "+t.msg)}).fail(function(e,t){TT.log("\u83b7\u53d6\u7528\u6237\u5361\u7247\u6570\u636e\u5931\u8d25: "+t)})}function getTaskReddotState(e){return $.ajax({url:TT.app.main+"member/task.php?m=User&do=getTaskReddot&uid="+HUYA_UTIL.getCookieVal("yyuid"),dataType:"jsonp",jsonpCallback:"getTaskReddot",cache:!0}).done(function(t){200==t.status&&t.data&&e(t.data.reddot.reddot)})}function once(e){var t,n;return function(){return n||(n=!0,t=e.apply(this,arguments)),t}}var isLogin=!!HUYA_UTIL.getCookieVal("yyuid");if(isLogin){TT.on("taskNoviceSwitchToDays",createUserCard),TT.on("huyaHeaderDomReady",function(){$(".nav-user-title").on("mouseenter",function(){createUserCard();try{ya.reportProductEvent({eid:"click/position",position:"header/usercard/hover"})}catch(e){}}).one("mouseenter",function(){TT.on("getUserInfoComplete",function(e,t){$("#J_huyaNavUserCardAvatarImg").attr("src",TT.trimUrl(t.avatar)),$("#J_huyaNavUserCardNick").empty().append("<span></span>").find("span").text(t.nick)},!0)})},!0);var RED_DOT_STORE_KEY="TT_USER_CARD_RED_DOT_"+TT.env+HUYA_UTIL.getCookieVal("yyuid");TT.store.getItem(RED_DOT_STORE_KEY,function(e){if(e)getReddot().show();else if((new Date).getTime()-getReddot().latestShowTime()>12e4){var t="TT_TASK_RED_DOT_STATE_REQ_"+HUYA_UTIL.getCookieVal("yyuid"),n=parseInt(localStorage.getItem(t)||"0",10);(new Date).getTime()-n>36e5&&getTaskReddotState(function(e){localStorage.setItem(t,(new Date).getTime()),e?getReddot().show():getReddot().hide()})}}),TT.store.change(function(e){e.key===RED_DOT_STORE_KEY&&(e.newValue?getReddot().show():getReddot().hide())}),TT.on("userCardCreate",function(e,t){function n(){t.task.tasksRipe().length>0?getReddot().show():getReddot().hide()}n(),t.task.onFinish(n)},!0),TT.on("userLevelTaskComplete",function(){getReddot().show()}),TT.event.on("AWARD_PRIZE_NOTICE_FROM_I",function(e,t){var n=null;TT.on("userCardCreate",function(t,i){n=i,i.task.award(e)},!0),n||t&&getReddot().hide()}),TT.on("userCardCreate",function(e,t){t.task.onFinish(function(e){TT.event.emit("AWARD_PRIZE_NOTICE_FROM_MAIN",e)})},!0);var getReddot=once(function(){function e(){TT.store.setItem(RED_DOT_STORE_KEY,1),i.show(),o=!0}function t(){TT.store.removeItem(RED_DOT_STORE_KEY),i.hide(),o&&localStorage.setItem(a,(new Date).getTime()),o=!1}function n(){return o?(new Date).getTime():parseInt(localStorage.getItem(a)||"0",10)}var i=$('<b class="m-reddot"></b>'),a="TT_USER_CARD_RED_DOT_LATEST_SHOW"+HUYA_UTIL.getCookieVal("yyuid"),o=!1;return TT.on("huyaHeaderDomReady",function(){$(".nav-user-title").append(i)},!0),{show:e,hide:t,visible:function(){return o},latestShowTime:n}})}},!0),$(function(){function e(){this.initialize.apply(this,arguments)}e.prototype={initialize:function(){var e=null,t=this;if(e=window.localStorage.getItem("header/ads"))try{e=JSON.parse(e),t.createImage(e)}catch(n){}$(window).on("load",function(){setTimeout(function(){t.ajaxGetAds()},500)})},createImage:function(e){$("#J_duyaHdGg").html('<a class="third-clickstat" data-thirdstat="'+e.clickCheckCode+'" href="'+e.link+'" title="'+e.title+'" target="_blank"><img src="'+TT.trimUrl(e.picUrl)+'" alt="'+e.title+'" /></a>'),this.viewReport(e.viewCheckCode)},viewReport:function(e){!function(){var t=e;if(t){var n=n||new Image;n.src=t}}(),function(){function e(){return"undefined"==typeof ya?void(t=setTimeout(function(){e()},1e3)):(clearTimeout(t),void ya.reportProductEvent({eid:"pageview/push/navipic",eid_desc:"\u66dd\u5149/\u63a8\u8350/\u9876\u90e8\u5bfc\u822a\u4f4d",ref:YA.cookie.get("ya_eid")}))}var t;e()}()},ajaxGetAds:function(){var e=TT.app.main+"/cache10min.php?m=Ad&do=ajaxGetAds&type=4&area=24&num=1";HUYA_UTIL.isMobile&&(e=TT.app.main+"/cacheapp.php?m=Ad&do=ajaxGetAds&type=4&area=24&num=1"),$.ajax({url:e,dataType:"jsonp",jsonpCallback:"huyaNavAd",cache:!0}).done(function(e){if(1e3==e.status)if(e.data&&e.data.length){var t=e.data[0];window.localStorage.setItem("header/ads",JSON.stringify(t))}else window.localStorage.removeItem("header/ads");else window.localStorage.removeItem("header/ads"),TT.log("\u83b7\u53d6\u5934\u90e8\u5e7f\u544a\u6570\u636e\u5931\u8d25\uff1a"+e.msg)})}},DUYA_SUB.subscribe("huyaHeaderDomReady",function(){new e},!0)}),!function(){function centerOnScreen(e){var t=($(window).width()-e.width())/2,n=($(window).height()-e.height())/2;return e.css({left:t+"px",top:n+"px"}),e}function showBrowserTip(){if($.browser.msie&&7>=$.browser.version&&"1"!=HUYA_UTIL.hasCookie("browserUpDate")){var expiretime=new Date;if(expiretime.setTime(expiretime.getTime()+864e5),HUYA_UTIL.writeCookie("browserUpDate","1",TT.domainForWriteCookie,"/",expiretime),0==$(".browser-box").length){var sHtml=function(obj){var __p="";with(Array.prototype.join,obj||{})__p+='<div class="huya-header-box browser-box">\r\n    <div class="hd">\r\n        <div class="tip">\u6e29\u99a8\u63d0\u793a</div>\r\n        <i class="close"></i>\r\n    </div>\r\n    <div class="bd">\r\n        <div class="browser">   \r\n            <div class="title-pic"></div>\r\n            <div class="desc">\r\n                \u6d4f\u89c8\u5668\u7248\u672c\u8fc7\u4f4e\uff0c\u5bfc\u81f4\u7f51\u7ad9\u90e8\u5206\u529f\u80fd\u65e0\u6cd5\u6b63\u5e38\u663e\u793a\uff0c\u5efa\u8bae\u5347\u7ea7\u4e3a\uff1a\r\n            </div>\r\n            <ul class="browser-list clearfix">\r\n                <li class="browser-item browser-sougou">\r\n                    <div class="pic">\r\n                        <a class="link" href="http://ie.sogou.com/" target="_blank" ></a>\r\n                        <p class="name">\u641c\u72d7\u6d4f\u89c8\u5668\u6700\u65b0\u7248</p>\r\n                    </div>\r\n                    <a class="download" href="http://ie.sogou.com/" target="_blank">\u4e0b\u8f7d</a>\r\n                </li>\r\n                <li class="browser-item browser-chrome">\r\n                    <div class="pic">\r\n                        <a class="link" href="http://www.google.cn/chrome/browser/desktop/index.html" target="_blank"></a>\r\n                        <p class="name">Chrome\u6d4f\u89c8\u5668\u6700\u65b0\u7248</p>\r\n                    </div>\r\n                    <a class="download" href="http://www.google.cn/chrome/browser/desktop/index.html" target="_blank">\u4e0b\u8f7d</a>\r\n                </li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n';return __p},$elem=$(sHtml());$("body").append($elem),centerOnScreen($elem).show(),$(window).on("resize",function(){$elem.is(":visible")&&centerOnScreen($elem)}),$(document).on("click",".browser-box .close",function(){$(".browser-box").hide()})}else $(".browser-box").show()}}showBrowserTip()}(),$(function(){var e=$("#J_duyaHdSearch");e.data("disabled")||HUYA_UTIL.getScript("//a.msstatic.com/huya/main/js/header_search_tip_10ae642.js")});