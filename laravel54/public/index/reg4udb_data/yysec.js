/*!2015-08-21 14:56:01 */
try{!function(){var common_params,util_util,baseReport_baseInfoReport,util_domReady,util_event,common_preConfig,baseReport_PerformanceReport,baseReport_basePerformanceReport,util_formPost,common_reportSender,baseReport_baseAndPerformanceReport,build_index_performance;common_params=function(){var a=function(){this.init()};return a.prototype={constructor:a,paramMap:{host:0,uri:1,uqid:2,redirect:3,domain_lookup:4,connect:5,request:6,response:7,dom_interactive:8,dom_centnet_load:9,load_event:10,cip:11,cname:12,bs:13,isp:14,os:15,flashVersion:16,screenRatio:17,firstScreenTime:18,emptyTime:19,userCanOperatingTime:20,pageLoadedTime:21},paramLength:-1,init:function(){this.countParamLength(),this.params=Array(this.paramLength),this.initParams(),this.add("uqid",this.getUqid()),this.initBaseParams()},initBaseParams:function(){this.add("host",window.location.host),this.add("uri",window.location.pathname)},countParamLength:function(){var a,b=0,c=this.paramMap;for(a in c)b++;this.paramLength=b},initParams:function(){for(var a=0;a<this.paramLength;a++)this.params[a]=-1},getUqid:function(){try{var a=document.getElementById("wq")||document.getElementById("wqErr"),b=a.getAttribute("src");return b.split("=")[1]||0}catch(c){return 0}},add:function(a,b){var c=this.paramMap[a];return void 0==c?!1:(this.params[c]=b,!0)},empty:function(a){var b=this.paramMap[a];return b?(this.params[b]=-1,!0):!1},validCheck:function(){for(var a,b=["redirect","domain_lookup","connect","request","response","dom_interactive","dom_centnet_load","load_event","cip","cname","bs","isp"],c=0;a=b[c];c++)if(this.getValue(a)<=-1)return!1;return!0},clearAll:function(){this.init()},clearSome:function(a){for(var b=0,c=a.length;c>b;b++)this.params[this.paramMap[a[b]]]=-1},addAll:function(a){for(var b in a)this.add(b,a[b])},requestFormat:function(){return this.params.join("|")},getValue:function(a){return this.params[this.paramMap[a]]}},a}(),util_util=function(){var a={replaceBlank:function(a){var b=a.toString();return b=b.replace(/ /g,""),b=b.replace(/&nbsp;/g,""),b=b.replace(/&/g,"|||"),b=b.replace(/r/g,"")},trim:function(a){return a.replace(/(^\s*)|(\s*$)/g,"")},inArray:function(a,b,c){var d="",e="undefined"==typeof c?!0:!!c;if(e){for(d in b)if(b[d]===a)return!0}else for(d in b)if(b[d]==a)return!0;return!1},getUrlMainHost:function(a){var b=document.createElement("a");return b.href=a,""==b.hostname&&(b.href=window.location.href),b.hostname.split(".").splice(-2,2).join(".")},freezeMethod:function(a,b,c){Object.defineProperties&&Object.defineProperty(a,b,{value:c,writable:!1,configurable:!1,enumerable:!0})}};return a}(),baseReport_baseInfoReport=function(params,util){var BaseInfoReport=function(){this.init()};BaseInfoReport.prototype={constructor:BaseInfoReport,init:function(){this.ua=navigator.userAgent.toLowerCase(),this.platform=navigator.platform,this.screenRatioMap={unknown:0,"1366x768":1,"1920x1080":2,"1440x900":3,"1024x768":4,"1600x900":5,"1280x800":6,"1280x1024":7,"1680x1050":8,"320x480":9,"480x800":10,"1360x768":11},this.osMap={unknown:0,WindowsMobile:1,Windows2000:2,WindowsXP:3,WindowsVista:4,Windows7:5,Windows8:6,Windows2003:7,Mac:8,Unix:9,Android:10,Linux:11,IOS:12},this.bsMap={unknown:0,maxthon:25,tencent:26,qqbrowser:26,firefox:20,lbbrowser:41,liebao:41,"2345explorer":42,chrome:22},this.ieBsMap={"msie 6.0":6,"msie 7.0":7,"msie 8.0":8,"msie 9.0":9,"msie 10.0":10,"msie 11.0":11},this.getData()},getData:function(){var a=this.getOs(),b=this.getScreenRatio(),c=this.getFlashVersion(),d=this.getBrowserVersion();this.uploadData={os:a,screenRatio:b,flashVersion:c,bs:d}},collection:function(a){this.uploadData||this.getData(),a.addAll(this.uploadData)},getFlashVersion:function(){var f="0",n=navigator;if(n.plugins&&n.plugins.length){for(var ii=0;ii<n.plugins.length;ii++)if(-1!=n.plugins[ii].name.indexOf("Shockwave Flash")){f=n.plugins[ii].description.split("Shockwave Flash ")[1];break}}else if(window.ActiveXObject)for(var ii=10;ii>=2;ii--)try{var fl=eval("new ActiveXObject('ShockwaveFlash.ShockwaveFlash."+ii+"');");if(fl){f=ii+".0";break}}catch(e){}return parseInt(util.replaceBlank(f))},getScreenRatio:function(){var a=0;return a=this.screenRatioMap[screen.width+"x"+screen.height]},getOs:function(){var a=this.platform,b="Win32"===a||"Windows"===a,c="Mac68K"===a||"MacPPC"===a||"Macintosh"===a||"MacIntel"===a,d="X11"===a&&!b&&!c,e=/Linux/.test(a),f=/android/i.test(this.userAgent),g=/(iPad|iPhone|iPod)/g.test(navigator.userAgent);if(b){var h={ce:"WindowsMobile",mobile:"WindowsMobile","nt 5.0":"Windows2000","nt 5.1":"WindowsXP","nt 5.2":"Windows2003","nt 6.0":"WindowsVista","nt 6.1":"Windows7","nt 6.2":"Windows8",2000:"Windows2000",xp:"WindowsXP",2003:"Windows2003",vista:"WindowsVista",7:"Windows7",8:"Windows8"};for(var i in h)if(this.ua.indexOf("windows "+i)>-1)return this.osMap[h[i]]}return c?this.osMap.Mac:d?this.osMap.Unix:e?f?this.osMap.Android:this.osMap.Linux:g?this.osMap.IOS:this.osMap.unknown},getBrowserVersion:function(){var a=navigator.userAgent.toLowerCase(),b=0;for(var c in this.bsMap)if(-1!=a.indexOf(c)){b=this.bsMap[c];break}if(!b){var d=a.match(/msie ([\d.]+)/);d&&(d=d[0]),b=this.ieBsMap[d]}if(!b&&"Netscape"==navigator.appName){var e=new RegExp("trident/.*rv:([0-9]{1,}[.0-9]{0,})"),f=a.match(e);f.length>1&&(b=this.ieBsMap["msie "+f[1]])}return b}};var baseInfoReport=new BaseInfoReport;return baseInfoReport}(common_params,util_util),function(a,b){util_domReady=function(){return"function"==typeof b?b():b}()}(this,function(){var a=function(a){function b(a){for(n=1;a=d.shift();)a()}var c,d=[],e=!1,f=document,g=f.documentElement,h=g.doScroll,i="DOMContentLoaded",j="addEventListener",k="onreadystatechange",l="readyState",m=h?/^loaded|^c/:/^loaded|c/,n=m.test(f[l]);return f[j]&&f[j](i,c=function(){f.removeEventListener(i,c,e),b()},e),h&&f.attachEvent(k,c=function(){/^c/.test(f[l])&&(f.detachEvent(k,c),b())}),a=h?function(b){self!=top?n?b():d.push(b):function(){try{g.doScroll("left")}catch(c){return setTimeout(function(){a(b)},50)}b()}()}:function(a){n?a():d.push(a)}};return a()}),function(a,b){util_event=function(){return"function"==typeof b?b():b}()}(this,function(){function a(a,b){for(var c=a.length;c--;)if(b[c].listener===b)return c;return-1}function b(a){return function(){return this[a].apply(this,arguments)}}var c=function(){},d=c.prototype;d.getListeners=function(a){var b,c,d=this._getEvents();if(a instanceof RegExp){b={};for(c in d)d.hasOwnProperty(c)&&a.test(c)&&(b[c]=d[c])}else b=d[a]||(d[a]=[]);return b},d.flattenListeners=function(a){var b,c=[];for(b=0;b<a.length;b++)c.push(a[b].listener);return c},d.getListenersAsObject=function(a){var b,c=this.getListeners(a);return c instanceof Array&&(b={},b[a]=c),b||c},d.addListener=function(b,c){var d,e=this.getListenersAsObject(b),f="object"==typeof c;for(d in e)e.hasOwnProperty(d)&&-1===a(e[d],c)&&e[d].push(f?c:{listener:c,once:!1});return this},d.on=b("addListener"),d.addOnceListener=function(a,b){return this.addListener(a,{listener:b,once:!0})},d.defineEvents=function(a){for(var b=0;b<a.length;b++)this.defineEvents(a[b]);return this},d.removeListener=function(b,c){var d,e,f=this.getLIstenersAsObject(b);for(e in f)f.hasOwnProperty(e)&&(d=a(f[e],c),-1!==d&&f[e].splice(d,1));return this},d.off=b("removeListener"),d.addListeners=function(a,b){return this.manipulateListeners(!1,a,b)},d.removeListeners=function(a,b){return this.manipulateListeners(!0,a,b)},d.manipulateListeners=function(a,b,c){var d,e,f=a?this.removeListener:this.addListener,g=a?this.removeListeners:this.addListeners;if("object"!=typeof b||b instanceof RegExp)for(d=c.length;d--;)f.call(this,b,c[d]);else for(d in b)b.hasOwnProperty(d)&&(e=b[d])&&("function"==typeof e?f.call(this,d,e):g.call(this,d,e));return this},d.removeEvent=function(a){var b,c=typeof a,d=this._getEvents();if("string"===c)delete d[a];else if(a instanceof RegExp)for(b in d)d.hasOwnProperty(b)&&a.test(b)&&delete d[b];else delete this._events;return this},d.removeAllListeners=b("removeEvent"),d.emitEvent=function(a,b){var c,d,e,f,g=this.getListenersAsObject(a);for(e in g)if(g.hasOwnProperty(e))for(d=g[e].length;d--;)c=g[e][d],c.once===!0&&this.removeListener(a,c.listener),f=c.listener.apply(this,b||[]),f===this._getOnceReturnValue()&&this.removeListener(a,c.listener);return this},d.trigger=b("emitEvent"),d.emit=function(a){var b=Array.prototype.slice.call(arguments,1);return this.emitEvent(a,b)},d.setOnceReturnValue=function(a){return this._onceReturnValue=a,this},d._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},d._getEvents=function(){return this._events||(this._events={})};var e=new c;return e}),common_preConfig=function(){var a={preConfig:window.__FEQUALITY__,isDebug:function(){return this.getItem("debug",!1)===!0},getErrorQueue:function(){var a=this.getItem("errorQueue",[]);return a instanceof Array?a:[]},getPreErrFun:function(){return this.getItem("preErrFun",null)},getSampleRate:function(){var a=this.getItem("rate",1);return 0>=a-0&&(a=1),a},getPre:function(){var a=this.preConfig;return a||(this.preConfig=window.__FEQUALITY__={}),this.preConfig},getItem:function(a,b){var c=this.preConfig;return c&&c.hasOwnProperty(a)&&c[a]||b}};return a}(),baseReport_PerformanceReport=function(a,b,c,d){var e=function(){this.perTime=500,this.init()};e.prototype={constructor:e,init:function(){this.enablePerformance=!!(window.performance||window.msPerformance||window.webkitPerformance||window.mozPerformance),this.enablePerformance?(this.pf=window.performance||window.msPerformance||window.webkitPerformance||window.mozPerformance,this.pfTime=this.pf.timing):this.bindDomReadyEvent(),window.chrome&&window.chrome.loadTimes&&(this.wcLoadTimes=window.chrome.loadTimes())},collection:function(a,b){!b&&(b=5e3);var c=Math.ceil(b/this.perTime);this.loopReport(c,1,this.perTime,a)},loopReport:function(a,b,c,d){var e=this;window.setTimeout(function(){e.checkDataExisted()||b>=a?e._collection(d):a>b&&e.loopReport(a,++b,c,d)},c)},checkDataExisted:function(){for(var a=[this.getEmptyTimeEnd(),this.getFirstScreenTime(),this.getUserCanOperatingTime()||void 0,this.pfTime.domainLookupStart||void 0,this.getPageLoadTime()||void 0],b=!0,c=0,d=a.length;d>c;c++)if(void 0==a[c]){b=!1;break}return b},_collection:function(a){var b=this.firstScreenTime(),d=this.reportEmptyTime(),e=this.userCanOperatingTimeReport(),f=this.pageLoadedTime(),g={firstScreenTime:b,emptyTime:d,userCanOperatingTime:e,pageLoadedTime:f};a.addAll(g),c.trigger("performanceReport:finish")},getFirstScreenTime:function(){return window.yy_reportFirstScreenTime},firstScreenTime:function(){return this.timeFromDnsLoopupStart(this.getFirstScreenTime())},getEmptyTimeEnd:function(){var a=d.getPre().yy_reportEmptyTimeEnd;return a},reportEmptyTime:function(){return this.timeFromDnsLoopupStart(this.getEmptyTimeEnd())},timeFromDnsLoopupStart:function(a){var b=-1;return a&&(this.enablePerformance?b=a-this.pfTime.domainLookupStart:window.yy_reportMockDnsLookupStartTime&&(b=a-window.yy_reportMockDnsLookupStartTime)),b},bindDomReadyEvent:function(){a(function(){window.yy_reportUserCanOperatingTimeData=(new Date).getTime()})},getUserCanOperatingTime:function(){var a=window.yy_reportUserCanOperatingTimeData;return this.pfTime&&(a=this.pfTime.domContentLoadedEventEnd),a},userCanOperatingTimeReport:function(){var a=window.yy_reportUserCanOperatingTimeData;return this.pfTime&&(a=this.pfTime.domContentLoadedEventEnd),this.timeFromDnsLoopupStart(this.getUserCanOperatingTime())},bindWinOnloadTime:function(){var a=null;window.onload&&(a=window.onload),window.onload=function(){a&&a(),window.window.yy_reportPageLoadedTime=(new Date).getTime()}},getPageLoadTime:function(){var a=window.yy_reportPageLoadedTime;return this.pfTime&&(a=this.pfTime.loadEventEnd),a},pageLoadedTime:function(){return this.timeFromDnsLoopupStart(this.getPageLoadTime())}};var f=new e;return f}(util_domReady,common_params,util_event,common_preConfig),baseReport_basePerformanceReport=function(a){var b=function(){this.init()};return b.prototype={constructor:b,init:function(){this.getIpInfo()},collection:function(b){var c=this;this.getIpInfo(function(){setTimeout(function(){var d={};c.getData(d),c.getPerformanceData(d),c.reportData=d,b.addAll(d),a.trigger("basePerformanceReport:finish")},2e3)})},getIspData:function(a,b){var c=this;this.getIpInfo(function(){var d={};c.getData(d),a.addAll(d),b&&b()})},getData:function(a){a.cip=this.ispInfo.cip||-1,a.cname=this.ispInfo.province||-1,a.isp=this.ispInfo.isp||-1},getPerformanceData:function(a){var b=window.performance.timing,c={redirect:b.redirectEnd-b.redirectStart,domain_lookup:b.domainLookupEnd-b.domainLookupStart,connect:b.connectEnd-b.connectStart,request:b.responseStart-b.requestStart,response:b.responseEnd-b.responseStart,dom_interactive:b.domInteractive-b.domLoading,dom_centnet_load:b.domComplete-b.domInteractive,load_event:b.loadEventEnd-b.loadEventStart};this.checkMap(c),this.formatPerformanceData(a,c)},checkMap:function(a){for(var b in a){var c=a[b];-1>c&&(a[b]=-1)}},formatPerformanceData:function(a,b){for(var c in b)a[c]=b[c]<=-1?-1:b[c]},getIpInfo:function(a){if(this.ispInfo)return void(a&&a());var b=this,c="//ipip.yy.com/get_ip_info.php",d=document.createElement("script");d.src=c;var e=!1;d.onload=d.onreadystatechange=function(){e||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(e=!0,d.onload=d.onreadystatechange=null,b.ispInfo=window.returnInfo,b.ispInfo&&"\u4e2d\u56fd"!==b.ispInfo.country&&(b.ispInfo.cip=-1,b.ispInfo.province=-1,b.ispInfo.isp=-1),this.parentNode&&this.parentNode.removeChild(this),a&&a())},d.onerror=function(){d.parentNode.removeChild(d),d.onerror=null,d.onload=null,b.ispInfo={},a&&a()};var f=document.head||document.getElementsByTagName("head")[0];!f&&(f=document.body),f.appendChild(d)}},new b}(util_event),function(a,b){util_formPost=function(){return"function"==typeof b?b():b}()}(this,function(){var a=function(){};return a.prototype={constructor:a,postData:function(a,b){var c=this.getId("form"),d=this.getId("iframe"),e=this.initForm(c,d,a,b),f=this.initIframe(d,e);this.doPost(f,e)},doPost:function(a,b){var c=document,d=null;d=c.head||c.getElementsByTagName("head")[0],!d&&(d=c.body),d.appendChild(b),d.appendChild(a),a.onload=function(){b.parentNode.removeChild(b),a.parentNode.removeChild(a)},b.submit()},getId:function(a){return!a&&(a=""),a+(new Date).getTime()+parseInt(1e4*Math.random())},initForm:function(a,b,c,d){var e=document.createElement("form");e.setAttribute("method","post"),e.setAttribute("action",c),e.setAttribute("id",a),e.setAttribute("target",b),e.style.display="none";for(var f in d){var g=d[f],h=document.createElement("input");h.setAttribute("name",f),h.setAttribute("value",g),e.setAttribute("yy_f2e_report",!0),e.appendChild(h)}return e},initIframe:function(a){var b=/MSIE (6|7|8)/.test(navigator.userAgent)?document.createElement('<iframe name="'+a+'">'):document.createElement("iframe");return b.setAttribute("id",a),b.setAttribute("name",a),b.setAttribute("yy_f2e_report",!0),b.style.display="none",b}},new a}),common_reportSender=function(a,b){var c=function(){this.init()};return c.prototype={constructor:c,init:function(){this.senderUrlHttps="https://countmq.yy.com/?name=u_quality&opt=put",this.senderUrlHttp="http://countmq.sysop.duowan.com/?name=u_quality&opt=put",b.getIpInfo(),this.senderUrl=this.choiceUrl()},setUrlHttps:function(a){this.senderUrlHttps=a},setUrlHttp:function(a){this.senderUrlHttp=a},setSenderUrl:function(){this.senderUrl=this.choiceUrl()},choiceUrl:function(){return"https:"==location.protocol?this.senderUrlHttps:this.senderUrlHttp},getSender:function(a,c,d,e){var f=this;e?this._getSender(a,c,d):b.getIspData(a,function(){f._getSender(a,c,d)})},_getSender:function(a,b,c){if(!c||a.validCheck())if("post"===b)this.doPostSend(this.senderUrl,a);else{var d=this.senderUrl+"&data="+a.requestFormat();this.doGetSend(d)}},doGetSend:function(a){var b=new Image(1,1);b.onload=function(){b=null},b.onerror=function(){b=null},b.src=a},doPostSend:function(b,c){a.postData(b,{data:c.requestFormat()})},getClazz:function(){return c}},new c}(util_formPost,baseReport_basePerformanceReport),baseReport_baseAndPerformanceReport=function(a,b,c,d,e,f){var g=function(){this.init()};return g.prototype={constructor:g,init:function(){this.pf=this.getPf(),this.baseParams=new f,this.baseInfoReport=a,this.performanceReport=b,this.basePerformanceReport=c,this.checkArr=[0,0],this.enablePf=!!this.pf},report:function(a){if(this.enablePf){var b=this;this.baseInfoReport.collection(this.baseParams),this.performanceReport.collection(this.baseParams,a),this.basePerformanceReport.collection(this.baseParams,a),d.on("performanceReport:finish",function(){b.checkArr[0]=1,b.checkFinish()&&e.getSender(b.baseParams,!0)}),d.on("basePerformanceReport:finish",function(){b.checkArr[1]=1,b.checkFinish()&&e.getSender(b.baseParams,!0)})}},checkFinish:function(){return 3==parseInt(this.checkArr.join(""),2)},getPf:function(){return window.performance||window.msPerformance||window.webkitPerformance||window.mozPerformance}},g}(baseReport_baseInfoReport,baseReport_PerformanceReport,baseReport_basePerformanceReport,util_event,common_reportSender,common_params),build_index_performance=function(a){var b=new a;b.report()}(baseReport_baseAndPerformanceReport)}()}catch(e){window.yyF2EReport&&window.yyF2EReport.error(e)}