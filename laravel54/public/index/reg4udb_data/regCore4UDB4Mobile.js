/** @license MIT License (c) copyright 2011-2013 original author or authors */

/**
 * A lightweight CommonJS Promises/A and when() implementation
 * when is part of the cujo.js family of libraries (http://cujojs.com/)
 *
 * Licensed under the MIT License at:
 * http://www.opensource.org/licenses/mit-license.php
 *
 * @author Brian Cavalier
 * @author John Hann
 * @version 2.5.1
 */

/*
 * RSA, a suite of routines for performing RSA public-key computations in JavaScript.
 * Copyright 1998-2005 David Shapiro.
 * Dave Shapiro
 * dave@ohdave.com 
 * changed by Fuchun, 2010-05-06
 * fcrpg2005@gmail.com
 */

define("lib/io/console",["require","exports","module"],function(e,t,n){var r=["log","debug","info","warn","exception","assert","dir","dirxml","trace","group","groupCollapsed","groupEnd","profile","profileEnd","count","clear","time","timeEnd","timeStamp","table","error","markTimeline","timeline","timelineEnd","cd","countReset","select"],i=window.console||{},s=function(){};for(var o in r)r[o]in i||(i[r[o]]=s);return i}),define("lib/util/getType",["require","exports","module"],function(e,t,n){return function(e){var t;return((t=typeof e)=="object"?e==null&&"null"||Object.prototype.toString.call(e).slice(8,-1):t).toLowerCase()}}),define("lib/util/each",["require","exports","module","lib/util/getType"],function(e,t,n){var r=e("lib/util/getType");return function(e,t){if(r(e)=="array")if([].forEach)[].forEach.call(e,t);else{var n=e.length;for(var i=0;i<n;i++)e.hasOwnProperty(i)&&t(e[i],i,e)}else for(var s in e)e.hasOwnProperty(s)&&t(e[s],s,e)}}),define("lib/comp/base",["require","exports","module","lib/io/console","lib/util/each"],function(e,t,n){var r=e("lib/io/console"),i=e("lib/util/each"),s=function(){var e=0,t="LIVE_COMP_";return function(){return t+e++}}(),o=function(){var e=1e4;return function(){return e++}}(),u=!1,a=function(){var e={},t={};return e.bind=function(e,n){if(typeof n!="function")return;e in t||(t[e]=[]),i(t[e],function(e,t){if(e===n)return}),t[e].push(n)},e.unbind=function(e,n){if(!(e in t))return;i(t[e],function(r,i){if(r===n){t[e]=t[e].splice(i,1);return}})},e.fire=function(n,r){if(!(n in t))return;i(t[n],function(t,i){var s={type:n,target:e,data:r};t(s)})},e.isLock=function(){return u},e.lock=function(){u=!0},e.unLock=function(){u=!1},e};return a.getUniqueId=s,a.getZIndex=o,a}),define("lib/dom/getStyle",["require","exports","module"],function(e,t,n){function f(){return f.rs||(f.rs={opacity:/^0\.5/.test(i.opacity),cssFloat:!!i.cssFloat})}function l(e){return e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(e,t){return t.toUpperCase()})}function c(e){if(e in i)return e;var t=e.charAt(0).toUpperCase()+e.slice(1),n=e,r=["Webkit","O","Moz","ms"],s=r.length;while(s--){e=r[s]+t;if(e in i)return e}return n}function h(e,t,n){var r=e.style,i=r.left,s=e.runtimeStyle.left;e.runtimeStyle.left=e.currentStyle.left,r.left=t==="fontSize"?"1em":n||0;var o=r.pixelLeft;return r.left=i,e.runtimeStyle.left=s,o+"px"}function p(e){return e=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/),"#"+d(e[1])+tohex(e[2])+tohex(e[3])}function d(e){var t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"];return isNaN(e)?"00":t[(e-e%16)/16]+t[e%16]}function v(e){return"getComputedStyle"in window?document.body.ownerDocument.defaultView.getComputedStyle(e,""):"currentStyle"in document.documentElement?e.currentStyle:{}}function m(e,t){var n;t in u&&(n=u[t](e));if(n!==undefined)return n;n=e.currentStyle[t];if(/^(height|width)$/.test(t)){var i=t=="width"?["left","right"]:["top","bottom"],s=0;if(r)return e[l("offset-"+t)]+"px";var o=parseFloat(e[l("client-"+t)]),a=parseFloat(getStyle(e,"padding-"+i[0])),f=parseFloat(getStyle(e,"padding-"+i[1]));n=o-a-f,n=n>0?n:e[l("offset-"+t)]}return n}function g(e,t,n){if(!/^\d+px$/.test(n)){if(/(em|pt|mm|cm|pc|in|ex|rem|vw|vh|vm|ch|gr|%)$/.test(n))return h(e,t,n);if(/^(border).+(width)$/i.test(t)){var r=t.replace("Width","Style");return n=="medium"&&getStyle(e,r)=="none"?"0px":window.XDomainRequest?o[n][0]:o[n][1]}if(t.search(/background|color/i)!=-1)return!s[n]||(n=s[n]),n=="inherit"?getStyle(e.parentNode,t):/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/i.test(n)?p(n):/^#/.test(n)?(n=n.replace("#",""),"#"+(n.length==3?n.replace(/^(\w)(\w)(\w)$/,"$1$1$2$2$3$3"):n)):n}}var r=document.documentMode?document.documentMode===5:document.compatMode!=="CSS1Compat",i=document.createElement("DIV").style;i.cssText="float:left;opacity:.5";var s={aqua:"#0ff",black:"#000",blue:"#00f",gray:"#808080",purple:"#800080",fuchsia:"#f0f",green:"#008000",lime:"#0f0",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#ffa500",red:"#f00",silver:"#c0c0c0",teal:"#008080",transparent:"rgba(0,0,0,0)",white:"#fff",yellow:"#ff0"},o={thin:["1px","2px"],medium:["3px","4px"],thick:["5px","6px"]},u={opacity:function(e){if(!f().opacity){var t=100;try{t=e.filters["DXImageTransform.Microsoft.Alpha"].opacity}catch(n){try{t=e.filters("alpha").opacity}catch(n){}}return t/100}}},a={"float":f().cssFloat?"cssFloat":"styleFloat"};return function(e,t){e=typeof e=="string"?document.getElementById(e):e;var n=v(e),r;t=l(t),t=a[t]||(a[t]=c(t)),"getComputedStyle"in window?r=document.defaultView.getComputedStyle(e,null)[t]:r=m(e,t);try{r=g(e,t,r)||r}catch(i){}return r}}),define("lib/dom/sizzle",["require","exports","module","lib/dom/getStyle"],function(e,t,n){function g(e,t,n,r,i,s){for(var o=0,u=r.length;o<u;o++){var a=r[o];if(a){a=a[e];var f=!1;while(a){if(a.sizcache===n){f=r[a.sizset];break}a.nodeType===1&&!s&&(a.sizcache=n,a.sizset=o);if(a.nodeName.toLowerCase()===t){f=a;break}a=a[e]}r[o]=f}}}function y(e,t,n,r,i,s){for(var o=0,u=r.length;o<u;o++){var a=r[o];if(a){a=a[e];var l=!1;while(a){if(a.sizcache===n){l=r[a.sizset];break}if(a.nodeType===1){s||(a.sizcache=n,a.sizset=o);if(typeof t!="string"){if(a===t){l=!0;break}}else if(f.filter(t,[a]).length>0){l=a;break}}a=a[e]}r[o]=l}}}function w(e){return r(e,"display")==="none"}var r=e("lib/dom/getStyle"),i=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,s=0,o=Object.prototype.toString,u=!1,a=!0;[0,0].sort(function(){return a=!1,0});var f=function(e,t,n,r){n=n||[],t=t||document;var s=t;if(t.nodeType!==1&&t.nodeType!==9)return[];if(!e||typeof e!="string")return n;var u=[],a,h,p,v,m=!0,g=f.isXML(t),y=e,w,E,S,x;do{i.exec(""),a=i.exec(y);if(a){y=a[3],u.push(a[1]);if(a[2]){v=a[3];break}}}while(a);if(u.length>1&&c.exec(e))if(u.length===2&&l.relative[u[0]])h=b(u[0]+u[1],t);else{h=l.relative[u[0]]?[t]:f(u.shift(),t);while(u.length)e=u.shift(),l.relative[e]&&(e+=u.shift()),h=b(e,h)}else{!r&&u.length>1&&t.nodeType===9&&!g&&l.match.ID.test(u[0])&&!l.match.ID.test(u[u.length-1])&&(w=f.find(u.shift(),t,g),t=w.expr?f.filter(w.expr,w.set)[0]:w.set[0]);if(t){w=r?{expr:u.pop(),set:d(r)}:f.find(u.pop(),u.length!==1||u[0]!=="~"&&u[0]!=="+"||!t.parentNode?t:t.parentNode,g),h=w.expr?f.filter(w.expr,w.set):w.set,u.length>0?p=d(h):m=!1;while(u.length)E=u.pop(),S=E,l.relative[E]?S=u.pop():E="",S==null&&(S=t),l.relative[E](p,S,g)}else p=u=[]}p||(p=h),p||f.error(E||e);if(o.call(p)==="[object Array]")if(!m)n.push.apply(n,p);else if(t&&t.nodeType===1)for(x=0;p[x]!=null;x++)p[x]&&(p[x]===!0||p[x].nodeType===1&&f.contains(t,p[x]))&&n.push(h[x]);else for(x=0;p[x]!=null;x++)p[x]&&p[x].nodeType===1&&n.push(h[x]);else d(p,n);return v&&(f(v,s,n,r),f.uniqueSort(n)),n};f.uniqueSort=function(e){if(m){u=a,e.sort(m);if(u)for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1)}return e},f.matches=function(e,t){return f(e,null,null,t)},f.find=function(e,t,n){var r;if(!e)return[];for(var i=0,s=l.order.length;i<s;i++){var o=l.order[i],u;if(u=l.leftMatch[o].exec(e)){var a=u[1];u.splice(1,1);if(a.substr(a.length-1)!=="\\"){u[1]=(u[1]||"").replace(/\\/g,""),r=l.find[o](u,t,n);if(r!=null){e=e.replace(l.match[o],"");break}}}}return r||(r=t.getElementsByTagName("*")),{set:r,expr:e}},f.filter=function(e,t,n,r){var i=e,s=[],o=t,u,a,c=t&&t[0]&&f.isXML(t[0]);while(e&&t.length){for(var h in l.filter)if((u=l.leftMatch[h].exec(e))!=null&&u[2]){var p=l.filter[h],d,v,m=u[1];a=!1,u.splice(1,1);if(m.substr(m.length-1)==="\\")continue;o===s&&(s=[]);if(l.preFilter[h]){u=l.preFilter[h](u,o,n,s,r,c);if(!u)a=d=!0;else if(u===!0)continue}if(u)for(var g=0;(v=o[g])!=null;g++)if(v){d=p(v,u,g,o);var y=r^!!d;n&&d!=null?y?a=!0:o[g]=!1:y&&(s.push(v),a=!0)}if(d!==undefined){n||(o=s),e=e.replace(l.match[h],"");if(!a)return[];break}}if(e===i){if(a!=null)break;f.error(e)}i=e}return o},f.error=function(e){throw"Syntax error, unrecognized expression: "+e};var l={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(['"]*)(.*?)\3|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\((even|odd|[\dn+\-]*)\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")}},relative:{"+":function(e,t){var n=typeof t=="string",r=n&&!/\W/.test(t),i=n&&!r;r&&(t=t.toLowerCase());for(var s=0,o=e.length,u;s<o;s++)if(u=e[s]){while((u=u.previousSibling)&&u.nodeType!==1);e[s]=i||u&&u.nodeName.toLowerCase()===t?u||!1:u===t}i&&f.filter(t,e,!0)},">":function(e,t){var n=typeof t=="string",r,i=0,s=e.length;if(n&&!/\W/.test(t)){t=t.toLowerCase();for(;i<s;i++){r=e[i];if(r){var o=r.parentNode;e[i]=o.nodeName.toLowerCase()===t?o:!1}}}else{for(;i<s;i++)r=e[i],r&&(e[i]=n?r.parentNode:r.parentNode===t);n&&f.filter(t,e,!0)}},"":function(e,t,n){var r=s++,i=y,o;typeof t=="string"&&!/\W/.test(t)&&(t=t.toLowerCase(),o=t,i=g),i("parentNode",t,r,e,o,n)},"~":function(e,t,n){var r=s++,i=y,o;typeof t=="string"&&!/\W/.test(t)&&(t=t.toLowerCase(),o=t,i=g),i("previousSibling",t,r,e,o,n)}},find:{ID:function(e,t,n){if(typeof t.getElementById!="undefined"&&!n){var r=t.getElementById(e[1]);return r?[r]:[]}},NAME:function(e,t){if(typeof t.getElementsByName!="undefined"){var n=[],r=t.getElementsByName(e[1]);for(var i=0,s=r.length;i<s;i++)r[i].getAttribute("name")===e[1]&&n.push(r[i]);return n.length===0?null:n}},TAG:function(e,t){return t.getElementsByTagName(e[1])}},preFilter:{CLASS:function(e,t,n,r,i,s){e=" "+e[1].replace(/\\/g,"")+" ";if(s)return e;for(var o=0,u;(u=t[o])!=null;o++)u&&(i^(u.className&&(" "+u.className+" ").replace(/[\t\n]/g," ").indexOf(e)>=0)?n||r.push(u):n&&(t[o]=!1));return!1},ID:function(e){return e[1].replace(/\\/g,"")},TAG:function(e,t){return e[1].toLowerCase()},CHILD:function(e){if(e[1]==="nth"){var t=/(-?)(\d*)n((?:\+|-)?\d*)/.exec(e[2]==="even"&&"2n"||e[2]==="odd"&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}return e[0]=s++,e},ATTR:function(e,t,n,r,i,s){var o=e[1].replace(/\\/g,"");return!s&&l.attrMap[o]&&(e[1]=l.attrMap[o]),e[2]==="~="&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(e,t,n,r,s){if(e[1]==="not"){if(!((i.exec(e[3])||"").length>1||/^\w/.test(e[3]))){var o=f.filter(e[3],t,n,!0^s);return n||r.push.apply(r,o),!1}e[3]=f(e[3],null,null,t)}else if(l.match.POS.test(e[0])||l.match.CHILD.test(e[0]))return!0;return e},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return e.disabled===!1&&e.type!=="hidden"},disabled:function(e){return e.disabled===!0},checked:function(e){return e.checked===!0},selected:function(e){return e.parentNode.selectedIndex,e.selected===!0},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!f(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){return"text"===e.type},radio:function(e){return"radio"===e.type},checkbox:function(e){return"checkbox"===e.type},file:function(e){return"file"===e.type},password:function(e){return"password"===e.type},submit:function(e){return"submit"===e.type},image:function(e){return"image"===e.type},reset:function(e){return"reset"===e.type},button:function(e){return"button"===e.type||e.nodeName.toLowerCase()==="button"},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)}},setFilters:{first:function(e,t){return t===0},last:function(e,t,n,r){return t===r.length-1},even:function(e,t){return t%2===0},odd:function(e,t){return t%2===1},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0===t},eq:function(e,t,n){return n[3]-0===t}},filter:{PSEUDO:function(e,t,n,r){var i=t[1],s=l.filters[i];if(s)return s(e,n,t,r);if(i==="contains")return(e.textContent||e.innerText||f.getText([e])||"").indexOf(t[3])>=0;if(i==="not"){var o=t[3];for(var u=0,a=o.length;u<a;u++)if(o[u]===e)return!1;return!0}f.error("Syntax error, unrecognized expression: "+i)},CHILD:function(e,t){var n=t[1],r=e;switch(n){case"only":case"first":while(r=r.previousSibling)if(r.nodeType===1)return!1;if(n==="first")return!0;r=e;case"last":while(r=r.nextSibling)if(r.nodeType===1)return!1;return!0;case"nth":var i=t[2],s=t[3];if(i===1&&s===0)return!0;var o=t[0],u=e.parentNode;if(u&&(u.sizcache!==o||!e.nodeIndex)){var a=0;for(r=u.firstChild;r;r=r.nextSibling)r.nodeType===1&&(r.nodeIndex=++a);u.sizcache=o}var f=e.nodeIndex-s;return i===0?f===0:f%i===0&&f/i>=0}},ID:function(e,t){return e.nodeType===1&&e.getAttribute("id")===t},TAG:function(e,t){return t==="*"&&e.nodeType===1||e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1],r=l.attrHandle[n]?l.attrHandle[n](e):e[n]!=null?e[n]:e.getAttribute(n),i=r+"",s=t[2],o=t[4];return r==null?s==="!=":s==="="?i===o:s==="*="?i.indexOf(o)>=0:s==="~="?(" "+i+" ").indexOf(o)>=0:o?s==="!="?i!==o:s==="^="?i.indexOf(o)===0:s==="$="?i.substr(i.length-o.length)===o:s==="|="?i===o||i.substr(0,o.length+1)===o+"-":!1:i&&r!==!1},POS:function(e,t,n,r){var i=t[2],s=l.setFilters[i];if(s)return s(e,n,t,r)}}};f.selectors=l;var c=l.match.POS,h=function(e,t){return"\\"+(t-0+1)};for(var p in l.match)l.match[p]=new RegExp(l.match[p].source+/(?![^\[]*\])(?![^\(]*\))/.source),l.leftMatch[p]=new RegExp(/(^(?:.|\r|\n)*?)/.source+l.match[p].source.replace(/\\(\d+)/g,h));var d=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(v){d=function(e,t){var n=t||[],r=0;if(o.call(e)==="[object Array]")Array.prototype.push.apply(n,e);else if(typeof e.length=="number")for(var i=e.length;r<i;r++)n.push(e[r]);else for(;e[r];r++)n.push(e[r]);return n}}var m;document.documentElement.compareDocumentPosition?m=function(e,t){if(!e.compareDocumentPosition||!t.compareDocumentPosition)return e==t&&(u=!0),e.compareDocumentPosition?-1:1;var n=e.compareDocumentPosition(t)&4?-1:e===t?0:1;return n===0&&(u=!0),n}:"sourceIndex"in document.documentElement?m=function(e,t){if(!e.sourceIndex||!t.sourceIndex)return e==t&&(u=!0),e.sourceIndex?-1:1;var n=e.sourceIndex-t.sourceIndex;return n===0&&(u=!0),n}:document.createRange&&(m=function(e,t){if(!e.ownerDocument||!t.ownerDocument)return e==t&&(u=!0),e.ownerDocument?-1:1;var n=e.ownerDocument.createRange(),r=t.ownerDocument.createRange();n.setStart(e,0),n.setEnd(e,0),r.setStart(t,0),r.setEnd(t,0);var i=n.compareBoundaryPoints(Range.START_TO_END,r);return i===0&&(u=!0),i}),f.getText=function(e){var t="",n;for(var r=0;e[r];r++)n=e[r],n.nodeType===3||n.nodeType===4?t+=n.nodeValue:n.nodeType!==8&&(t+=f.getText(n.childNodes));return t},function(){var e=document.createElement("div"),t="script"+(new Date).getTime();e.innerHTML="<a name='"+t+"'/>";var n=document.documentElement;n.insertBefore(e,n.firstChild),document.getElementById(t)&&(l.find.ID=function(e,t,n){if(typeof t.getElementById!="undefined"&&!n){var r=t.getElementById(e[1]);return r?r.id===e[1]||typeof r.getAttributeNode!="undefined"&&r.getAttributeNode("id").nodeValue===e[1]?[r]:undefined:[]}},l.filter.ID=function(e,t){var n=typeof e.getAttributeNode!="undefined"&&e.getAttributeNode("id");return e.nodeType===1&&n&&n.nodeValue===t}),n.removeChild(e),n=e=null}(),function(){var e=document.createElement("div");e.appendChild(document.createComment("")),e.getElementsByTagName("*").length>0&&(l.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if(e[1]==="*"){var r=[];for(var i=0;n[i];i++)n[i].nodeType===1&&r.push(n[i]);n=r}return n}),e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!="undefined"&&e.firstChild.getAttribute("href")!=="#"&&(l.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),document.querySelectorAll&&function(){var e=f,t=document.createElement("div");t.innerHTML="<p class='TEST'></p>";if(t.querySelectorAll&&t.querySelectorAll(".TEST").length===0)return;f=function(t,n,r,i){n=n||document;if(!i&&n.nodeType===9&&!f.isXML(n))try{return d(n.querySelectorAll(t),r)}catch(s){}return e(t,n,r,i)};for(var n in e)f[n]=e[n];t=null}(),function(){var e=document.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>";if(!e.getElementsByClassName||e.getElementsByClassName("e").length===0)return;e.lastChild.className="e";if(e.getElementsByClassName("e").length===1)return;l.order.splice(1,0,"CLASS"),l.find.CLASS=function(e,t,n){if(typeof t.getElementsByClassName!="undefined"&&!n)return t.getElementsByClassName(e[1])},e=null}(),f.contains=document.compareDocumentPosition?function(e,t){return!!(e.compareDocumentPosition(t)&16)}:function(e,t){return e!==t&&(e.contains?e.contains(t):!0)},f.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return t?t.nodeName!=="HTML":!1};var b=function(e,t){var n=[],r="",i,s=t.nodeType?[t]:t;while(i=l.match.PSEUDO.exec(e))r+=i[0],e=e.replace(l.match.PSEUDO,"");e=l.relative[e]?e+"*":e;for(var o=0,u=s.length;o<u;o++)f(e,s[o],n);return f.filter(r,n)};return l.filters.hidden=w,l.filters.visible=function(e){return!w(e)},f}),define("lib/dom/queryNode",["require","exports","module","lib/dom/sizzle"],function(e,t,n){var r=e("lib/dom/sizzle");return function(e,t,n,i){return r(e,t,n,i)[0]}}),define("lib/evt/add",["require","exports","module","lib/util/getType","lib/util/each"],function(e,t,n){var r=e("lib/util/getType"),i=e("lib/util/each"),s=function(e,t,n,o){if(r(e)=="array"){var u=s;i(e,function(e,r){u(e,t,n,o)})}return e=r(e)=="string"?document.getElementById(e):e,e==null||typeof n!="function"?!1:(e.addEventListener?e.addEventListener(t,n,o===!0?!0:!1):e.attachEvent?(e.attachEvent("on"+t,n),o&&e.setCapture&&e.setCapture()):(e["on"+t]=n,o&&e.setCapture&&e.setCapture()),!0)};return s}),define("lib/io/getXMLHttpRequest",["require","exports","module","lib/io/console"],function(e,t,n){var r=e("lib/io/console");return function(){var e=null;if("XMLHttpRequest"in window)e=new XMLHttpRequest;else try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(t){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(t){r.error("无法创建XMLHttpRequest对象")}}return e}}),define("lib/json/merge",["require","exports","module","lib/util/getType","lib/io/console"],function(e,t,n){var r=e("lib/util/getType"),i=e("lib/io/console");return function(e,t){if(r(e)!="object"||r(t)!="object"){i.error("传入的参数必须都为对象");return}var n={};for(var s in e)n[s]=e[s];for(var s in t)n[s]=t[s];return n}}),define("lib/str/trim",["require","exports","module"],function(e,t,n){return function(e){if(e==null)return"";var t=e.length,n=0,r=/(\u3000|\s|\t|\u00A0)/;while(n<t){if(!r.test(e.charAt(n)))break;n+=1}while(t>n){if(!r.test(e.charAt(t-1)))break;t-=1}return e.slice(n,t)}}),define("lib/json/jsonToQuery",["require","exports","module","lib/str/trim"],function(e,t,n){var r=e("lib/str/trim"),i=function(e,t){return e=e==null?"":r(e.toString()),t?encodeURIComponent(e):e};return function(e,t){var n=[];if(typeof e=="object")for(var r in e){if(r==="$nullName"){n=n.concat(e[r]);continue}if(e[r]instanceof Array)for(var s=0,o=e[r].length;s<o;s++)n.push(r+"="+i(e[r][s],t));else typeof e[r]!="function"&&n.push(r+"="+i(e[r],t))}return n.length?n.join("&"):""}}),define("lib/io/ajax",["require","exports","module","lib/io/getXMLHttpRequest","lib/json/merge","lib/json/jsonToQuery","lib/io/console"],function(require,exports,module){var getXMLHttpRequest=require("lib/io/getXMLHttpRequest"),merge=require("lib/json/merge"),jsonToQuery=require("lib/json/jsonToQuery"),console=require("lib/io/console");return function(opts){var xmlHttp=getXMLHttpRequest(),tid=0;opts=merge({url:"",timeout:3e4,data:null,onSuccess:function(){},onError:function(){},onTimeout:function(){},onAbort:function(){},method:"get",type:"json"},opts),opts.method=opts.method.toLocaleLowerCase()=="get"?"get":"post";var callback=function(){if(xmlHttp.readyState==4){clearTimeout(tid);var data="";tid=0;if(opts["type"]=="xml")data=xmlHttp.responseXML;else if(opts["type"]=="text")data=xmlHttp.responseText;else if(xmlHttp.responseText!=null&&typeof xmlHttp.responseText=="string")try{data=eval("("+xmlHttp.responseText+")")}catch(ex){data={},console.error(ex)}else data={};if(xmlHttp.status==200)try{opts.onSuccess(data)}catch(ex){console.error(ex)}else if(xmlHttp.status==0){try{opts.onAbort(xmlHttp)}catch(ex){console.error(ex)}try{opts.onError(xmlHttp)}catch(ex){console.error(ex)}}else try{opts.onError(xmlHttp)}catch(ex){console.error(ex)}}};xmlHttp.onreadystatechange=callback,xmlHttp.open(opts.method,opts.url,!0);try{xmlHttp.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),xmlHttp.setRequestHeader("X-Requested-With","XMLHttpRequest")}catch(ex){}return xmlHttp.send(opts.method=="get"?null:jsonToQuery(opts.data,!0)),tid=setTimeout(function(){tid=0,xmlHttp.abort();try{opts.onError(xmlHttp),opts.onTimeout(xmlHttp)}catch(e){console.error(e)}},opts.timeout),xmlHttp}}),define("lib/str/appendQuery",["require","exports","module"],function(e,t,n){return function(e,t){return e+(e.indexOf("?")==-1?"?":"&")+t}}),define("udb/decoder",["require","exports","module"],function(e,t,n){function r(e,t){var n=new Array(2),r=new Array(4),a="",f;for(var f=0;f<4;f++)r[f]=s(t.slice(f*4,(f+1)*4));e=g(e),e=u(e);for(f=0;f<e.length;f+=8)n[0]=s(e.slice(f,f+4)),n[1]=s(e.slice(f+4,f+8)),i(n,r),a+=o(n[0])+o(n[1]);return a=a.replace(/\0+$/,""),unescape(a)}function i(e,t){var n=e[0],r=e[1],i=2654435769,s=i*32;while(s!=0)r-=(n<<4^n>>>5)+n^s+t[s>>>11&3],s-=i,n-=(r<<4^r>>>5)+r^s+t[s&3];e[0]=n,e[1]=r}function s(e){var t=0;for(var n=0;n<4;n++)t|=e.charCodeAt(n)<<n*8;return isNaN(t)?0:t}function o(e){var t=String.fromCharCode(e&255,e>>8&255,e>>16&255,e>>24&255);return t}function u(e){return e.replace(/!\d\d?\d?!/g,function(e){return String.fromCharCode(e.slice(1,-1))})}function d(e){h=e,p=0}function v(){if(!h)return a;for(;;){if(p>=h.length)return a;var e=h.charAt(p);p++;if(l[e])return l[e];if(e=="A")return 0}return a}function m(e){return e=e.toString(16),e.length==1&&(e="0"+e),e="%"+e,unescape(e)}function g(e){d(e);var t="",n=new Array(4),r=!1;while(!r&&(n[0]=v())!=a&&(n[1]=v())!=a)n[2]=v(),n[3]=v(),t+=m(n[0]<<2&255|n[1]>>4),n[2]!=a?(t+=m(n[1]<<4&255|n[2]>>2),n[3]!=a?t+=m(n[2]<<6&255|n[3]):r=!0):r=!0;return t}var a=-1,f=new Array("A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","0","1","2","3","4","5","6","7","8","9","+","/"),l=new Array;for(var c=0;c<f.length;c++)l[f[c]]=c;var h,p;return{decrypt:r,decode:i,Str4ToLong:s,LongToStr4:o,unescCtrlCh:u,setBase64Str:d,readReverseBase64:v,ntos:m,decodeBase64:g}}),define("zc/registerUtil",["require","exports","module"],function(e,t,n){return{computechildpath:function(e){var t=e.charAt(0).charCodeAt(),n=t%30,r=n%8+2;return e.substring(n,n+r)},regCallMatchCookie:function(e){if(!e)return null;var t=/^(?:http(?:s){0,1}:\/\/){0,1}(?:[^\/]*?)([^\/\.]+(?:\.com\.cn|\.net\.cn|\.com|.cn|\.net|\.org|\.nom|\.co|\.firm|\.gen|\.idv|\.me))(?:[\?#\/].*){0,1}$/i,n=e.match(t);return n},end:""}}),define("lib/dom/isNode",["require","exports","module"],function(e,t,n){return function(e){return e!=undefined&&Boolean(e.nodeName)&&Boolean(e.nodeType)}}),define("lib/dom/isElement",["require","exports","module","lib/dom/isNode"],function(e,t,n){var r=e("lib/dom/isNode");return function(e){return r(e)&&e.nodeType==1}}),define("lib/dom/parseNode",["require","exports","module","lib/dom/sizzle","lib/util/each","lib/dom/isElement"],function(e,t,n){var r=e("lib/dom/sizzle"),i=e("lib/util/each"),s=e("lib/dom/isElement");return function(e,t,n){n=n==null?"node-name":n,e=e==null?document.body:e;var o={},u=r(t?">["+n+"]":"["+n+"]",e);return i(u,function(e,t){var r=e.getAttribute(n);o[r]==null?o[r]=e:s(o[r])?o[r]=[o[r],e]:o[r].push(e)}),o}}),define("lib/util/when",["require","exports","module"],function(e,t,n){function i(e,t,n,r){return s(e).then(t,n,r)}function s(e){return e instanceof o?e:u(e)}function o(e,t){this._message=e,this.inspect=t}function u(e){return l(function(t){t(e)})}function a(e){return i(e,d)}function f(){function r(r,i,s){e.resolve=e.resolver.resolve=function(e){return n?u(e):(n=!0,r(e),t)},e.reject=e.resolver.reject=function(e){return n?u(d(e)):(n=!0,i(e),t)},e.notify=e.resolver.notify=function(e){return s(e),e}}var e,t,n;return e={promise:V,resolve:V,reject:V,notify:V,resolver:{resolve:V,reject:V,notify:V}},e.promise=t=l(r),e}function l(e){return c(e,z.PromiseStatus&&z.PromiseStatus())}function c(e,t){function u(e,t,n,s){function o(r){r._message(e,t,n,s)}i?i.push(o):$(function(){o(r)})}function a(){return r?r.inspect():D()}function f(e){if(!i)return;var s=i;i=V,$(function(){r=g(n,e),t&&E(r,t),h(s,r)})}function l(e){f(d(e))}function c(e){if(i){var t=i;$(function(){h(t,m(e))})}}var n,r,i=[];n=new o(u,a),n._status=t;try{e(f,l,c)}catch(s){l(s)}return n}function h(e,t){for(var n=0;n<e.length;n++)e[n](t)}function p(e){return v(new b(e),function(){return M(e)})}function d(e){return v(new w(e),function(){return _(e)})}function v(e,t){return new o(function(t,n,r){try{r(e[t].apply(e,n))}catch(i){r(d(i))}},t)}function m(e){return new o(function(t,n,r,i){var s=n[2];try{i(typeof s=="function"?s(e):e)}catch(o){i(o)}})}function g(e,t){if(t===e)return d(new TypeError);if(t instanceof o)return t;try{var n=t===Object(t)&&t.then;return typeof n=="function"?y(n,t):p(t)}catch(r){return d(r)}}function y(e,t){return l(function(n,r){B(e,t,n,r)})}function b(e){this.value=e}function w(e){this.reason=e}function E(e,t){function n(){t.fulfilled()}function r(e){t.rejected(e)}e.then(n,r)}function S(e){return e&&typeof e.then=="function"}function x(e,t,n,r,s){return i(e,function(e){function o(n,r,s){function d(e){c(e)}function v(e){l(e)}var o,u,a,f,l,c,h,p;h=e.length>>>0,o=Math.max(0,Math.min(t,h)),a=[],u=h-o+1,f=[];if(!o)n(a);else{c=function(e){f.push(e),--u||(l=c=K,r(f))},l=function(e){a.push(e),--o||(l=c=K,n(a))};for(p=0;p<h;++p)p in e&&i(e[p],v,d,s)}}return l(o).then(n,r,s)})}function T(e,t,n,r){function i(e){return t?t(e[0]):e[0]}return x(e,1,i,n,r)}function N(e,t,n,r){return A(e,K).then(t,n,r)}function C(){return A(arguments,K)}function k(e){return A(e,M,_)}function L(e,t){return A(e,t)}function A(e,t,n){return i(e,function(e){function r(r,s,o){function c(e,a){i(e,t,n).then(function(e){u[a]=e,--f||r(u)},s,o)}var u,a,f,l;f=a=e.length>>>0,u=[];if(!f){r(u);return}for(l=0;l<a;l++)l in e?c(e[l],l):--f}return c(r)})}function O(e,t){var n=B(H,arguments,1);return i(e,function(e){var r;return r=e.length,n[0]=function(e,n,s){return i(e,function(e){return i(n,function(n){return t(e,n,s,r)})})},P.apply(e,n)})}function M(e){return{state:"fulfilled",value:e}}function _(e){return{state:"rejected",reason:e}}function D(){return{state:"pending"}}function $(e){F.push(e)===1&&j(J)}function J(){h(F),F=[]}function K(e){return e}var r=window;i.promise=l,i.resolve=u,i.reject=a,i.defer=f,i.join=C,i.all=N,i.map=L,i.reduce=O,i.settle=k,i.any=T,i.some=x,i.isPromise=S,i.isPromiseLike=S,o.prototype={then:function(e,t,n){var r,i;return r=arguments,i=this._message,c(function(e,t,n){i("when",r,e,n)},this._status&&this._status.observed())},otherwise:function(e){return this.then(V,e)},ensure:function(e){function t(){return u(e())}return typeof e=="function"?this.then(t,t).yield(this):this},yield:function(e){return this.then(function(){return e})},tap:function(e){return this.then(e).yield(this)},spread:function(e){return this.then(function(t){return N(t,function(t){return e.apply(V,t)})})},always:function(e,t){return this.then(e,e,t)}},b.prototype.when=function(e){return typeof e=="function"?e(this.value):this.value},w.prototype.when=function(e,t){if(typeof t=="function")return t(this.reason);throw this.reason};var P,H,B,j,F,I,q,R,U,z,W,X,V;return F=[],I=r.setTimeout,z=typeof console!="undefined"?console:i,typeof process=="object"&&process.nextTick?j=process.nextTick:(X=r.MutationObserver||r.WebKitMutationObserver)?j=function(e,t,n){var r=e.createElement("div");return(new t(n)).observe(r,{attributes:!0}),function(){r.setAttribute("x","x")}}(document,X,J):j=function(e){I(e,0)},q=Function.prototype,R=q.call,B=q.bind?R.bind(R):function(e,t){return e.apply(t,H.call(arguments,2))},U=[],H=U.slice,P=U.reduce||function(e){var t,n,r,i,s;s=0,t=Object(this),i=t.length>>>0,n=arguments;if(n.length<=1)for(;;){if(s in t){r=t[s++];break}if(++s>=i)throw new TypeError}else r=n[1];for(;s<i;++s)s in t&&(r=e(r,t[s],s,t));return r},i}),define("lib/dom/className",["require","exports","module","lib/dom/isElement","lib/util/each","lib/util/getType","lib/str/trim"],function(e,t,n){var r=e("lib/dom/isElement"),i=e("lib/util/each"),s=e("lib/util/getType"),o=e("lib/str/trim"),u=" ",a=t;a.has=function(e,t){if(o(t)=="")return!1;var n=e.className.replace(/\s+/g,u).split(/\s+/g);for(var r=0;r<n.length;r++)if(n[r]==t)return!0;return!1},a.add=function(e,t){if(s(e)=="array"){i(e,function(e){a.add(e,t)});return}if(s(t)=="array"){i(t,function(t){a.add(e,t)});return}if(!a.has(e,t)){var n=(e.className.replace(/\s+/g,u).split(/\s+/g).join(u)+u+t).split(/\s+/g),r={},f=[];i(n,function(e){if(e in r)return;r[e]=!0,f.push(e)}),e.className=o(f.join(u))}},a.remove=function(e,t){if(s(e)=="array"){i(e,function(e){a.remove(e,t)});return}if(s(t)=="array"){i(t,function(t){a.remove(e,t)});return}if(a.has(e,t)){var n=e.className.replace(/\s+/g,u).split(/\s+/g),r={},f=[];i(n,function(e){if(e in r||e==t)return;r[e]=!0,f.push(e)}),e.className=o(f.join(u))}},a.toggle=function(e,t,n){t=t==null?"":o(t),n=n==null?"":o(n);if(t==""&&n=="")return;if(t==""){a.toggle(e,n);return}if(s(e)=="array"){i(e,function(e){a.toggle(e,t,n)});return}var r=a.has(e,t);r?(a.remove(e,t),n!=""&&a.add(e,n)):(a.add(e,t),n!=""&&a.remove(e,n))}}),define("lib/dom/insertNode",["require","exports","module"],function(e,t,n){return function(e,t,n){typeof e=="string"&&(e=document.getElementById(e)),typeof t=="string"&&(t=document.getElementById(t)),n=n?n.toLowerCase():"beforeend";switch(n){case"beforebegin":e.parentNode.insertBefore(t,e);break;case"afterbegin":e.insertBefore(t,e.firstChild);break;case"beforeend":e.appendChild(t);break;case"afterend":e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t)}}}),define("lib/str/isEmpty",["require","exports","module","lib/str/trim"],function(e,t,n){var r=e("lib/str/trim");return function(e){return r(e).length==0}}),define("udb/shadowTextbox",["require","exports","module","lib/io/console","lib/comp/base","lib/dom/queryNode","lib/dom/className","lib/dom/insertNode","lib/evt/add","lib/json/merge","lib/str/isEmpty","lib/str/trim"],function(e,t,n){var r=e("lib/io/console"),i=e("lib/comp/base"),s=e("lib/dom/queryNode"),o=e("lib/dom/className"),u=e("lib/dom/insertNode"),a=e("lib/evt/add"),f=e("lib/json/merge"),l=e("lib/str/isEmpty"),c=e("lib/str/trim");return function(e,t){var n=i();t=f({className:"shadowText"},t||{});var r=null,h=null,p=null,d="placeholder"in document.createElement("input"),v={textFocus:function(){var e=c(r.textbox.value);e==p&&(r.textbox.value=""),o.remove(r.textbox,t.className)},textBlur:function(){var e=c(r.textbox.value);if(e==p||l(e))r.textbox.value=p,o.add(r.textbox,t.className)},passFocus:function(){r.textbox.value="",h.style.display="none",r.textbox.style.display="inline",r.textbox.focus()},passBlur:function(){var e=c(r.textbox.value);if(e==p||l(e))r.textbox.value="",h.value=p,r.textbox.style.display="none",h.style.display="inline"}},m=function(){},g=function(){},y={reset:function(){if(d){r.textbox.value="";return}r.textbox.type!="password"?(r.textbox.value=p,o.add(r.textbox,t.className)):(r.textbox.value="",h.value=p,r.textbox.style.display="none",h.style.display="inline")}},b=function(){r={textbox:s("input",e)||e},m(),g();if(d)return;p=r.textbox.getAttribute("placeholder");if(l(p))return;var n=r.textbox,i=c(n.value);if(n.type!="password")l(i)&&(n.value=p),i==p?o.add(n,t.className):o.remove(n,t.className),a(n,"focus",v.textFocus),a(n,"blur",v.textBlur);else{h=document.createElement("input"),h.type="text",h.style.display="none",u(n,h,"beforebegin");if(i==p||l(i))n.value="",n.style.display="none",h.style.display="inline",h.value=p;a(h,"focus",v.passFocus),a(n,"blur",v.passBlur)}};return n.init=b,n.reset=y.reset,n}}),define("lib/evt/remove",["require","exports","module","lib/util/getType","lib/util/each"],function(e,t,n){var r=e("lib/util/getType"),i=e("lib/util/each"),s=function(e,t,n,o){if(r(e)=="array"){var u=s;i(e,function(e,r){u(e,t,n,o)})}return e=typeof e=="string"?document.getElementById(e):e,e==null||typeof n!="function"?!1:(e.removeEventListener?e.removeEventListener(t,n,o===!0?!0:!1):e.detachEvent?(e.detachEvent("on"+t,n),o&&e.releaseCapture&&e.releaseCapture()):(e["on"+t]=null,o&&e.releaseCapture&&e.releaseCapture()),!0)};return s}),define("lib/evt/get",["require","exports","module"],function(e,t,n){var r=function(){if(document.addEventListener){var e=r,t;do{t=e.arguments[0];if(t&&/Event/.test(Object.prototype.toString.call(t)))return t}while(e=e.caller);return t}return window.event};return r}),define("lib/evt/stop",["require","exports","module","lib/evt/get"],function(e,t,n){var r=e("lib/evt/get");return function(e){return e=e||r(),e.preventDefault?(e.preventDefault(),e.stopPropagation()):(e.cancelBubble=!0,e.returnValue=!1),!1}}),define("lib/dom/contains",["require","exports","module"],function(e,t,n){return function(e,t){if(e===t)return!1;if(e.compareDocumentPosition)return(e.compareDocumentPosition(t)&16)===16;if(e.contains&&t.nodeType===1)return e.contains(t);while(t=t.parentNode)if(e===t)return!0;return!1}}),define("lib/util/scrollPos",["require","exports","module"],function(e,t,n){return function(e){e=e||document;var t=e.documentElement,n=e.body;return{top:Math.max(window.pageYOffset||0,t.scrollTop,n.scrollTop),left:Math.max(window.pageXOffset||0,t.scrollLeft,n.scrollLeft)}}}),define("lib/dom/getPosition",["require","exports","module","lib/dom/contains","lib/util/scrollPos"],function(e,t,n){var r=e("lib/dom/contains"),i=e("lib/util/scrollPos"),s=function(e){var t=e.getBoundingClientRect(),n=i(),r=e.ownerDocument.body,s=e.ownerDocument.documentElement,o=s.clientTop||r.clientTop||0,u=s.clientLeft||r.clientLeft||0;return{left:t.left+n.left-u,top:t.top+n.top-o}};return function(e,t){return e=typeof e=="string"?document.getElementById(e):e,t=typeof t=="string"?document.getElementById(t):t,r(e.ownerDocument.body,e)?"getBoundingClientRect"in e?t===undefined?s(e):(e=s(e),t=s(t),{left:e.left-t.left,top:e.top-t.top}):{top:NaN,left:NaN}:{top:NaN,left:NaN}}}),define("lib/io/imageLoader",["require","exports","module"],function(e,t,n){return function(e,t){var n=new Image;n.src=e,n.complete?t(n):(n.onload=function(){n.onload=null,n.onerror=null,t(n)},n.onerror=function(){n.onload=null,n.onerror=null,t(null)})}}),define("lib/dom/setStyle",["require","exports","module","lib/str/trim"],function(e,t,n){function u(e){return!isNaN(parseFloat(e))&&isFinite(e)}function a(){return a.rs||(a.rs={opacity:"opacity"in i&&/^0.5/.test(i.opacity),cssFloat:"cssFloat"in i&&!!i.cssFloat})}function f(e){return e.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(e,t){return t.toUpperCase()})}function l(e){return e.replace(/^ms/,"Ms").replace(/([A-Z])/g,"-$1").toLowerCase()}function c(e){if(e in i)return e;var t=e.charAt(0).toUpperCase()+e.slice(1),n=e,r=["Webkit","O","Moz","ms"],s=r.length;while(s--){e=r[s]+t;if(e in i)return e}return n}function h(e){return e=f(e),o[e]||(o[e]=c(e))}function p(e,t,n){e=typeof e=="string"?document.getElementById(e):e;var r;t=h(t),t in s&&(r=s[t](e,n)),r===undefined&&(e.style[t]=n)}function d(e,t){var n,r,i,o,u=[];e=typeof e=="string"?document.getElementById(e):e;for(i in t)o=undefined,n=i,r=t[i],n=h(n),n in s&&(o=s[n](e,r)),o===undefined&&u.push([l(n),r].join(":"));e.style.cssText+=";"+u.join(";")+";"}var r=e("lib/str/trim"),i=document.createElement("DIV").style;i.cssText="float:left;opacity:.5";var s={opacity:function(e,t){if(!a().opacity){var n=/alpha\([^)]*\)/i,i=e.style,s=e.currentStyle,o=u(t)?"alpha(opacity="+t*100+")":"",f=s&&s.filter||i.filter||"";if(!s||!s.hasLayout)i.zoom=1;if((t>=1||t==="")&&r(f.replace(n,""))===""&&i.removeAttribute){i.removeAttribute("filter");if(t===""||s&&!s.filter)return!0}return i.filter=n.test(f)?f.replace(n,o):f+" "+o,!0}}},o={"float":a().cssFloat?"cssFloat":"styleFloat"};return function(){arguments.length==2?d(arguments[0],arguments[1]):p(arguments[0],arguments[1],arguments[2])}}),define("lib/util/color",["require","exports","module","lib/util/each"],function(e,t,n){var r=e("lib/util/each"),i=/^#([a-fA-F0-9]{3,8})$/,s=/^rgb[a]?\s*\(/,o=/([0-9\.]+)/ig,u=/([a-fA-F0-9]{2})/ig,a=function(e){var t=[],n=[];return i.test(e)?(n=e.match(i),n[1].length<=4?(t=[],r(n[1].split(""),function(e,n){t.push(parseInt(e+e,16))})):n[1].length<=8&&(t=[],r(n[1].match(u),function(e,n){t.push(parseInt(e,16))})),t):s.test(e)?(n=e.match(o),t=[],r(n,function(e,n){t.push(parseInt(e,10))}),t):!1};return function(e){var t=a(e);if(!t)return!1;var n={};return n.getR=function(){return t[0]},n.getG=function(){return t[1]},n.getB=function(){return t[2]},n.getA=function(){return t[3]},n}}),define("lib/util/arrayMap",["require","exports","module","lib/util/each"],function(e,t,n){function i(e,t){var n=[];return r(e,function(e,r,i){n[r]=t(e,r,i)}),n}var r=e("lib/util/each");return function(){var e=[].map;return e?function(t,n){return e.call(t,n)}:i}()}),define("lib/ani/animate",["require","lib/io/console","lib/util/when","lib/util/color","lib/dom/getStyle","lib/dom/setStyle","lib/util/arrayMap","lib/util/getType"],function(e){function m(e,n){return e in v&&t.error("ani.animate: 该效果名已经存在"),v[e]=n}function y(e){return p.style.cssText="-webkit-transform:"+e+";-moz-transform:"+e+";-o-transform:"+e+";transform:"+e+d,document.body.appendChild(p),e=i(p,"transform"),p.parentNode.removeNode(p),p.style.cssText="",e}function b(e){return p.style.cssText="background-color:"+e+";_background:"+e+d,document.body.appendChild(p),e=i(p,"background-color"),p.parentNode.removeNode(p),p.style.cssText="",e}function w(e){var t,n,r,i=e[0],s=e[1],o=e[2],u=e[3];return i*u-s*o?(t=Math.sqrt(i*i+s*s),i/=t,s/=t,r=i*o+s*u,o-=i*r,u-=s*r,n=Math.sqrt(o*o+u*u),o/=n,u/=n,r/=n,i*u<s*o&&(i=-i,s=-s,r=-r,t=-t)):t=n=r=0,[["translate",[+e[4],+e[5]],"px"],["rotate",[Math.atan2(s,i)],"rad"],["skewX",[Math.atan(r)],"rad"],["scale",[t,n],""]]}function E(e){var t=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F"];return isNaN(e)?"00":t[(e-e%16)/16]+t[e%16]}function S(e,t,n,r,i,u){var a,f,l={};for(f in r){a=undefined;if(/color/i.test(f)){var c=o(["R","G","B","A"],function(e){e="get"+e;var s=r[f][1][e]()?r[f][1][e]():0,o=i[f][1][e]()?i[f][1][e]():0;return s+(o-s)*v[t](n)});r[f][1]==="rgba"?a="rbga("+rbga.join(",")+")":a="#"+E(c[0]|0)+E(c[1]|0)+E(c[2]|0)}else if(/transform/i.test(f)){var h;a=o(r[f],function(e,s){var u=r[f][s][0],a=o(r[f][s][1],function(e,o){var u=r[f][s][1][o],a=i[f][s][1][o];return(u+(a-u)*v[t](n)).toFixed(5)+r[f][s][2]}).join(",");return u+"("+a+")"}),a=a.join(" ")}else a=r[f]+(i[f]-r[f])*v[t](n)+u[f];l[f]=a}s(e,l)}function x(e,t){function u(){if(o===!0)return;var s=+(new Date);n=(s-r)/e;if(s>=i)return o=!0,t(1);t(n),g(u)}function a(){o===!1&&(o=!0,s=+(new Date))}function f(){var e=+(new Date);o===!0&&(r+=e-s,i+=e-s,o=!1,u())}var n=0,r=+(new Date),i=+(new Date)+e,s,o=!1;return u(),t(n),{stop:a,goOn:f}}function T(e,t,n){var o,u,a,f,l={};if(/color/i.test(t))return u=i(e,t),a=b(n),f=/rgba/.test(a)||/rgba/.test(u)?"rgba":"#",l.start=[f,r(u)],l.end=[f,r(a)],l;if(/transform/i.test(t))return u=i(e,t),a=y(n),u=u==="none"?"matrix(1,0,0,1,0,0)":u,a=a==="none"?"matrix(1,0,0,1,0,0)":a,l.start=w(u.match(h)),l.end=w(a.match(h)),l;o=parseFloat(i(e,t)),u=c.exec(i(e,t)),a=c.exec(n),f=a&&a[3];var p=1,d=20;if(u&&u[3]!==f){f=f||u[3],a=a||[],u=+o||1;do p=p||".5",u/=p,s(e,t,u+f);while(p!==(p=i(e,t)/o)&&p!==1&&--d)}return a&&(u=l.start=+u||+o||0,l.unit=f,l.end=a[1]?u+(a[1]+1)*a[2]:+a[2]),l}function N(e){var t=n.defer(),r=x(e,function(e){t.notify(e),e==1&&t.resolve(e)});return{promise:t.promise,stop:r.stop,goOn:r.goOn}}function C(e,t,n,r,i){var s={},o={},l={},c,h;i=arguments[arguments.length-1],i=u(i)=="function"?i:function(){},u(n)!="number"&&(r=n,n=f),r=r in v?r:a;for(c in t)h=T(e,c,t[c]),s[c]=h.start,o[c]=h.end,l[c]=h.unit;var p=N(n);return p.promise.then(i,function(){},function(t){S(e,r,t,s,o,l)}),p}function L(e,t){this.promise=e,this.key=t}var t=e("lib/io/console"),n=e("lib/util/when"),r=e("lib/util/color"),i=e("lib/dom/getStyle"),s=e("lib/dom/setStyle"),o=e("lib/util/arrayMap"),u=e("lib/util/getType"),a="linear",f=1e3,l=/(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/,c=new RegExp("^([+-]?)("+l.source+")([a-z%]*)$","i"),h=/([0-9\.\-]+)/ig,p=document.createElement("DIV"),d=";height:0;width:0;visibility:hidden;position:absolute;top:-1000px;left:-1000px;",v={linear:function(e){return e},"ease-in":function(e){return 1-Math.cos(e*Math.PI/2)},"ease-out":function(e){return 1-v["ease-in"](1-e)},"ease-in-out":function(e){return e<.5?v["ease-in"](e*2)/2:1-v["ease-out"](e*-2+2)/2}},g=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),k={};return L.prototype.animate=L.prototype.then=function(e,t,r,i){var s=this.key,o=n.defer();return this.promise.then(function(n){k[s]=C(n,e,t,r,function(){i&&i(),o.resolve(n)})}),new L(o.promise,s)},L.prototype.stop=function(){k&&k[this.key]&&k[this.key].stop()},L.prototype.goOn=function(){k&&k[this.key]&&k[this.key].goOn()},L.prototype.destory=function(){delete k[this.key]},L.init=function(e){var t=n.defer();return t.resolve(e),new L(t.promise,(new Date).getTime().toString()+Math.floor(Math.random()*1e4))},C.chain=L.init,C.addEasing=m,C}),define("lib/util/base64Encoder",["require","exports","module"],function(e,t,n){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i=function(e){e=e.replace(/\r\n/g,"\n");var t="";for(var n=0;n<e.length;n++){var r=e.charCodeAt(n);r<128?t+=String.fromCharCode(r):r>127&&r<2048?(t+=String.fromCharCode(r>>6|192),t+=String.fromCharCode(r&63|128)):(t+=String.fromCharCode(r>>12|224),t+=String.fromCharCode(r>>6&63|128),t+=String.fromCharCode(r&63|128))}return t},s=function(e){var t="",n=0,r=c1=c2=0;while(n<e.length)r=e.charCodeAt(n),r<128?(t+=String.fromCharCode(r),n++):r>191&&r<224?(c2=e.charCodeAt(n+1),t+=String.fromCharCode((r&31)<<6|c2&63),n+=2):(c2=e.charCodeAt(n+1),c3=e.charCodeAt(n+2),t+=String.fromCharCode((r&15)<<12|(c2&63)<<6|c3&63),n+=3);return t},o=t;o.encode=function(e){var t="",n,s,o,u,a,f,l,c=0;e=i(e);while(c<e.length)n=e.charCodeAt(c++),s=e.charCodeAt(c++),o=e.charCodeAt(c++),u=n>>2,a=(n&3)<<4|s>>4,f=(s&15)<<2|o>>6,l=o&63,isNaN(s)?f=l=64:isNaN(o)&&(l=64),t=t+r.charAt(u)+r.charAt(a)+r.charAt(f)+r.charAt(l);return t},o.decode=function(e){var t="",n,i,o,u,a,f,l,c=0;e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(c<e.length)u=r.indexOf(e.charAt(c++)),a=r.indexOf(e.charAt(c++)),f=r.indexOf(e.charAt(c++)),l=r.indexOf(e.charAt(c++)),n=u<<2|a>>4,i=(a&15)<<4|f>>2,o=(f&3)<<6|l,t+=String.fromCharCode(n),f!=64&&(t+=String.fromCharCode(i)),l!=64&&(t+=String.fromCharCode(o));return t=s(t),t}}),define("lib/util/browser",["require","exports","module"],function(e,t,n){var r=navigator.userAgent.toLowerCase(),i="",s,o,u,a,f,l=function(){var e=["240x320","acer","acoon","acs-","abacho","ahong","airness","alcatel","amoi","android","anywhereyougo.com","applewebkit/525","applewebkit/532","asus","audio","au-mic","avantogo","becker","benq","bilbo","bird","blackberry","blazer","bleu","cdm-","compal","coolpad","danger","dbtel","dopod","elaine","eric","etouch","fly ","fly_","fly-","go.web","goodaccess","gradiente","grundig","haier","hedy","hitachi","htc","huawei","hutchison","inno","ipad","ipaq","ipod","jbrowser","kddi","kgt","kwc","lenovo","lg ","lg2","lg3","lg4","lg5","lg7","lg8","lg9","lg-","lge-","lge9","longcos","maemo","mercator","meridian","micromax","midp","mini","mitsu","mmm","mmp","mobi","mot-","moto","nec-","netfront","newgen","nexian","nf-browser","nintendo","nitro","nokia","nook","novarra","obigo","palm","panasonic","pantech","philips","phone","pg-","playstation","pocket","pt-","qc-","qtek","rover","sagem","sama","samu","sanyo","samsung","sch-","scooter","sec-","sendo","sgh-","sharp","siemens","sie-","softbank","sony","spice","sprint","spv","symbian","tablet","talkabout","tcl-","teleca","telit","tianyu","tim-","toshiba","tsm","up.browser","utec","utstar","verykool","virgin","vk-","voda","voxtel","vx","wap","wellco","wig browser","wii","windows ce","wireless","xda","xde","zte"];for(var t=0;t<e.length;t++)if(r.indexOf(e[t])!=-1)return!0;return!1};try{i=window.external||""}catch(c){i=""}var h=function(e){var t=0;return parseFloat(e.replace(/\./g,function(){return t++==1?"":"."}))};try{/windows|win32/i.test(r)?f="windows":/macintosh/i.test(r)?f="macintosh":/rhino/i.test(r)&&(f="rhino"),(o=r.match(/applewebkit\/([^\s]*)/))&&o[1]?(s="webkit",a=h(o[1])):(o=r.match(/presto\/([\d.]*)/))&&o[1]?(s="presto",a=h(o[1])):(o=r.match(/msie\s([^;]*)/))?(s="trident",a=1,(o=r.match(/trident\/([\d.]*)/))&&o[1]&&(a=h(o[1]))):(o=r.match(/trident/))?(s="trident",a=1,(o=r.match(/trident\.*rv:(\d+)/))&&o[1]&&(a=h(o[1]))):/gecko/.test(r)&&(s="gecko",a=1,(o=r.match(/rv:([\d.]*)/))&&o[1]&&(a=h(o[1]))),/world/.test(r)?u="world":/360se/.test(r)?u="360":/maxthon/.test(r)||typeof i.max_version=="number"?u="maxthon":/tencenttraveler\s([\d.]*)/.test(r)?u="tt":/se\s([\d.]*)/.test(r)&&(u="sogou")}catch(p){}var d={OS:f,CORE:s,Version:a,EXTRA:u?u:!1,IE:/msie/.test(r)||/trident/.test(r),OPERA:/opera/.test(r),MOZ:/gecko/.test(r)&&!/(compatible|webkit|trident)/.test(r),IE5:/msie 5 /.test(r),IE55:/msie 5.5/.test(r),IE6:/msie 6/.test(r),IE7:/msie 7/.test(r),IE8:/msie 8/.test(r),IE9:/msie 9/.test(r),IE10:/msie 10/.test(r),IE11:/trident.*rv:11/.test(r),SAFARI:!/chrome\/([\d.]*)/.test(r)&&/\/([\da-f.]*) safari/.test(r),CHROME:/chrome\/([\d.]*)/.test(r),IPAD:/\(ipad/i.test(r),IPHONE:/\(iphone/i.test(r),ITOUCH:/\(itouch/i.test(r),MOBILE:l()},v=["IE5","IE55","IE6","IE7","IE8","IE9","IE10","IE11","SAFARI","OPERA","MOZ","CHROME"],m="OTHER";for(var g=0;g<v.length;g++)if(d[v[g]]){m=v[g];break}return d.type=m,d}),define("udb/dragVerify",["require","exports","module","lib/io/console","lib/comp/base","lib/dom/parseNode","lib/dom/queryNode","lib/evt/add","lib/evt/remove","lib/evt/stop","lib/io/ajax","lib/dom/getPosition","lib/io/imageLoader","lib/util/each","lib/dom/getStyle","lib/dom/setStyle","lib/util/scrollPos","lib/ani/animate","lib/util/base64Encoder","lib/util/browser","lib/dom/className"],function(e,t,n){var r=e("lib/io/console"),i=e("lib/comp/base"),s=e("lib/dom/parseNode"),o=e("lib/dom/queryNode"),u=e("lib/evt/add"),a=e("lib/evt/remove"),f=e("lib/evt/stop"),l=e("lib/io/ajax"),c=e("lib/dom/getPosition"),h=e("lib/io/imageLoader"),p=e("lib/util/each"),d=e("lib/dom/getStyle"),v=e("lib/dom/setStyle"),m=e("lib/util/scrollPos"),g=e("lib/ani/animate"),y=e("lib/util/base64Encoder"),b=e("lib/util/browser"),w=e("lib/dom/className");return function(e,t){var n=i(),r=null,o=[],E=0,S={},x=0,T=260,N=14,C=t.viewMode!==0?1:0,k=null,L=null,A={},O=!1,M=!1,_=20,D=-1,P=null,H=0,B=!1,j=10,F="makeParams",I={touchStart:function(e){if(!O||B)return;return o=[],startDragTime=(new Date).getTime(),S={x:e.touches[0].pageX,y:e.touches[0].pageY,px:E,t:(new Date).getTime()},o.push(S),U.setStatus("lock"),w.add(r.dragPanel,"dragPanel_hover"),M||(M=!0,r.dragImage.style.backgroundImage="url("+A.cimg+")",r.bgImage.style.backgroundImage="url("+A.mimg+")"),u(r.dragPanel,"touchmove",I.touchMove),u(r.dragPanel,"touchend",I.touchEnd),f()},touchMove:function(e){return U.updateView(e.touches[0].pageX,e.touches[0].pageY),f()},touchEnd:function(e){return w.remove(r.dragPanel,"dragPanel_hover"),a(r.dragPanel,"touchmove",I.touchMove),a(r.dragPanel,"touchend",I.touchEnd),U.send(),f()},viewMode0MouseDown:function(e){if(!O||B)return;return o=[],k=m(),startDragTime=(new Date).getTime(),S={x:e.clientX+k.left,y:e.clientY+k.top,px:E,t:(new Date).getTime()},o.push(S),U.setStatus("lock"),w.add(r.dragPanel,"dragPanel_hover"),M||(M=!0,r.dragImage.style.backgroundImage="url("+A.cimg+")",r.bgImage.style.backgroundImage="url("+A.mimg+")"),u(document,"mousemove",I.viewMode0MouseMove),u(document,"mouseup",I.viewMode0MouseUp),f()},viewMode0MouseMove:function(e){return U.updateView(e.clientX+k.left,e.clientY+k.top),f()},viewMode0MouseUp:function(e){return w.remove(r.dragPanel,"dragPanel_hover"),U.updateView(e.clientX+k.left,e.clientY+k.top),a(document,"mousemove",I.viewMode0MouseMove),a(document,"mouseup",I.viewMode0MouseUp),U.send(),f()},viewMode1MouseOver:function(e){U.showLayer()},viewMode1MouseOut:function(e){U.hideLayer()},viewMode1MouseDown:function(e){if(!O||B)return;return o=[],k=m(),startDragTime=(new Date).getTime(),S={x:e.clientX+k.left,y:e.clientY+k.top,px:E,t:(new Date).getTime()},o.push(S),U.setStatus("lock"),w.add(r.dragPanel,"dragPanel_hover"),M||(M=!0,r.dragImage.style.backgroundImage="url("+A.cimg+")",r.bgImage.style.backgroundImage="url("+A.mimg+")"),a(r.dragPanel,"mouseout",I.viewMode1MouseOut),u(document,"mousemove",I.viewMode1MouseMove),u(document,"mouseup",I.viewMode1MouseUp),f()},viewMode1MouseMove:function(e){return U.updateView(e.clientX+k.left,e.clientY+k.top),f()},viewMode1MouseUp:function(e){var t={x:e.clientX+k.left,y:e.clientY+k.top};w.remove(r.dragPanel,"dragPanel_hover"),U.updateView(t.x,t.y),a(document,"mousemove",I.viewMode1MouseMove),a(document,"mouseup",I.viewMode1MouseUp),u(r.dragPanel,"mouseout",I.viewMode1MouseOut);var n=c(r.dragPanel),i=!1;return t.x>=n.left&&t.x<=n.left+r.dragPanel.offsetWidth&&t.y>=n.top&&t.y<=n.top+r.dragPanel.offsetHeight?i=!1:i=!0,U.send(i),f()},cancelSelect:function(){return f(),!1}},q=function(){P=g.chain(r.layer)},R=function(){b.MOBILE?u(r.dragPanel,"touchstart",I.touchStart):C==0?u(r.dragPanel,"mousedown",I.viewMode0MouseDown):(u(r.dragPanel,"mouseover",I.viewMode1MouseOver),u(r.dragPanel,"mouseout",I.viewMode1MouseOut),u(r.dragPanel,"mousedown",I.viewMode1MouseDown)),b.IE&&u(e,"selectstart",I.cancelSelect)},U={showLayer:function(){if(D=="show")return;if(D=="hide"){P.stop(),U.showLayer();return}H!=0&&(clearTimeout(H),H=0);var t=0;if(d(r.layer,"display")=="block"){t=d(r.layer,"opacity");if(t==1)return}else r.layer.style.display="block",v(r.layer,"opacity",0),(b.IE6||b.IE7)&&v(e,"margin-top","1px");v(r.layer,{opacity:t}),D="show",P.animate({opacity:1},500,null,function(){D=-1})},hideLayer:function(){if(D=="hide")return;if(D=="show"){P.stop(),U.hideLayer();return}H!=0&&(clearTimeout(H),H=0),H=setTimeout(function(){H=0,v(r.layer,{opacity:1}),D="hide",P.animate({opacity:0},500,null,function(){r.layer.style.display="none",(b.IE6||b.IE7)&&v(e,"margin-top","0px"),D=-1})},500)},reset:function(e,i){U.setStatus("lock"),O=!1,B=!1,l({url:t.baseInfoURL+"?appid="+t.appid+"&random="+(new Date).getTime(),method:"get",onSuccess:function(s){L={simg:-1,mimg:-1,cimg:-1};var u=(new Date).getTime();A={simg:s.obj.simg+"?appid="+t.appid+"&random="+u,mimg:s.obj.mimg+"?appid="+t.appid+"&random="+u,cimg:s.obj.cimg+"?appid="+t.appid+"&random="+u,submit:s.obj.submit},h(A.simg,function(t){t!=null?(L.simg=(new Date).getTime()-u,u=(new Date).getTime(),M||(r.bgImage.style.backgroundImage="url("+A.simg+")"),h(A.mimg,function(t){t!=null?(L.mimg=(new Date).getTime()-u,u=(new Date).getTime(),h(A.cimg,function(t){t!=null?(L.cimg=(new Date).getTime()-u,e&&M&&(r.bgImage.style.backgroundImage="url("+A.mimg+")",r.dragImage.style.backgroundImage="url("+A.cimg+")"),function(e){var t=e.match(/\:\d*([a-z]).+?\.do/i);j=t[1].toLowerCase().charCodeAt(0)-86,U[F]=function(){var e=[],t=c(r.bgImage).left,n=U.makeArray(o);p(n,function(n){e.push(parseInt(n.x+_,10)),e.push(parseInt(n.y-_,10)),e.push(parseInt(n.px+_+t,10)),e.push(parseInt(n.t-_-1413447127e3,10))}),e.push(parseInt(t,10)),p(e,function(t,n){e[n]=e[n].toString(j)});var i=j%3+3,s=e.slice(e.length-i);return e=s.concat(e),e.length-=i,y.encode(e.join("|"))}}(s.obj.submit),O=!0,i&&i()):(n.fire("error","加载验证码图片失败"),i&&i())})):(n.fire("error","加载验证码图片失败"),i&&i())})):(n.fire("error","加载验证码图片失败"),i&&i())})},onError:function(){n.fire("error","网络连接失败，请稍候再试"),i&&i()}})},verify:function(e){e(B,B?null:"请拖动验证码完成验证")},getData:function(){return{}},updateView:function(e,t){var n={x:e,y:t,t:(new Date).getTime()},i=n.x-S.x,s=x+i;s<0&&(s=0),s>maxLeft&&(s=maxLeft),r.dragPanel.style.left=s+"px",x=s,n.px=(T-N)*(s/(r.layer.offsetWidth-r.dragPanel.offsetWidth)),S=n,E=n.px,r.dragImage.style.left=n.px+N+"px",o.push(n)},setStatus:function(e){switch(e){case"ok":r.dragStatus.className="dragStatus dragStatus_ok";break;case"err":r.dragStatus.className="dragStatus dragStatus_err";break;default:r.dragStatus.className="dragStatus"}},initView:function(){b.MOBILE||C==0?(w.remove(e,"m_float_dragVerify"),U.reset()):w.add(e,"m_float_dragVerify")},makeArray:function(e){var t=e.length,n=[],r=0,i=(t-t%4)/4;if(i==0)return e;for(var r=0;r<t;r+=i)n.push(e[r]);return t%5&&n.push(e.pop()),n},makeParams:function(){return o.join("|")},showError:function(e,t,n){var i=0,s=document.createElement("span");s.className="errTip",v(s,{left:N+"px",opacity:i,width:T-2+"px",overflowY:"hidden"}),s.innerHTML="<span class='icon'>"+e+"：</span>"+t,r.layerB.appendChild(s),v(r.layer,{opacity:0,height:0}),P.animate({opacity:1,height:24},500,null,function(){setTimeout(function(){v(r.layer,{opacity:1,height:24}),P.animate({opacity:0,height:0},500,null,function(){r.layerB.removeChild(s),n&&n()})},1e3)})},send:function(e){O=!1,l({url:A.submit,method:"post",data:{passtime:(new Date).getTime()-startDragTime,imgload:L.simg+","+L.mimg+","+L.cimg,a:U.makeParams(),appid:t.appid},onSuccess:function(t){if(t.code=="0")U.setStatus("ok"),O=!0,B=!0;else switch(t.code){case"1":U.setStatus("err"),U.flashCImg(),U.showError("验证失败","拖动滑块将悬浮图像正确拼合",function(){O=!0,e&&U.hideLayer()});break;case"2":U.setStatus("err"),U.flashCImg(),U.showError("尝试过多","系统正在尝试刷新验证图片",function(){O=!0,U.reset(!0,function(){e&&U.hideLayer()})});break;default:O=!0,U.setStatus("lock"),n.fire("error",t.msg),e&&U.hideLayer()}},onError:function(){n.fire("error","网络连接失败，请稍候再试"),O=!0,e&&U.hideLayer()}})},flashCImg:function(e){var t=!0,n=0,i=setInterval(function(){r.dragImage.style.display=t?"none":"inline",t=!t,n++,n==6&&(clearInterval(i),e&&e())},100)}},z=function(){r=s(e),q(),R(),U.initView(),maxLeft=r.dragArea.offsetWidth-r.dragPanel.offsetWidth};return n.init=z,n.reset=U.reset,n.verify=U.verify,n.getData=U.getData,n}}),define("udb/fastVerify",["require","exports","module","lib/io/console","lib/comp/base","lib/io/ajax"],function(e,t,n){var r=e("lib/io/console"),i=e("lib/comp/base"),s=e("lib/io/ajax");return function(e){var t=i(),n=!1,r=3,o={},u=function(){},a=function(){},f={reset:function(){},verify:function(e){e(n,n?null:"请拖动验证码完成验证")},getData:function(){return{}},gt_custom_ajax:function(r,i){if(r==1){n=!0;var o=i(".geetest_challenge").value,u=i(".geetest_validate").value,a=i(".geetest_seccode").value,f={geetest_challenge:o,geetest_validate:u,geetest_seccode:a,appid:e.appid};s({url:e.checkURL||"/geetestVcode/ckVcode.do",method:"post",data:f,onSuccess:function(e){e.code!="0"&&t.fire("error",e.msg)},onError:function(){t.fire("error","网络连接失败，请稍候再试")}})}}},l=function(){u(),a()};return t.init=l,t.reset=f.reset,t.verify=f.verify,t.getData=f.getData,window.gt_custom_ajax=f.gt_custom_ajax,t}}),define("lib/dom/insertHTML",["require","exports","module","lib/io/console"],function(e,t,n){var r=e("lib/io/console");return function(e,t,n){typeof e=="string"&&(e=document.getElementById(e)),n=n?n.toLowerCase():"beforeend";if("insertAdjacentHTML"in e)switch(n){case"beforebegin":return e.insertAdjacentHTML("BeforeBegin",t),e.previousSibling;case"afterbegin":return e.insertAdjacentHTML("AfterBegin",t),e.firstChild;case"beforeend":return e.insertAdjacentHTML("BeforeEnd",t),e.lastChild;case"afterend":return e.insertAdjacentHTML("AfterEnd",t),e.nextSibling}else{var i=e.ownerDocument.createRange(),s;switch(n){case"beforebegin":return i.setStartBefore(e),s=i.createContextualFragment(t),e.parentNode.insertBefore(s,e),e.previousSibling;case"afterbegin":return e.firstChild?(i.setStartBefore(e.firstChild),s=i.createContextualFragment(t),e.insertBefore(s,e.firstChild),e.firstChild):(e.innerHTML=t,e.firstChild);case"beforeend":return e.lastChild?(i.setStartAfter(e.lastChild),s=i.createContextualFragment(t),e.appendChild(s),e.lastChild):(e.innerHTML=t,e.lastChild);case"afterend":return i.setStartAfter(e),s=i.createContextualFragment(t),e.parentNode.insertBefore(s,e.nextSibling),e.nextSibling}}return r.error("无法将HTML代码插入到节点"+n+"(insertHTML)"),!1}}),define("lib/dom/dataset",["require","exports","module"],function(e,t,n){var r=t,i=function(e){return"data-"+e.replace(/([A-Z]|(?:^\d+))/g,function(e,t){return"-"+t.toLowerCase()})};r.get=function(e,t){if("dataset"in e)return e.dataset[t];var n=i(t),r=e.attributes,s=r.length;for(var o=0;o<s;o++)if(r[o].name==n)return r[o].value},r.set=function(e,t,n){if("dataset"in e)e.dataset[t]=n;else{var r=i(t);e.setAttribute(r,n)}},r.remove=function(e,t){if("dataset"in e)delete e.dataset[t];else{var n=i(t);e.removeAttribute(n)}}}),define("udb/mobileFixSelect",["require","exports","module","lib/io/console","lib/json/merge","lib/dom/insertHTML","lib/dom/getStyle","lib/dom/parseNode","lib/evt/add","lib/dom/className","lib/dom/dataset"],function(e,t,n){var r=e("lib/io/console"),i=e("lib/json/merge"),s=e("lib/dom/insertHTML"),o=e("lib/dom/getStyle"),u=e("lib/dom/parseNode"),a=e("lib/evt/add"),f=e("lib/dom/className"),l=e("lib/dom/dataset"),c=function(e){this.configs=i(c.defaults,e),this.init()};return c.defaults={target:document.body,position:"beforebegin"},c.prototype={constructor:c,init:function(){this.target=this.configs.target,this.mobileFix="",this.nodeList=null,this.selectOption=null,this.create(),this.attach()},create:function(){var e="",t="",n="",r=[{country:"香港",fletter:"X",mobilefix:"00852"},{country:"澳门",fletter:"A",mobilefix:"00853"},{country:"台湾",fletter:"T",mobilefix:"00886"},{country:"日本",fletter:"R",mobilefix:"0081"},{country:"韩国",fletter:"H",mobilefix:"0082"},{country:"中国大陆",fletter:"Z",mobilefix:"0086"},{country:"阿尔巴尼亚",fletter:"A",mobilefix:"00355"},{country:"阿尔及利亚",fletter:"A",mobilefix:"00213"},{country:"阿富汗",fletter:"A",mobilefix:"0093"},{country:"阿根廷",fletter:"A",mobilefix:"0054"},{country:"阿联酋",fletter:"A",mobilefix:"00971"},{country:"阿鲁巴岛",fletter:"A",mobilefix:"00297"},{country:"阿曼",fletter:"A",mobilefix:"00968"},{country:"阿塞拜疆",fletter:"A",mobilefix:"00994"},{country:"埃及",fletter:"A",mobilefix:"00247"},{country:"埃塞俄比亚",fletter:"A",mobilefix:"0020"},{country:"爱尔兰",fletter:"A",mobilefix:"00353"},{country:"爱沙尼亚",fletter:"A",mobilefix:"00372"},{country:"安道尔",fletter:"A",mobilefix:"00376"},{country:"安哥拉",fletter:"A",mobilefix:"00244"},{country:"安提瓜岛",fletter:"A",mobilefix:"001264"},{country:"奥地利",fletter:"A",mobilefix:"0043"},{country:"澳大利亚",fletter:"A",mobilefix:"0061"},{country:"巴布新几内亚",fletter:"B",mobilefix:"00675"},{country:"巴哈马群岛",fletter:"B",mobilefix:"001242"},{country:"巴基斯坦",fletter:"B",mobilefix:"0092"},{country:"巴拉圭",fletter:"B",mobilefix:"00595"},{country:"巴勒斯坦",fletter:"B",mobilefix:"00970"},{country:"巴林",fletter:"B",mobilefix:"00973"},{country:"巴拿马",fletter:"B",mobilefix:"00507"},{country:"巴西",fletter:"B",mobilefix:"0055"},{country:"白俄罗斯",fletter:"B",mobilefix:"00375"},{country:"百慕大",fletter:"B",mobilefix:"001441"},{country:"保加利亚",fletter:"B",mobilefix:"00359"},{country:"贝宁",fletter:"B",mobilefix:"00229"},{country:"比利时",fletter:"B",mobilefix:"0032"},{country:"冰岛",fletter:"B",mobilefix:"00354"},{country:"波多黎各",fletter:"B",mobilefix:"001809"},{country:"波兰",fletter:"B",mobilefix:"0048"},{country:"波斯尼亚和黑塞哥维那",fletter:"B",mobilefix:"00387"},{country:"玻利维亚",fletter:"B",mobilefix:"00591"},{country:"伯利兹",fletter:"B",mobilefix:"00501"},{country:"博茨瓦纳",fletter:"B",mobilefix:"00267"},{country:"不丹",fletter:"B",mobilefix:"00975"},{country:"布吉纳法索",fletter:"B",mobilefix:"00226"},{country:"布隆迪",fletter:"B",mobilefix:"00257"},{country:"赤道几内亚",fletter:"C",mobilefix:"00240"},{country:"丹麦",fletter:"D",mobilefix:"0045"},{country:"德国",fletter:"D",mobilefix:"0049"},{country:"东帝汶",fletter:"D",mobilefix:"00670"},{country:"多哥",fletter:"D",mobilefix:"00228"},{country:"多米尼加",fletter:"D",mobilefix:"001809"},{country:"俄罗斯",fletter:"E",mobilefix:"007"},{country:"厄瓜多尔",fletter:"E",mobilefix:"00593"},{country:"厄立特里亚",fletter:"E",mobilefix:"00291"},{country:"法国",fletter:"F",mobilefix:"0033"},{country:"法罗",fletter:"F",mobilefix:"00298"},{country:"法属波利尼西亚",fletter:"F",mobilefix:"00689"},{country:"法属圭亚那",fletter:"F",mobilefix:"00594"},{country:"菲律宾",fletter:"F",mobilefix:"0063"},{country:"斐济",fletter:"F",mobilefix:"00679"},{country:"芬兰",fletter:"F",mobilefix:"00358"},{country:"佛得角",fletter:"F",mobilefix:"00238"},{country:"福克兰",fletter:"F",mobilefix:"00500"},{country:"冈比亚",fletter:"G",mobilefix:"00220"},{country:"刚果",fletter:"G",mobilefix:"00242"},{country:"哥伦比亚",fletter:"G",mobilefix:"0057"},{country:"哥斯达黎加",fletter:"G",mobilefix:"00506"},{country:"格陵兰岛",fletter:"G",mobilefix:"00299"},{country:"古巴",fletter:"G",mobilefix:"0053"},{country:"瓜德罗普岛",fletter:"G",mobilefix:"00590"},{country:"关岛",fletter:"G",mobilefix:"001671"},{country:"圭亚那",fletter:"G",mobilefix:"00592"},{country:"哈萨克斯坦",fletter:"H",mobilefix:"007"},{country:"海地",fletter:"H",mobilefix:"00509"},{country:"荷兰",fletter:"H",mobilefix:"0031"},{country:"荷属安的列斯群岛",fletter:"H",mobilefix:"00599"},{country:"黑山共和国",fletter:"H",mobilefix:"00504"},{country:"洪都拉斯",fletter:"H",mobilefix:"00686"},{country:"吉布提",fletter:"J",mobilefix:"00253"},{country:"吉尔吉斯斯坦",fletter:"J",mobilefix:"00996"},{country:"几内亚",fletter:"J",mobilefix:"00224"},{country:"几内亚比绍",fletter:"J",mobilefix:"00245"},{country:"加拿大",fletter:"J",mobilefix:"001"},{country:"加纳",fletter:"J",mobilefix:"00233"},{country:"加蓬",fletter:"J",mobilefix:"00241"},{country:"柬埔寨",fletter:"J",mobilefix:"00855"},{country:"捷克共和国",fletter:"J",mobilefix:"00420"},{country:"津巴布韦",fletter:"J",mobilefix:"00263"},{country:"喀麦隆",fletter:"K",mobilefix:"00237"},{country:"卡塔尔",fletter:"K",mobilefix:"00974"},{country:"科摩罗",fletter:"K",mobilefix:"00269"},{country:"科威特",fletter:"K",mobilefix:"00965"},{country:"克罗地亚",fletter:"K",mobilefix:"00385"},{country:"肯尼亚",fletter:"K",mobilefix:"00254"},{country:"库克",fletter:"K",mobilefix:"00682"},{country:"拉脱维亚",fletter:"L",mobilefix:"00371"},{country:"莱索托",fletter:"L",mobilefix:"00266"},{country:"老挝",fletter:"L",mobilefix:"00856"},{country:"黎巴嫩",fletter:"L",mobilefix:"00961"},{country:"立陶宛",fletter:"L",mobilefix:"00370"},{country:"利比里亚",fletter:"L",mobilefix:"00231"},{country:"利比亚",fletter:"L",mobilefix:"00218"},{country:"列支敦斯登",fletter:"L",mobilefix:"00423"},{country:"卢森堡",fletter:"L",mobilefix:"00352"},{country:"卢旺达",fletter:"L",mobilefix:"00250"},{country:"罗马尼亚",fletter:"L",mobilefix:"0040"},{country:"马达加斯加",fletter:"M",mobilefix:"00261"},{country:"马尔代夫",fletter:"M",mobilefix:"00960"},{country:"马耳他",fletter:"M",mobilefix:"00356"},{country:"马拉维",fletter:"M",mobilefix:"00265"},{country:"马来西亚",fletter:"M",mobilefix:"0060"},{country:"马里",fletter:"M",mobilefix:"00223"},{country:"马其顿",fletter:"M",mobilefix:"00389"},{country:"毛里求斯",fletter:"M",mobilefix:"00230"},{country:"毛利塔尼亚",fletter:"M",mobilefix:"00222"},{country:"美国",fletter:"M",mobilefix:"001"},{country:"美属维珍",fletter:"M",mobilefix:"001340"},{country:"美属萨摩亚",fletter:"M",mobilefix:"00684"},{country:"蒙古",fletter:"M",mobilefix:"00976"},{country:"孟加拉国",fletter:"M",mobilefix:"00880"},{country:"秘鲁",fletter:"M",mobilefix:"0051"},{country:"密克罗尼西亚",fletter:"M",mobilefix:"00691"},{country:"缅甸(缅甸)",fletter:"M",mobilefix:"0095"},{country:"民主刚果",fletter:"M",mobilefix:"00243"},{country:"摩尔多瓦",fletter:"M",mobilefix:"00373"},{country:"摩洛哥",fletter:"M",mobilefix:"00212"},{country:"摩纳哥",fletter:"M",mobilefix:"00377"},{country:"莫桑比克",fletter:"M",mobilefix:"00258"},{country:"墨西哥",fletter:"M",mobilefix:"0052"},{country:"纳米比亚",fletter:"N",mobilefix:"00264"},{country:"南非",fletter:"N",mobilefix:"0027"},{country:"南苏丹",fletter:"N",mobilefix:"00211"},{country:"尼泊尔",fletter:"N",mobilefix:"00977"},{country:"尼加拉瓜",fletter:"N",mobilefix:"00505"},{country:"尼日尔",fletter:"N",mobilefix:"00227"},{country:"尼日利亚",fletter:"N",mobilefix:"00234"},{country:"挪威",fletter:"N",mobilefix:"0047"},{country:"诺福克",fletter:"N",mobilefix:"00672"},{country:"帕劳",fletter:"P",mobilefix:"00680"},{country:"葡萄牙",fletter:"P",mobilefix:"00351"},{country:"乔治亚州",fletter:"Q",mobilefix:"001"},{country:"瑞典",fletter:"R",mobilefix:"0046"},{country:"瑞士",fletter:"R",mobilefix:"0041"},{country:"萨尔瓦多",fletter:"S",mobilefix:"00503"},{country:"塞尔维亚和黑山(南斯拉夫)",fletter:"S",mobilefix:"00381"},{country:"塞拉利昂",fletter:"S",mobilefix:"00232"},{country:"塞内加尔",fletter:"S",mobilefix:"00221"},{country:"塞浦路斯",fletter:"S",mobilefix:"00357"},{country:"塞舌尔",fletter:"S",mobilefix:"00248"},{country:"沙特阿拉伯",fletter:"S",mobilefix:"00966"},{country:"圣多美和普林西比",fletter:"S",mobilefix:"00239"},{country:"圣马力诺",fletter:"S",mobilefix:"00378"},{country:"圣皮埃尔和密克隆群岛",fletter:"S",mobilefix:"00508"},{country:"斯里兰卡",fletter:"S",mobilefix:"0094"},{country:"斯洛伐克",fletter:"S",mobilefix:"00421"},{country:"斯洛文尼亚",fletter:"S",mobilefix:"00386"},{country:"斯威士兰",fletter:"S",mobilefix:"00268"},{country:"苏丹",fletter:"S",mobilefix:"00249"},{country:"苏里南",fletter:"S",mobilefix:"00597"},{country:"所罗门群岛",fletter:"S",mobilefix:"00677"},{country:"索马里",fletter:"S",mobilefix:"00252"},{country:"塔吉克斯坦",fletter:"T",mobilefix:"00992"},{country:"泰国",fletter:"T",mobilefix:"0066"},{country:"坦桑尼亚",fletter:"T",mobilefix:"00255"},{country:"汤加",fletter:"T",mobilefix:"00676"},{country:"特克斯和凯科斯群岛",fletter:"T",mobilefix:"001649"},{country:"特立尼达和多巴哥",fletter:"T",mobilefix:"001868"},{country:"突尼斯",fletter:"T",mobilefix:"00216"},{country:"土耳其",fletter:"T",mobilefix:"0090"},{country:"土库曼斯坦",fletter:"T",mobilefix:"00993"},{country:"瓦努阿图",fletter:"W",mobilefix:"001681"},{country:"危地马拉",fletter:"W",mobilefix:"00502"},{country:"委内瑞拉",fletter:"W",mobilefix:"0058"},{country:"文莱",fletter:"W",mobilefix:"00673"},{country:"乌干达",fletter:"W",mobilefix:"00256"},{country:"乌克兰",fletter:"W",mobilefix:"00380"},{country:"乌拉圭",fletter:"W",mobilefix:"00598"},{country:"乌兹别克斯坦",fletter:"W",mobilefix:"00998"},{country:"西班牙",fletter:"X",mobilefix:"0034"},{country:"西萨摩亚",fletter:"X",mobilefix:"00685"},{country:"希腊",fletter:"X",mobilefix:"0030"},{country:"象牙海岸",fletter:"X",mobilefix:"00225"},{country:"新加坡",fletter:"X",mobilefix:"0065"},{country:"新喀里多尼亚",fletter:"X",mobilefix:"00687"},{country:"新西兰",fletter:"X",mobilefix:"0064"},{country:"匈牙利",fletter:"X",mobilefix:"0036"},{country:"叙利亚",fletter:"X",mobilefix:"00963"},{country:"牙买加",fletter:"Y",mobilefix:"001876"},{country:"亚美尼亚",fletter:"Y",mobilefix:"00374"},{country:"也门",fletter:"Y",mobilefix:"00967"},{country:"伊拉克",fletter:"Y",mobilefix:"00964"},{country:"伊朗",fletter:"Y",mobilefix:"0098"},{country:"以色列",fletter:"Y",mobilefix:"00972"},{country:"意大利",fletter:"Y",mobilefix:"0039"},{country:"印度",fletter:"Y",mobilefix:"0091"},{country:"印尼",fletter:"Y",mobilefix:"0062"},{country:"英国",fletter:"Y",mobilefix:"0044"},{country:"约旦",fletter:"Y",mobilefix:"00962"},{country:"越南",fletter:"Y",mobilefix:"0084"},{country:"赞比亚",fletter:"Z",mobilefix:"00260"},{country:"乍得",fletter:"Z",mobilefix:"00235"},{country:"直布罗陀",fletter:"Z",mobilefix:"00350"},{country:"智利",fletter:"Z",mobilefix:"0056"},{country:"中非",fletter:"Z",mobilefix:"00236"}],i='<span class="select_box" id="select_box" node-name="selectBox"><span id="select_result" node-name="selectResult" class="select_showbox"><span>中国大陆</span><em>+86</em></span><span class="space"></span><ul class="select_option" node-name="selectOption" id="selectOption"></ul></span>';s(this.target,i,this.configs.position),this.nodeList=u(document.getElementById("mobileFixBox"));for(var o=0;o<r.length;o++)t=r[o].mobilefix.substr(2),n!=""&&n==r[o].mobilefix?(e+="<li class='selected clearfix' data-action-data='' data-node-value='"+t+"|"+r[o].country+"'><span>"+r[o].country+"</span><em>+"+t+"</em></li>",select_showbox.html("<span>"+r[o].country+"</span><em>+"+t+"</em>")):e+="<li class='clearfix' data-node-value='"+t+"|"+r[o].country+"'><span>"+r[o].country+"</span><em>+"+t+"</em></li>";s(this.nodeList.selectOption,e,"beforeend")},attach:function(){var e=this,t=this.nodeList.selectBox,n=this.nodeList.selectResult,r=this.nodeList.selectOption;a(t,"click",function(e){o(r,"display")=="none"?(r.style.display="block",n.style.backgroundImage="url(https://res.udb.duowan.com/zc/images/select_icon_up.png)"):(r.style.display="none",n.style.backgroundImage="url(https://res.udb.duowan.com/zc/images/select_icon_down.png)")}),a(r,"mouseup",function(t){e.getMobileFix(t)}),a(r,"mouseover",function(e){var t=e.target||window.event.srcElement;t=t.nodeName.toLowerCase()=="li"?t:t.parentNode,f.has(t,"hover")||f.add(t,"hover")}),a(r,"mouseout",function(e){var t=e.target||window.event.srcElement;t=t.nodeName.toLowerCase()=="li"?t:t.parentNode,f.has(t,"hover")&&f.remove(t,"hover")}),a(document,"click",function(e){var t=e.target||window.event.srcElement;if(t.id&&t.id=="select_result"||t.parentNode.id&&t.parentNode.id=="select_result")return;r.style.display="none",n.style.backgroundImage="url(https://res.udb.duowan.com/zc/images/select_icon_down.png)"})},getMobileFix:function(e){var t=this,n=this.nodeList.selectBox,r=this.nodeList.selectResult,i=this.nodeList.selectOption,s=i.getElementsByTagName("li"),o=e.target||window.event.srcElement;if(o==i)return;o=o.nodeName.toLowerCase()=="li"?o:o.parentNode;var u=o.innerHTML;for(var a=0;a<s.length;a++)f.remove(s[a],"selected");f.has(o,"selected")?f.remove(o,"selected"):f.add(o,"selected"),r.innerHTML=u,r.style.backgroundImage="url(https://res.udb.duowan.com/zc/images/select_icon_down.png)",i.style.display="none";var c=l.get(o,"nodeValue").split("|");this.mobileFix=c[0]=="86"?"":"00"+c[0]}},c}),function(){function BarrettMu_modulo(e){var t=RSAUtils,n=t.biDivideByRadixPower(e,this.k-1),r=t.biMultiply(n,this.mu),i=t.biDivideByRadixPower(r,this.k+1),s=t.biModuloByRadixPower(e,this.k+1),o=t.biMultiply(i,this.modulus),u=t.biModuloByRadixPower(o,this.k+1),a=t.biSubtract(s,u);a.isNeg&&(a=t.biAdd(a,this.bkplus1));var f=t.biCompare(a,this.modulus)>=0;while(f)a=t.biSubtract(a,this.modulus),f=t.biCompare(a,this.modulus)>=0;return a}function BarrettMu_multiplyMod(e,t){var n=RSAUtils.biMultiply(e,t);return this.modulo(n)}function BarrettMu_powMod(e,t){var n=new BigInt;n.digits[0]=1;var r=e,i=t;for(;;){(i.digits[0]&1)!=0&&(n=this.multiplyMod(n,r)),i=RSAUtils.biShiftRight(i,1);if(i.digits[0]==0&&RSAUtils.biHighIndex(i)==0)break;r=this.multiplyMod(r,r)}return n}var that={},RSAUtils={},biRadixBase=2,biRadixBits=16,bitsPerDigit=biRadixBits,biRadix=65536,biHalfRadix=biRadix>>>1,biRadixSquared=biRadix*biRadix,maxDigitVal=biRadix-1,maxInteger=9999999999999998,maxDigits,ZERO_ARRAY,bigZero,bigOne,rsaPubkey_m="b5f53d3e7ab166d99b91bdee1414364e97a5569d9a4da971dcf241e9aec4ee4ee7a27b203f278be7cc695207d19b9209f0e50a3ea367100e06ad635e4ccde6f8a7179d84b7b9b7365a6a7533a9909695f79f3f531ea3c329b7ede2cd9bb9722104e95c0f234f1a72222b0210579f6582fcaa9d8fa62c431a37d88a4899ebce3d",rsaPubkey_e="10001",BigInt=that.BigInt=function(e){typeof e=="boolean"&&e==1?this.digits=null:this.digits=ZERO_ARRAY.slice(0),this.isNeg=!1};RSAUtils.setMaxDigits=function(e){maxDigits=e,ZERO_ARRAY=new Array(maxDigits);for(var t=0;t<ZERO_ARRAY.length;t++)ZERO_ARRAY[t]=0;bigZero=new BigInt,bigOne=new BigInt,bigOne.digits[0]=1},RSAUtils.setMaxDigits(20);var dpl10=15;RSAUtils.biFromNumber=function(e){var t=new BigInt;t.isNeg=e<0,e=Math.abs(e);var n=0;while(e>0)t.digits[n++]=e&maxDigitVal,e=Math.floor(e/biRadix);return t};var lr10=RSAUtils.biFromNumber(1e15);RSAUtils.biFromDecimal=function(e){var t=e.charAt(0)=="-",n=t?1:0,r;while(n<e.length&&e.charAt(n)=="0")++n;if(n==e.length)r=new BigInt;else{var i=e.length-n,s=i%dpl10;s==0&&(s=dpl10),r=RSAUtils.biFromNumber(Number(e.substr(n,s))),n+=s;while(n<e.length)r=RSAUtils.biAdd(RSAUtils.biMultiply(r,lr10),RSAUtils.biFromNumber(Number(e.substr(n,dpl10)))),n+=dpl10;r.isNeg=t}return r},RSAUtils.biCopy=function(e){var t=new BigInt(!0);return t.digits=e.digits.slice(0),t.isNeg=e.isNeg,t},RSAUtils.reverseStr=function(e){var t="";for(var n=e.length-1;n>-1;--n)t+=e.charAt(n);return t};var hexatrigesimalToChar=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"];RSAUtils.biToString=function(e,t){var n=new BigInt;n.digits[0]=t;var r=RSAUtils.biDivideModulo(e,n),i=hexatrigesimalToChar[r[1].digits[0]];while(RSAUtils.biCompare(r[0],bigZero)==1)r=RSAUtils.biDivideModulo(r[0],n),digit=r[1].digits[0],i+=hexatrigesimalToChar[r[1].digits[0]];return(e.isNeg?"-":"")+RSAUtils.reverseStr(i)},RSAUtils.biToDecimal=function(e){var t=new BigInt;t.digits[0]=10;var n=RSAUtils.biDivideModulo(e,t),r=String(n[1].digits[0]);while(RSAUtils.biCompare(n[0],bigZero)==1)n=RSAUtils.biDivideModulo(n[0],t),r+=String(n[1].digits[0]);return(e.isNeg?"-":"")+RSAUtils.reverseStr(r)};var hexToChar=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];RSAUtils.digitToHex=function(e){var t=15,n="";for(i=0;i<4;++i)n+=hexToChar[e&t],e>>>=4;return RSAUtils.reverseStr(n)},RSAUtils.biToHex=function(e){var t="",n=RSAUtils.biHighIndex(e);for(var r=RSAUtils.biHighIndex(e);r>-1;--r)t+=RSAUtils.digitToHex(e.digits[r]);return t},RSAUtils.charToHex=function(e){var t=48,n=t+9,r=97,i=r+25,s=65,o=90,u;return e>=t&&e<=n?u=e-t:e>=s&&e<=o?u=10+e-s:e>=r&&e<=i?u=10+e-r:u=0,u},RSAUtils.hexToDigit=function(e){var t=0,n=Math.min(e.length,4);for(var r=0;r<n;++r)t<<=4,t|=RSAUtils.charToHex(e.charCodeAt(r));return t},RSAUtils.biFromHex=function(e){var t=new BigInt,n=e.length;for(var r=n,i=0;r>0;r-=4,++i)t.digits[i]=RSAUtils.hexToDigit(e.substr(Math.max(r-4,0),Math.min(r,4)));return t},RSAUtils.biFromString=function(e,t){var n=e.charAt(0)=="-",r=n?1:0,i=new BigInt,s=new BigInt;s.digits[0]=1;for(var o=e.length-1;o>=r;o--){var u=e.charCodeAt(o),a=RSAUtils.charToHex(u),f=RSAUtils.biMultiplyDigit(s,a);i=RSAUtils.biAdd(i,f),s=RSAUtils.biMultiplyDigit(s,t)}return i.isNeg=n,i},RSAUtils.biDump=function(e){return(e.isNeg?"-":"")+e.digits.join(" ")},RSAUtils.biAdd=function(e,t){var n;if(e.isNeg!=t.isNeg)t.isNeg=!t.isNeg,n=RSAUtils.biSubtract(e,t),t.isNeg=!t.isNeg;else{n=new BigInt;var r=0,i;for(var s=0;s<e.digits.length;++s)i=e.digits[s]+t.digits[s]+r,n.digits[s]=i%biRadix,r=Number(i>=biRadix);n.isNeg=e.isNeg}return n},RSAUtils.biSubtract=function(e,t){var n;if(e.isNeg!=t.isNeg)t.isNeg=!t.isNeg,n=RSAUtils.biAdd(e,t),t.isNeg=!t.isNeg;else{n=new BigInt;var r,i;i=0;for(var s=0;s<e.digits.length;++s)r=e.digits[s]-t.digits[s]+i,n.digits[s]=r%biRadix,n.digits[s]<0&&(n.digits[s]+=biRadix),i=0-Number(r<0);if(i==-1){i=0;for(var s=0;s<e.digits.length;++s)r=0-n.digits[s]+i,n.digits[s]=r%biRadix,n.digits[s]<0&&(n.digits[s]+=biRadix),i=0-Number(r<0);n.isNeg=!e.isNeg}else n.isNeg=e.isNeg}return n},RSAUtils.biHighIndex=function(e){var t=e.digits.length-1;while(t>0&&e.digits[t]==0)--t;return t},RSAUtils.biNumBits=function(e){var t=RSAUtils.biHighIndex(e),n=e.digits[t],r=(t+1)*bitsPerDigit,i;for(i=r;i>r-bitsPerDigit;--i){if((n&32768)!=0)break;n<<=1}return i},RSAUtils.biMultiply=function(e,t){var n=new BigInt,r,i=RSAUtils.biHighIndex(e),s=RSAUtils.biHighIndex(t),o,u,a;for(var f=0;f<=s;++f){r=0,a=f;for(j=0;j<=i;++j,++a)u=n.digits[a]+e.digits[j]*t.digits[f]+r,n.digits[a]=u&maxDigitVal,r=u>>>biRadixBits;n.digits[f+i+1]=r}return n.isNeg=e.isNeg!=t.isNeg,n},RSAUtils.biMultiplyDigit=function(e,t){var n,r,i;result=new BigInt,n=RSAUtils.biHighIndex(e),r=0;for(var s=0;s<=n;++s)i=result.digits[s]+e.digits[s]*t+r,result.digits[s]=i&maxDigitVal,r=i>>>biRadixBits;return result.digits[1+n]=r,result},RSAUtils.arrayCopy=function(e,t,n,r,i){var s=Math.min(t+i,e.length);for(var o=t,u=r;o<s;++o,++u)n[u]=e[o]};var highBitMasks=[0,32768,49152,57344,61440,63488,64512,65024,65280,65408,65472,65504,65520,65528,65532,65534,65535];RSAUtils.biShiftLeft=function(e,t){var n=Math.floor(t/bitsPerDigit),r=new BigInt;RSAUtils.arrayCopy(e.digits,0,r.digits,n,r.digits.length-n);var i=t%bitsPerDigit,s=bitsPerDigit-i;for(var o=r.digits.length-1,u=o-1;o>0;--o,--u)r.digits[o]=r.digits[o]<<i&maxDigitVal|(r.digits[u]&highBitMasks[i])>>>s;return r.digits[0]=r.digits[o]<<i&maxDigitVal,r.isNeg=e.isNeg,r};var lowBitMasks=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];RSAUtils.biShiftRight=function(e,t){var n=Math.floor(t/bitsPerDigit),r=new BigInt;RSAUtils.arrayCopy(e.digits,n,r.digits,0,e.digits.length-n);var i=t%bitsPerDigit,s=bitsPerDigit-i;for(var o=0,u=o+1;o<r.digits.length-1;++o,++u)r.digits[o]=r.digits[o]>>>i|(r.digits[u]&lowBitMasks[i])<<s;return r.digits[r.digits.length-1]>>>=i,r.isNeg=e.isNeg,r},RSAUtils.biMultiplyByRadixPower=function(e,t){var n=new BigInt;return RSAUtils.arrayCopy(e.digits,0,n.digits,t,n.digits.length-t),n},RSAUtils.biDivideByRadixPower=function(e,t){var n=new BigInt;return RSAUtils.arrayCopy(e.digits,t,n.digits,0,n.digits.length-t),n},RSAUtils.biModuloByRadixPower=function(e,t){var n=new BigInt;return RSAUtils.arrayCopy(e.digits,0,n.digits,0,t),n},RSAUtils.biCompare=function(e,t){if(e.isNeg!=t.isNeg)return 1-2*Number(e.isNeg);for(var n=e.digits.length-1;n>=0;--n)if(e.digits[n]!=t.digits[n])return e.isNeg?1-2*Number(e.digits[n]>t.digits[n]):1-2*Number(e.digits[n]<t.digits[n]);return 0},RSAUtils.biDivideModulo=function(e,t){var n=RSAUtils.biNumBits(e),r=RSAUtils.biNumBits(t),i=t.isNeg,s,o;if(n<r)return e.isNeg?(s=RSAUtils.biCopy(bigOne),s.isNeg=!t.isNeg,e.isNeg=!1,t.isNeg=!1,o=biSubtract(t,e),e.isNeg=!0,t.isNeg=i):(s=new BigInt,o=RSAUtils.biCopy(e)),[s,o];s=new BigInt,o=e;var u=Math.ceil(r/bitsPerDigit)-1,a=0;while(t.digits[u]<biHalfRadix)t=RSAUtils.biShiftLeft(t,1),++a,++r,u=Math.ceil(r/bitsPerDigit)-1;o=RSAUtils.biShiftLeft(o,a),n+=a;var f=Math.ceil(n/bitsPerDigit)-1,l=RSAUtils.biMultiplyByRadixPower(t,f-u);while(RSAUtils.biCompare(o,l)!=-1)++s.digits[f-u],o=RSAUtils.biSubtract(o,l);for(var c=f;c>u;--c){var h=c>=o.digits.length?0:o.digits[c],p=c-1>=o.digits.length?0:o.digits[c-1],d=c-2>=o.digits.length?0:o.digits[c-2],v=u>=t.digits.length?0:t.digits[u],m=u-1>=t.digits.length?0:t.digits[u-1];h==v?s.digits[c-u-1]=maxDigitVal:s.digits[c-u-1]=Math.floor((h*biRadix+p)/v);var g=s.digits[c-u-1]*(v*biRadix+m),y=h*biRadixSquared+(p*biRadix+d);while(g>y)--s.digits[c-u-1],g=s.digits[c-u-1]*(v*biRadix|m),y=h*biRadix*biRadix+(p*biRadix+d);l=RSAUtils.biMultiplyByRadixPower(t,c-u-1),o=RSAUtils.biSubtract(o,RSAUtils.biMultiplyDigit(l,s.digits[c-u-1])),o.isNeg&&(o=RSAUtils.biAdd(o,l),--s.digits[c-u-1])}return o=RSAUtils.biShiftRight(o,a),s.isNeg=e.isNeg!=i,e.isNeg&&(i?s=RSAUtils.biAdd(s,bigOne):s=RSAUtils.biSubtract(s,bigOne),t=RSAUtils.biShiftRight(t,a),o=RSAUtils.biSubtract(t,o)),o.digits[0]==0&&RSAUtils.biHighIndex(o)==0&&(o.isNeg=!1),[s,o]},RSAUtils.biDivide=function(e,t){return RSAUtils.biDivideModulo(e,t)[0]},RSAUtils.biModulo=function(e,t){return RSAUtils.biDivideModulo(e,t)[1]},RSAUtils.biMultiplyMod=function(e,t,n){return RSAUtils.biModulo(RSAUtils.biMultiply(e,t),n)},RSAUtils.biPow=function(e,t){var n=bigOne,r=e;for(;;){(t&1)!=0&&(n=RSAUtils.biMultiply(n,r)),t>>=1;if(t==0)break;r=RSAUtils.biMultiply(r,r)}return n},RSAUtils.biPowMod=function(e,t,n){var r=bigOne,i=e,s=t;for(;;){(s.digits[0]&1)!=0&&(r=RSAUtils.biMultiplyMod(r,i,n)),s=RSAUtils.biShiftRight(s,1);if(s.digits[0]==0&&RSAUtils.biHighIndex(s)==0)break;i=RSAUtils.biMultiplyMod(i,i,n)}return r},that.BarrettMu=function(e){this.modulus=RSAUtils.biCopy(e),this.k=RSAUtils.biHighIndex(this.modulus)+1;var t=new BigInt;t.digits[2*this.k]=1,this.mu=RSAUtils.biDivide(t,this.modulus),this.bkplus1=new BigInt,this.bkplus1.digits[this.k+1]=1,this.modulo=BarrettMu_modulo,this.multiplyMod=BarrettMu_multiplyMod,this.powMod=BarrettMu_powMod};var RSAKeyPair=function(e,t,n){var r=RSAUtils;this.e=r.biFromHex(e),this.d=r.biFromHex(t),this.m=r.biFromHex(n),this.chunkSize=2*r.biHighIndex(this.m),this.radix=16,this.barrett=new that.BarrettMu(this.m)};RSAUtils.getKeyPair=function(e,t,n){return new RSAKeyPair(e,t,n)},typeof that.twoDigit=="undefined"&&(that.twoDigit=function(e){return(e<10?"0":"")+String(e)}),RSAUtils.encryptedString=function(e){if(e==null||RSAUtils.containsChinese(e))return"";e=e.split("").reverse().join("");var t=new RSAUtils.getKeyPair(rsaPubkey_e,"",rsaPubkey_m),n=[],r=e.length,i=0;while(i<r)n[i]=e.charCodeAt(i),i++;while(n.length%t.chunkSize!=0)n[i++]=0;var s=n.length,o="",u,a,f;for(i=0;i<s;i+=t.chunkSize){f=new BigInt,u=0;for(a=i;a<i+t.chunkSize;++u)f.digits[u]=n[a++],f.digits[u]+=n[a++]<<8;var l=t.barrett.powMod(f,t.e),c=t.radix==16?RSAUtils.biToHex(l):RSAUtils.biToString(l,t.radix);o+=c+" "}return o=o.substring(0,o.length-1),o.length==256?o:o.length==252?"0000"+o:""},RSAUtils.decryptedString=function(e,t){var n=t.split(" "),r="",i,s,o;for(i=0;i<n.length;++i){var u;e.radix==16?u=RSAUtils.biFromHex(n[i]):u=RSAUtils.biFromString(n[i],e.radix),o=e.barrett.powMod(u,e.d);for(s=0;s<=RSAUtils.biHighIndex(o);++s)r+=String.fromCharCode(o.digits[s]&255,o.digits[s]>>8)}return r.charCodeAt(r.length-1)==0&&(r=r.substring(0,r.length-1)),r},RSAUtils.containsChinese=function(e){if(e==null||e.length==0)return!1;var t=e.split("");for(var n=0;n<t.length;n++){var r=t[n];if(RSAUtils.isChinese(t[n]))return!0}return!1},RSAUtils.isChinese=function(e){return e.charCodeAt(0)>255?!0:!1};var NS=function(ns,hld){var arr=["window"];ns=ns.split(".");while(ns.length!=1)arr.push(ns.shift()),eval(arr.join("."))==null&&eval(arr.join(".")+" = {};");arr.push(ns.shift()),eval(arr.join(".")+" = hld;")};RSAUtils.setMaxDigits(200),that.registerNS=NS,that.RSAUtils=RSAUtils,that.registerNS("UDB.SDK.rsa",that)}(),define("udb/udb.sdk.rsa",function(){}),define("zc/regCore4UDB4Mobile/mainForm",["require","exports","module","lib/io/console","lib/comp/base","lib/dom/parseNode","lib/dom/queryNode","lib/evt/add","lib/dom/sizzle","lib/io/ajax","lib/str/trim","lib/util/when","lib/dom/className","udb/shadowTextbox","udb/dragVerify","udb/fastVerify","udb/mobileFixSelect","udb/udb.sdk.rsa"],function(e,t,n){var r=e("lib/io/console"),i=e("lib/comp/base"),s=e("lib/dom/parseNode"),o=e("lib/dom/queryNode"),u=e("lib/evt/add"),a=e("lib/dom/sizzle"),f=e("lib/io/ajax"),l=e("lib/str/trim"),c=e("lib/util/when"),h=e("lib/dom/className"),p=e("udb/shadowTextbox"),d=e("udb/dragVerify"),v=e("udb/fastVerify"),m=e("udb/mobileFixSelect");return e("udb/udb.sdk.rsa"),function(e,t){var n=i(),r=null,g=null,y=null,b=null,w=null,E=null,S=null,x=null,T="",N={acct:{}},C={inMobileFocus:function(){r.mobileFocusTip.style.display="block",A.updateMobileTip(),A.hideNotice("mobile")},inMobileBlur:function(){r.mobileFocusTip.style.display="none",A.inMobileVerify().then(function(){A.showNotice(!0,"mobile")}).otherwise(function(e){A.showNotice(!1,e.type,e.msg)})},inMobileUp:function(){A.updateMobileTip()},inPasswordFocus:function(){r.passwordFocusTip.style.display="block",A.updatePasswordTip(),A.hideNotice("pass")},inPasswordBlur:function(){r.passwordFocusTip.style.display="none",A.inPasswordVerify().then(function(){A.showNotice(!0,"pass")}).otherwise(function(e){A.showNotice(!1,e.type,e.msg)})},inPasswordUp:function(){A.updatePasswordTip()},inResetPassFocus:function(){A.hideNotice("reset")},inResetPassBlur:function(){A.inResetPassVerify().then(function(){A.showNotice(!0,"reset")}).otherwise(function(e){A.showNotice(!1,e.type,e.msg)})},changeVCode:function(){A.updateVCodeImg()},inVCodeFocus:function(){A.hideNotice("vcode")},inVCodeBlur:function(){A.inVCodeVerify().then(function(){A.showNotice(!0,"vcode")}).otherwise(function(e){A.showNotice(!1,e.type,e.msg)})},dragCodeError:function(e){A.showNotice(!1,"form",e.data)},send:function(){if(n.isLock())return;A.clearNotice(),n.lock(),t.isMF=="true"&&x!=null&&(T=x.mobileFix);var e=A.inMobileVerify().then(A.inPasswordVerify).then(A.inResetPassVerify);if(t.isV==1||t.isV==2||t.isV===!0)e=e.then(A.inVCodeVerify);t.isV==3&&(e=e.then(A.dragVerify)),t.isV==4&&(e=e.then(A.fastVerify)),e=e.then(function(){var e=c.defer(),i=l(r.inMobile.value),s=l(r.inPassword.value);return!UDB.SDK.rsa||(s=UDB.SDK.rsa.RSAUtils.encryptedString(s)),f({url:"/p/chkRegInfo4EM.do",data:{passport:T+i,password:s,mobilefix:T,appid:t.appid},method:"post",onSuccess:function(t){n.unLock();switch(t.code){case"0":n.unLock(),e.resolve(),n.fire("finish",{mobile:T+i,mobileFix:T,pass:s});break;default:A.updateVCode(),e.reject({type:"form",msg:t.msg})}},onError:function(){e.reject({type:"form",msg:"网络连接失败，请稍候再试"})}}),e.promise}),e.otherwise(function(e){n.unLock(),A.showNotice(!1,e.type,e.msg)})}},k=function(){g=p(r.tbMobile),y=p(r.tbPassword),b=p(r.tbResetPass),g.init(),y.init(),b.init(),t.isMF=="true"&&(x=new m({target:document.getElementById("mobileFixBox"),position:"afterbegin"}));if(t.isV==1||t.isV==2||t.isV===!0)w=p(r.tbVCode),w.init();t.isV==3&&(E=d(r.dragVerify,{appid:t.appid,baseInfoURL:"/draggableVcode/getBasicInfo.do"}),E.init()),t.isV==4&&(S=v({appid:t.appid}),S.init())},L=function(){u(r.inMobile,"focus",C.inMobileFocus),u(r.inMobile,"blur",C.inMobileBlur),u(r.inMobile,"keyup",C.inMobileUp),u(r.inPassword,"focus",C.inPasswordFocus),u(r.inPassword,"blur",C.inPasswordBlur),u(r.inPassword,"keyup",C.inPasswordUp),u(r.inResetPass,"focus",C.inResetPassFocus),u(r.inResetPass,"blur",C.inResetPassBlur),u(r.send,"click",C.send);if(t.isV==1||t.isV==2||t.isV===!0)u(r.changeVCode,"click",C.changeVCode),u(r.inVCode,"focus",C.inVCodeFocus),u(r.inVCode,"blur",C.inVCodeBlur);t.isV==3&&E.bind("error",C.dragCodeError),t.isV==4&&S.bind("error",C.dragCodeError)},A={updateVCode:function(){t.isV==1||t.isV==2||t.isV===!0?A.updateVCodeImg():t.isV==3&&E.reset(!0)},showNotice:function(e,t,n){var i=null;switch(t){case"mobile":i=o(".form_tip",r.mobile);break;case"pass":i=o(".form_tip",r.password);break;case"reset":i=o(".form_tip",r.resetPassword);break;case"vcode":i=o(".form_tip",r.vCodeWrap[0]);break;default:i=r.formError,i.innerHTML=e?"&nbsp;":n;return}i.innerHTML=e?'<span class="icon_suc"></span>':'<span class="icon_err"></span>&nbsp;'+n},hideNotice:function(e){var t=null;switch(e){case"mobile":t=o(".form_tip",r.mobile);break;case"pass":t=o(".form_tip",r.password);break;case"reset":t=o(".form_tip",r.resetPassword);break;case"vcode":t=o(".form_tip",r.vCodeWrap[0]);break;default:t=r.formError}t.innerHTML="&nbsp;"},clearNotice:function(){A.hideNotice("mobile"),A.hideNotice("pass"),A.hideNotice("reset"),A.hideNotice("form"),(t.isV==1||t.isV==2||t.isV===!0)&&A.hideNotice("vcode")},inMobileVerify:function(){var e=c.defer(),n=l(r.inMobile.value),i=l(r.inMobile.getAttribute("placeholder"));t.isMF=="true"&&x!=null&&(T=x.mobileFix);if(n==i||n.length==0)return e.reject({type:"mobile",msg:"请输入手机号码"}),e.promise;if(T!=""&&!/^\d{1,30}$/.test(n)||T==""&&!/^((13[0-9])|(14[0-9])|(15[0-9])|(16[0-9])|(17[0-9])|(18[0-9]))\d{8}$/.test(n))return e.reject({type:"mobile",msg:"请输入正确的手机号码"}),e.promise;var s=N.acct[T+n];return s?(e.resolve(),e.promise):(f({url:"/reg/pc/chk.do",data:{passport:T+n,mobilefix:T,appid:t.appid},method:"post",onSuccess:function(t){t.code==0?(e.resolve(),N.acct[T+n]=!0):t.code==3?e.reject({type:"mobile",msg:"该手机号已注册,您可以登录或<a href='https://aq.yy.com/p/pwd/fgt/index.do' target='_blank'>找回密码</a>"}):e.reject({type:"acct",msg:t.msg})},onError:function(){e.reject({type:"acct",msg:"网络连接失败，请稍候再试"})}}),e.promise)},updateMobileTip:function(){var e=s(r.mobileFocusTip),n=l(r.inMobile.value),i=l(r.inMobile.getAttribute("placeholder"));t.isMF=="true"&&x!=null&&(T=x.mobileFix),h.remove(a(".line",r.accountFocusTip),["line_e","line_s"]);if(n.length==0||n==i)return;T!=""&&!/^\d{1,30}$/.test(n)||T==""&&!/^((13[0-9])|(14[0-9])|(15[0-9])|(16[0-9])|(17[0-9])|(18[0-9]))\d{8}$/.test(n)?h.add(e.line1,"line_e"):h.add(e.line1,"line_s"),/[\u4E00-\u9FA5]/.test(n)?h.add(e.line2,"line_e"):h.add(e.line2,"line_s")},inPasswordVerify:function(){var e=c.defer(),t=l(r.inPassword.value),n=l(r.inPassword.getAttribute("placeholder"));return t.length==0?(e.reject({type:"pass",msg:"请输入密码"}),e.promise):t.length<8||t.length>20?(e.reject({type:"pass",msg:"长度为8-20个字符"}),e.promise):/\s/.test(t)?(e.reject({type:"pass",msg:"不能包含空格"}),e.promise):/^\d{1,8}$/.test(t)?(e.reject({type:"pass",msg:"不能是9位以下纯数字"}),e.promise):/^([a-zA-Z])\1{1,19}$/.test(t)?(e.reject({type:"pass",msg:"不能是相同的纯字母"}),e.promise):(e.resolve(),e.promise)},updatePasswordTip:function(){var e=s(r.passwordFocusTip),t=l(r.inPassword.value);h.remove(a(".line",r.passwordFocusTip),["line_e","line_s"]);if(t.length==0)return;t.length<8||t.length>20?h.add(e.line1,"line_e"):h.add(e.line1,"line_s"),/\s/.test(t)?h.add(e.line2,"line_e"):h.add(e.line2,"line_s"),/^\d{1,8}$/.test(t)?h.add(e.line3,"line_e"):h.add(e.line3,"line_s")},inResetPassVerify:function(e){var t=c.defer(),n=l(r.inPassword.value),i=l(r.inResetPass.value);return i.length==0?(t.reject({type:"reset",msg:"请重新输入密码"}),t.promise):n!=i?(t.reject({type:"reset",msg:"输入的密码不一致"}),t.promise):(t.resolve(),t.promise)},updateVCodeImg:function(){r.vCodeImg.src="/normalVcode/create.do?appid="+t.appid+"&random="+(new Date).getTime(),w.reset(),A.hideNotice("vcode")},inVCodeVerify:function(e){var n=c.defer(),i=l(r.inVCode.value),s=l(r.inVCode.getAttribute("placeholder"));return i==s||i.length==0?(n.reject({type:"vcode",msg:"请输入验证码"}),n.promise):(f({url:"/normalVcode/ckVcode.do",data:{vcode:i,appid:t.appid},method:"post",onSuccess:function(e){e.code==0?(n.resolve(),A.showNotice(!0,"vcode")):(n.reject({type:"vcode",msg:e.msg}),A.updateVCode())},onError:function(){n.reject({type:"vcode",msg:"网络连接失败，请稍候再试"})}}),n.promise)},dragVerify:function(){var e=c.defer();return E.verify(function(t,n){t?e.resolve():e.reject({type:"form",msg:n})}),e.promise},fastVerify:function(){var e=c.defer();return S.verify(function(t,n){t?e.resolve():e.reject({type:"form",msg:n})}),e.promise}},O=function(t){data=t,r=s(e),k(),L()};return n.init=O,n.updateVCode=A.updateVCode,n.showNotice=A.showNotice,n.hideNotice=A.hideNotice,n.clearNotice=A.clearNotice,n}}),define("udb/counterButton",["require","exports","module","lib/io/console","lib/comp/base","lib/dom/queryNode","lib/evt/add","lib/dom/className","lib/json/merge"],function(e,t,n){var r=e("lib/io/console"),i=e("lib/comp/base"),s=e("lib/dom/queryNode"),o=e("lib/evt/add"),u=e("lib/dom/className"),a=e("lib/json/merge");return function(e,t){var n=i();t=a({format:"重新发送({count})",className:"m_button_disabled",times:60},t||{});var r=null,o=null,f=!0,l={},c=function(){},h=function(){},p={start:function(i){var s=t.times;f=!1,u.add(e,t.className),r.text.innerHTML=t.format.replace(/\{count\}/ig,s);var a=setInterval(function(){s--,s==0?(u.remove(e,t.className),r.text.innerHTML=o,clearInterval(a),a=0,f=!0,n.fire("ready"),i&&i()):r.text.innerHTML=t.format.replace(/\{count\}/ig,s)},1e3)},isReady:function(){return f}},d=function(){r={text:s("span",e)||e},o=r.text.innerHTML,c(),h()};return n.init=d,n.start=p.start,n.isReady=p.isReady,n}}),define("zc/regCore4UDB4Mobile/mobileVCodeForm",["require","exports","module","lib/io/console","lib/comp/base","lib/dom/parseNode","lib/evt/add","lib/io/ajax","lib/str/trim","udb/shadowTextbox","udb/counterButton"],function(e,t,n){var r=e("lib/io/console"),i=e("lib/comp/base"),s=e("lib/dom/parseNode"),o=e("lib/evt/add"),u=e("lib/io/ajax"),a=e("lib/str/trim"),f=e("udb/shadowTextbox"),l=e("udb/counterButton");return function(e,t){var n=i(),r=null,c=null,h=null,p=null,d=!1,v={resend:function(){y.sendMessage()},next:function(){if(n.isLock())return;var e=a(r.inVCode.value);if(e.length==0||e==r.inVCode.getAttribute("placeholder")){y.showNotice(!1,"form","请输入验证码");return}var t={mobile:h.mobile,pass:h.pass,vcode:e};n.fire("finish",t)}},m=function(){c=f(r.tbVCode),p=l(r.resend,{className:"btn_blue_v3_disabled"}),c.init(),p.init()},g=function(){o(r.resend,"click",v.resend),o(r.next,"click",v.next)},y={showNotice:function(e,t,n){var i=null;switch(t){default:i=r.formError,i.innerHTML=e?"&nbsp;":n;return}i.innerHTML=e?'<span class="icon_suc"></span>':'<span class="icon_err"></span>&nbsp;'+n},hideNotice:function(e){var t=null;switch(e){default:t=r.formError}t.innerHTML="&nbsp;"},clearNotice:function(){y.hideNotice("form")},countdown:function(){if(d)return;d=!0,p.start(function(){d=!1})},sendMessage:function(){if(n.isLock()||d)return;y.countdown(),y.clearNotice(),y.sendMobileMessage({passport:h.mobile,mobileFix:h.mobileFix,callback:function(e,t){if(!e){y.showNotice(!1,"form",t);return}if(t.code!="0"){y.showNotice(!1,"form",t.msg);return}}})},sendMobileMessage:function(e){n.lock(),u({method:"POST",url:"/reg/udb/send.do",data:{appid:t.appid,mobilefix:e.mobileFix,passport:e.passport,token:t.token},onSuccess:function(t){n.unLock(),e.callback&&e.callback(!0,t)},onError:function(){n.unLock(),e.callback&&e.callback(!1,"网络连接失败，请稍候再试")}})}},b=function(t){h=t,r=s(e),m(),g()};return n.init=b,n.countdown=y.countdown,n.sendMobileMessage=y.sendMobileMessage,n.showNotice=y.showNotice,n.hideNotice=y.hideNotice,n.clearNotice=y.clearNotice,n}}),define("zc/regCore4UDB4Mobile/success",["require","exports","module","lib/io/console","lib/comp/base","lib/dom/parseNode","lib/evt/add"],function(e,t,n){var r=e("lib/io/console"),i=e("lib/comp/base"),s=e("lib/dom/parseNode"),o=e("lib/evt/add");return function(e,t){var n=i(),r=null,u=null,a={login:function(){var e=window.self.location===window.top.location?window.self:window.top;e.location.href=u.busiurl}},f=function(){},l=function(){},c={},h=function(t){u=t,r=s(e),f(),l(),r.yyno.innerHTML=u.yyid,r.mobile.innerHTML=u.passport,u.token!=null&&u.token.length?(r.login.style.display="inline-block",o(r.login,"click",a.login)):r.login.style.display="none"};return n.init=h,n}}),define("pages/regCore4UDB4Mobile",["require","exports","module","lib/io/console","lib/comp/base","lib/dom/queryNode","lib/evt/add","lib/io/ajax","lib/str/appendQuery","udb/decoder","zc/registerUtil","zc/regCore4UDB4Mobile/mainForm","zc/regCore4UDB4Mobile/mobileVCodeForm","zc/regCore4UDB4Mobile/success"],function(e,t,n){var r=e("lib/io/console"),i=e("lib/comp/base"),s=e("lib/dom/queryNode"),o=e("lib/evt/add"),u=e("lib/io/ajax"),a=e("lib/str/appendQuery"),f=e("udb/decoder"),l=e("zc/registerUtil"),c=e("zc/regCore4UDB4Mobile/mainForm"),h=e("zc/regCore4UDB4Mobile/mobileVCodeForm"),p=e("zc/regCore4UDB4Mobile/success"),d=i(),v=null,m=null,g=null,y=null,b=null,w={mainFormFinish:function(e){g.clearNotice(),y.sendMobileMessage({passport:e.data.mobile,mobileFix:e.data.mobileFix,callback:function(t,n){if(!t){g.showNotice(!1,"form",n);return}n.code=="0"?(m.mainForm.style.display="none",m.mobileVCodeForm.style.display="block",y.init({mobile:e.data.mobile,mobileFix:e.data.mobileFix,pass:e.data.pass}),y.countdown()):g.showNotice(!1,"form",n.msg)}})},mobileVCodeFormFinish:function(e){if(d.isLock())return;d.lock();var t={acct:e.data.mobile,password:e.data.pass,appid:v.appid,vtcode:e.data.vcode,isNeedVcode:v.isV,token:v.token},n=v.rcall,r=f.decrypt(n,"xzkavoiddeszf12d"),i=l.computechildpath(r),s="/regCore/udb4ME/"+i+".do?__ts="+(new Date).valueOf();u({url:s,method:"post",data:t,onSuccess:function(e){d.unLock();if(e.code!="0"){y.showNotice(!1,"form",e.msg);return}x.writeCookie({busiurlA:e.obj.busiurlA,rkey:e.obj.rkey,reqDomainList:e.obj.reqDomainList},function(){if(e.obj.action=="2"){var t=window.self.location===window.top.location?window.self.location:window.top.location;t.href=a(e.obj.busiurlA,"rescode="+encodeURIComponent(e.code)+"&yyid="+encodeURIComponent(e.obj.yyid)+"&username="+encodeURIComponent(e.obj.account))}});switch(e.obj.action){case"2":break;case"3":m.mobileVCodeForm.style.display="none",m.success.style.display="block",b.init({yyid:e.obj.yyid,passport:e.obj.account,token:e.obj.rkey,busiurl:e.obj.busiurlA});break;default:m.mobileVCodeForm.style.display="none",m.success.style.display="block",b.init({passport:e.obj.account,yyid:e.obj.yyid})}},onError:function(){d.unLock(),y.showNotice(!1,"form","网络连接失败，请稍候再试")}})}},E=function(){g=c(m.mainForm,v),y=h(m.mobileVCodeForm,v),b=p(m.success,v),g.init()},S=function(){g.bind("finish",w.mainFormFinish),y.bind("finish",w.mobileVCodeFormFinish)},x={writeCookie:function(e,t){var n=l.regCallMatchCookie(e.busiurlA);n==null&&(n=new Array,e.busiurlA="https://aq.yy.com",n[0]="https://aq.yy.com",n[1]="yy.com");if(e.reqDomainList==null)e.reqDomainList="lgn."+n[1];else{var r=e.reqDomainList.split(","),i={};i["lgn."+n[1]]=1234;for(var s=0;s<r.length;s++)i[r[s]]=1234;var u=[];for(var a in i)i[a]==1234&&u.push(a);e.reqDomainList=u.join(",")}var f="https://lgn."+n[1]+"/ws/reg/wckonly_n.do?rkey="+encodeURIComponent(e.rkey)+"&appid="+encodeURIComponent(v.appid)+"&urltag=A&attach=person&cbkurl="+encodeURIComponent(e.busiurlA)+"&reqDomainList="+encodeURIComponent(e.reqDomainList),c=function(e){var n=document.createElement("IFRAME");n.style.position="absolute",n.style.width="0px",n.style.height="0px",n.style.left="-100px",n.style.top="-100px",n.src=e,o(n,"load",function(){t&&t()}),document.body.appendChild(n)};c(f)}},T=function(e){v=e,m={mainForm:s("#m_mainForm"),mobileVCodeForm:s("#m_mobileVCodeForm"),success:s("#m_success")},E(),S()};return d.init=T,d});